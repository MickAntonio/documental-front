"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[568],{79:(U,T,i)=>{i.d(T,{V:()=>_});var f=i(4650);class p{constructor(){}transform(d,h,g){return Array.isArray(d)?d.map(D=>g.find(u=>u[h]===D)):g.find(D=>D[h]===d)}}p.\u0275fac=function(d){return new(d||p)},p.\u0275pipe=f.Yjl({name:"fuseFindByKey",type:p,pure:!1});class _{}_.\u0275fac=function(d){return new(d||_)},_.\u0275mod=f.oAB({type:_}),_.\u0275inj=f.cJS({})},2568:(U,T,i)=>{i.r(T),i.d(T,{DocumentosTiposModule:()=>I});var f=i(9299),p=i(1206),_=i(7957),m=i(4859),d=i(6709),h=i(3238),g=i(9602),D=i(4850),u=i(9549),b=i(7392),r=i(284),l=i(9506),v=i(8255),C=i(3162),F=i(1948),Q=i(4385),S=i(3267),j=i(266),K=i(79),z=i(4466),W=i(1087),$=i(8764),G=i(7579),R=i(2722),H=i(6451),V=i(3900),a=i(4006),P=i(8739),L=i(6308),X=i(8288),B=i(529),t=i(4650),q=i(6189),tt=i(3878),et=i(4880),Y=i(9424),k=i(7775),A=i(6895),ot=i(8214),y=i(7084),E=i(5412),O=i(3231);function it(n,e){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.s9C("value",o.name),t.Q6J("value",o.name),t.xp6(1),t.hij(" ",o.name," ")}}function nt(n,e){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.s9C("value",o.name),t.Q6J("value",o.name),t.xp6(1),t.hij(" ",o.name," ")}}function st(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"mat-form-field",15)(1,"mat-label"),t._uU(2,"Tipo de Campo"),t.qZA(),t.TgZ(3,"mat-select",37,20)(5,"mat-option")(6,"ngx-mat-select-search",38),t.NdJ("input",function(c){t.CHM(o);const x=t.oxw();return t.KtG(x.filterTipoCampo(c))}),t._UZ(7,"mat-icon",22),t.TgZ(8,"span",23),t._uU(9,"Op\xe7\xe3o n\xe3o encontrada"),t.qZA()()(),t.YNc(10,nt,2,3,"mat-option",24),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(10),t.Q6J("ngForOf",o.searchTipoCampos)}}class N{constructor(e,o,s,c){this.dialogRef=e,this.fb=o,this._formBuilder=s,this.data=c,this.typesCampo=[{name:"number"},{name:"text"}],this.typesControl=[{name:"textbox"},{name:"select"},{name:"checkbox"},{name:"date"}]}ngOnInit(){this.searchTipoCampos=this.typesCampo,this.searchTipoControl=this.typesControl,this.formAtributo=this.fb.group({id:this.data?.id,key:new a.NI(this.data?.key,[a.kI.required]),label:new a.NI(this.data?.label,[a.kI.required]),type:new a.NI(this.data?.type),order:new a.NI(this.data?.order,[a.kI.pattern("^[0-9]*$")]),value:new a.NI(this.data?.value),required:new a.NI(this.data?.required),options:new a.NI(this.data?.options),controlType:new a.NI(this.data?.controlType,[a.kI.required])})}onNoClick(){this.dialogRef.close()}filterTipoCampo(e){this.searchTipoCampos=this.typesCampo.filter(o=>o.name.toLowerCase().includes(e.target.value.toLowerCase()))}filterTipoControl(e){this.searchTipoControl=this.typesControl.filter(o=>o.name.toLowerCase().includes(e.target.value.toLowerCase()))}}N.\u0275fac=function(e){return new(e||N)(t.Y36(E.so),t.Y36(a.qu),t.Y36(a.QS),t.Y36(E.WI))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-form-atributos"]],decls:66,vars:16,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-4","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","flex-auto","items-center","sm:items-start","p-4","pb-2","sm:pb-4"],[1,"flex","flex-col","w-full"],[1,"flex-auto","w-[100%]"],[1,"flex","gap-2","mt-2"],[1,"flex-auto"],["matInput","","formControlName","key",3,"placeholder"],["matInput","","formControlName","label",3,"placeholder"],[1,"flex","gap-2"],["formControlName","controlType","required",""],["singleSelect",""],["placeholderLabel","Pesquisar a tipo de controle...",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],["class","flex-auto",4,"ngIf"],["matInput","","formControlName","value",3,"placeholder"],["matInput","","formControlName","order",3,"placeholder"],[1,"flex","items-center"],[1,"flex-auto",3,"subscriptSizing"],["matInput","","matAutosizeMinRows","5","matAutosizeMaxRows","20",3,"formControlName","spellcheck"],[1,"flex-auto","mt-4"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","sm:justify-end","px-6","py-4","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",1,"ml-4","border-rad-5",3,"matDialogClose"],["mat-flat-button","","color","primary",1,"ml-4","border-rad-5",3,"disabled","matDialogClose"],[3,"value"],["formControlName","type","required",""],["placeholderLabel","Pesquisar a tipo de campo...",3,"input"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.ynx(2),t.TgZ(3,"div",2)(4,"div",3)(5,"p",4),t._uU(6," Novo Atributo "),t.qZA(),t.TgZ(7,"p",5),t._uU(8," Adicionar atributo no documento "),t.qZA()()(),t.BQk(),t.ynx(9),t.TgZ(10,"div",6)(11,"button",7),t._UZ(12,"mat-icon",8),t.qZA()(),t.BQk(),t._UZ(13,"div",9),t.TgZ(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"mat-form-field",15)(20,"mat-label"),t._uU(21,"Chave"),t.qZA(),t._UZ(22,"input",16),t.qZA(),t.TgZ(23,"mat-form-field",15)(24,"mat-label"),t._uU(25,"R\xf3tulo"),t.qZA(),t._UZ(26,"input",17),t.qZA()(),t.TgZ(27,"div",18)(28,"mat-form-field",15)(29,"mat-label"),t._uU(30,"Tipo de Controle"),t.qZA(),t.TgZ(31,"mat-select",19,20)(33,"mat-option")(34,"ngx-mat-select-search",21),t.NdJ("input",function(c){return o.filterTipoControl(c)}),t._UZ(35,"mat-icon",22),t.TgZ(36,"span",23),t._uU(37,"Op\xe7\xe3o n\xe3o encontrada"),t.qZA()()(),t.YNc(38,it,2,3,"mat-option",24),t.qZA()(),t.YNc(39,st,11,1,"mat-form-field",25),t.qZA(),t.TgZ(40,"div",18)(41,"mat-form-field",15)(42,"mat-label"),t._uU(43,"Valor"),t.qZA(),t._UZ(44,"input",26),t.qZA(),t.TgZ(45,"mat-form-field",15)(46,"mat-label"),t._uU(47,"Ordem"),t.qZA(),t._UZ(48,"input",27),t.qZA()(),t.TgZ(49,"div",28)(50,"mat-form-field",29)(51,"mat-label"),t._uU(52,"Op\xe7\xf5es"),t.qZA(),t._UZ(53,"textarea",30),t.qZA(),t.TgZ(54,"div",31)(55,"mat-checkbox",32),t._uU(56," Obrigatorio "),t.qZA()()()()()()(),t._UZ(57,"div",9),t.ynx(58),t.TgZ(59,"div",33),t.ynx(60),t.TgZ(61,"button",34),t._uU(62," Cancelar "),t.qZA(),t.BQk(),t.ynx(63),t.TgZ(64,"button",35),t._uU(65," Salvar "),t.qZA(),t.BQk(),t.qZA(),t.BQk(),t.qZA()()),2&e&&(t.xp6(11),t.Q6J("matDialogClose",void 0),t.xp6(3),t.Q6J("formGroup",o.formAtributo),t.xp6(8),t.Q6J("placeholder","Informe a chave"),t.xp6(4),t.Q6J("placeholder","Informe o r\xf3tulo"),t.xp6(12),t.Q6J("ngForOf",o.searchTipoControl),t.xp6(1),t.Q6J("ngIf","textbox"==o.formAtributo.get("controlType").value),t.xp6(5),t.Q6J("placeholder","Informe o valor"),t.xp6(4),t.Q6J("placeholder","Informe a ordem"),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(3),t.Q6J("formControlName","options")("spellcheck",!1),t.xp6(2),t.Q6J("formControlName","required")("color","primary"),t.xp6(6),t.Q6J("matDialogClose","cancelled"),t.xp6(3),t.Q6J("disabled",!o.formAtributo.valid)("matDialogClose",o.formAtributo.value))},dependencies:[h.ey,m.lW,m.RK,d.oG,u.KE,u.hX,b.Hw,r.Nt,Q.gD,A.sg,A.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,O.nu,O.C0,E.ZT]});var rt=i(7401);function at(n,e){if(1&n&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.s9C("value",o.id),t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.nome," ")}}function ct(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr",35)(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33),t._uU(10),t.qZA(),t.TgZ(11,"td",36)(12,"mat-icon",37),t.NdJ("click",function(){const c=t.CHM(o),x=c.$implicit,Z=c.index,M=t.oxw(2);return t.KtG(M.openDialog(x,Z))}),t.qZA(),t.TgZ(13,"mat-icon",38),t.NdJ("click",function(){const x=t.CHM(o).index,Z=t.oxw(2);return t.KtG(Z.removeAtributo(x))}),t.qZA()()()}if(2&n){const o=e.$implicit;t.xp6(2),t.Oqu(o.label),t.xp6(2),t.hij(" ",o.required?"Sim":"N\xe3o"," "),t.xp6(2),t.Oqu(o.order),t.xp6(2),t.Oqu(o.controlType),t.xp6(2),t.Oqu(o.type),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:pencil"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x")}}function mt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",20)(1,"mat-accordion",28)(2,"mat-expansion-panel",29)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),t._uU(5," Atributos do documento "),t.qZA(),t.TgZ(6,"button",30),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.openDialog(null))}),t._UZ(7,"mat-icon",4),t.qZA()(),t.TgZ(8,"table",31)(9,"tr",32)(10,"td",33),t._uU(11,"R\xf3tulo"),t.qZA(),t.TgZ(12,"td",33),t._uU(13,"Obrigat\xf3rio"),t.qZA(),t.TgZ(14,"td",33),t._uU(15,"Ordem"),t.qZA(),t.TgZ(16,"td",33),t._uU(17,"Controle"),t.qZA(),t.TgZ(18,"td",33),t._uU(19,"Tipo"),t.qZA(),t._UZ(20,"td"),t.qZA(),t.YNc(21,ct,14,7,"tr",34),t.qZA()()()()}if(2&n){const o=t.oxw();t.xp6(2),t.Q6J("togglePosition","before"),t.xp6(5),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(14),t.Q6J("ngForOf",o.tipoAtributos.value)}}class w{constructor(e,o,s,c,x,Z,M){this._changeDetectorRef=e,this._formBuilder=o,this.dialog=s,this._fuseConfirmationService=c,this._tipoDocumentoService=x,this._drawerService=Z,this._fuseAlertService=M,this.alertMessage=new t.vpe,this.alert={type:"success",message:""},this.isEditing=!1,this.index=null}ngOnInit(){this.setupForm(),this.searchTemplates=this.templates}ngOnChanges(e){console.log(this.tipoDocumento),e.tipoDocumento&&(this.tipoDocumento?1!=this._drawerService.opened()||this.tipoDocumentoForm?.pristine?(this.disabledDelete=!1,this.tipoDocumentoForm.patchValue({...this.tipoDocumento,templateId:this.tipoDocumento.tipo_templates.map(o=>o.template.id)},{emitEvent:!1}),this.tipoAtributos.clear(),this.tipoDocumento?.atributos_dinamicos?.map(o=>this.addAtributos(o)),this._drawerService.open()):this.saveTipoDocumentoConfirmation():1!=this._drawerService.opened()||this.tipoDocumentoForm?.pristine?(this.disabledDelete=!0,this.setupForm()):this.saveTipoDocumentoConfirmation(),this._changeDetectorRef.markForCheck())}setupForm(){this.tipoDocumentoForm=this._formBuilder.group({id:new a.NI,nome:new a.NI("",[a.kI.required]),templateId:new a.NI([]),descricao:new a.NI("",[a.kI.required]),activo:new a.NI(!1),type:new a.NI("DOC"),confidencialidade:new a.NI(!1),atributosDinamico:new a.NI(!1),tipoAtributos:this._formBuilder.array([])})}get tipoAtributos(){return this.tipoDocumentoForm.get("tipoAtributos")}addAtributos(e){const o=this._formBuilder.group({id:e.id,key:e.key,label:e.label,type:e.type,order:e.order,value:e.value,required:e.required,options:e.options,controlType:e.controlType});this.tipoAtributos.push(o),this._changeDetectorRef.markForCheck()}editAtributos(e){this.tipoAtributos.at(this.index).patchValue({id:e.id,key:e.key,label:e.label,type:e.type,order:e.order,value:e.value,required:e.required,options:e.options,controlType:e.controlType}),this.isEditing=!1,this.index=null,this._changeDetectorRef.markForCheck()}removeAtributo(e){this.tipoAtributos.removeAt(e),this.tipoDocumentoForm.markAsDirty()}openDialog(e,o){null!=e&&(this.isEditing=!0,this.index=Number(o)),this.dialog.open(N,{data:e}).updateSize("600px",e?.id?"590px":"590").afterClosed().subscribe(c=>{null!=c&&"cancelled"!=c&&(this.isEditing?this.editAtributos(c):this.addAtributos(c),this.tipoDocumentoForm.markAsDirty())})}createTipoDocumento(e){this._tipoDocumentoService.createTipoDocumento(e).subscribe({error:o=>{this.alert={type:"error",message:`${o.error.message}`},this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Tipo de Documento adicionado com successo!"},this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert),this.tipoDocumentoForm.reset(),this._drawerService.close()}})}updateTipoDocumento(e){this._tipoDocumentoService.updateTipoDocumento(e.id,e).subscribe({error:o=>{this.alert={type:"error",message:`${o.error.message}`},this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Tipo de Documento actualizado com successo!"},this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert),this.tipoDocumentoForm.reset(),this._drawerService.close()}})}save(e){0==e.id||null==e.id?this.createTipoDocumento(e):this.updateTipoDocumento(e)}deleteTipoDocumento(){0!=this.tipoDocumentoForm.get("id").value&&this._fuseConfirmationService.open({title:"Remover Tipo de Documento",message:"Tem certeza que queres remover este tipo de documento? Essa ac\xe7\xe3o n\xe3o pode ser desfeita",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._tipoDocumentoService.deleteTipoDocumento(this.tipoDocumentoForm.get("id").value).subscribe({complete:()=>{this.alert={type:"success",message:"Tipo de documento removido com successo!"},this._drawerService.close(),this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert)},error:s=>{this.alert={type:"error",message:s.error.message},this._fuseAlertService.show("alertBoxDocumentosTipos"),this.alertMessage.emit(this.alert),this._changeDetectorRef.markForCheck()}})})}ngOnDestroy(){this._drawerService.close()}saveTipoDocumentoConfirmation(){var e=null==this.tipoDocumentoForm?.get("id").value||0==this.tipoDocumentoForm?.get("id").value;this._fuseConfirmationService.open({title:"Tipo de Documento",dismissible:!0,icon:{color:"primary"},message:e?"O formul\xe1rio cont\xeam dados n\xe3o salvos, deseja salvar?":"Foram feitas altera\xe7\xf5es no formul\xe1rio de tipo de template, deseja salvar as altera\xe7\xf5es?",actions:{confirm:{label:"Salvar",color:"primary"},cancel:{label:"N\xe3o Salvar"}}}).afterClosed().subscribe(s=>{"confirmed"===s?e?this.createTipoDocumento(this.tipoDocumentoForm.value):this.updateTipoDocumento(this.tipoDocumentoForm.value):(this.tipoDocumentoForm.reset(),this.tipoDocumentoForm.patchValue(this.tipoDocumento,{emitEvent:!1}))})}trackByFn(e,o){return o.id||e}closeDrawer(){this._drawerService.close()}filterTemplates(e){this.searchTemplates=this.templates.filter(o=>o.nome.toLowerCase().includes(e.target.value.toLowerCase()))}compareFunctionObject(e,o){return e==o}}w.\u0275fac=function(e){return new(e||w)(t.Y36(t.sBO),t.Y36(a.QS),t.Y36(E.uw),t.Y36(rt.R),t.Y36(q.D),t.Y36(Y.z),t.Y36(k.jm))},w.\u0275cmp=t.Xpm({type:w,selectors:[["documento-tipo-form"]],viewQuery:function(e,o){if(1&e&&t.Gf(y.pp,5),2&e){let s;t.iGM(s=t.CRH())&&(o.accordion=s.first)}},inputs:{tipoDocumento:"tipoDocumento",templates:"templates"},outputs:{alertMessage:"alertMessage"},features:[t.TTD],decls:53,vars:23,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"flex","items-center","justify-center","pr-4","pl-3.5"],[3,"svgIcon"],[1,"ml-2","font-semibold"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["moreMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-icon-button","",3,"click"],[1,"mt-6","mb-8"],[1,"flex","gap-2","mt-4"],[1,"flex-auto"],["matInput","","maxlength","250","formControlName","nome",3,"placeholder"],["formControlName","templateId","multiple","",3,"compareWith"],["placeholderLabel","Pesquisar o template...",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","mt-4"],[1,"flex-auto",3,"subscriptSizing"],["matInput","","matAutosizeMinRows","5","matAutosizeMaxRows","20",3,"formControlName","spellcheck","placeholder"],[3,"formControlName","color"],["class","flex mt-4",4,"ngIf"],[1,"flex","justify-end","mt-10"],["mat-flat-button","","type","button",1,"px-8",3,"disabled","color","click"],[3,"value"],["multi","",1,"example-headers-align","w-full"],[3,"togglePosition"],["mat-icon-button","",1,"ml-auto","scale-75","rounded",3,"click"],["formArrayName","tipoAtributos",1,"w-full"],[1,"sticky","top-0","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"px-1"],["class","h-10 border-b cursor-p text-sm",4,"ngFor","ngForOf"],[1,"h-10","border-b","cursor-p","text-sm"],[1,"flex","justify-center","items-center","pt-2"],[1,"scale-[.75]","rounded","pt-1","pr-2",3,"svgIcon","click"],[1,"scale-[.75]","rounded","pt-1",3,"svgIcon","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),t._UZ(4,"mat-icon",4),t.TgZ(5,"span",5),t._uU(6,"Tipo de Documento"),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t._UZ(9,"mat-icon",4),t.qZA(),t.TgZ(10,"mat-menu",null,8)(12,"button",9),t.NdJ("click",function(){return o.deleteTipoDocumento()}),t._UZ(13,"mat-icon",4),t.TgZ(14,"span"),t._uU(15,"Excluir Tipo de Documento"),t.qZA()()(),t.TgZ(16,"a",10),t.NdJ("click",function(){return o.closeDrawer()}),t._UZ(17,"mat-icon",4),t.qZA()()(),t._UZ(18,"mat-divider",11),t.TgZ(19,"div")(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),t._uU(23,"Nome"),t.qZA(),t._UZ(24,"input",14),t.qZA(),t.TgZ(25,"mat-form-field",13)(26,"mat-label"),t._uU(27,"Template"),t.qZA(),t.TgZ(28,"mat-select",15)(29,"mat-option")(30,"ngx-mat-select-search",16),t.NdJ("input",function(c){return o.filterTemplates(c)}),t._UZ(31,"mat-icon",17),t.TgZ(32,"span",18),t._uU(33,"Op\xe7\xe3o n\xe3o encontrada"),t.qZA()()(),t.YNc(34,at,2,3,"mat-option",19),t.qZA()()(),t.TgZ(35,"div",20)(36,"mat-form-field",21)(37,"mat-label"),t._uU(38,"Descri\xe7\xe3o"),t.qZA(),t._UZ(39,"textarea",22),t.qZA()(),t.TgZ(40,"div",20)(41,"mat-checkbox",23),t._uU(42," Confidencial "),t.qZA()(),t.TgZ(43,"div",20)(44,"mat-checkbox",23),t._uU(45," Activo "),t.qZA()(),t.TgZ(46,"div",20)(47,"mat-checkbox",23),t._uU(48," Outros atributos "),t.qZA()(),t.YNc(49,mt,22,3,"div",24),t.TgZ(50,"div",25)(51,"button",26),t.NdJ("click",function(){return o.save(o.tipoDocumentoForm.value)}),t._uU(52," Salvar "),t.qZA()()()()()),2&e){const s=t.MAs(11);t.xp6(1),t.Q6J("formGroup",o.tipoDocumentoForm),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:pencil-alt"),t.xp6(4),t.Q6J("matMenuTriggerFor",s),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:dots-vertical"),t.xp6(3),t.Q6J("disabled",o.disabledDelete),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(7),t.Q6J("placeholder","Informe o nome"),t.xp6(4),t.Q6J("compareWith",o.compareFunctionObject),t.xp6(6),t.Q6J("ngForOf",o.searchTemplates),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(3),t.Q6J("formControlName","descricao")("spellcheck",!1)("placeholder","Informe a descri\xe7\xe3o"),t.xp6(2),t.Q6J("formControlName","confidencialidade")("color","primary"),t.xp6(3),t.Q6J("formControlName","activo")("color","primary"),t.xp6(3),t.Q6J("formControlName","atributosDinamico")("color","primary"),t.xp6(2),t.Q6J("ngIf",o.tipoDocumentoForm.get("atributosDinamico").value),t.xp6(2),t.Q6J("disabled",o.tipoDocumentoForm.invalid||o.tipoDocumentoForm.pristine)("color","primary")}},dependencies:[h.ey,m.lW,m.o6,m.RK,d.oG,D.d,u.KE,u.hX,b.Hw,r.Nt,v.VK,v.OP,v.p6,Q.gD,A.sg,A.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,a.CE,O.nu,O.C0,y.pp,y.ib,y.yz,y.yK],encapsulation:2,changeDetection:0});const lt=["matDrawer"];function pt(n,e){1&n&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-bar",28),t.qZA()),2&n&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function ut(n,e){1&n&&(t.TgZ(0,"span",29),t._uU(1,"Novo Tipo de Documento"),t.qZA())}function dt(n,e){if(1&n&&(t.TgZ(0,"fuse-alert",30),t._UZ(1,"div",31),t.qZA()),2&n){const o=t.oxw();t.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxDocumentosTipos")("type",o.alert.type)("@shake","error"===o.alert.type),t.xp6(1),t.Q6J("innerHTML",o.alert.message,t.oJD)}}function ht(n,e){1&n&&(t.TgZ(0,"th",43),t._uU(1,"Descri\xe7\xe3o"),t.qZA())}function ft(n,e){1&n&&(t.TgZ(0,"th",44),t._uU(1,"Outros Atributos"),t.qZA())}function gt(n,e){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.descricao)}}function _t(n,e){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.atributosDinamico?"Sim":"N\xe3o"," ")}}const vt=function(n){return{"bg-gray-50":n}};function Tt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr",45),t.NdJ("click",function(){const x=t.CHM(o).$implicit,Z=t.oxw(3);return t.KtG(Z.updateTipoDocumento(x))}),t.TgZ(1,"td",46),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,gt,2,1,"td",25),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,_t,2,1,"td",25),t.TgZ(9,"td"),t._uU(10),t.qZA()()}if(2&n){const o=e.$implicit,s=t.oxw(3),c=t.MAs(3);t.Q6J("ngClass",t.VKq(7,vt,o.id==(null==s.selectedTipoDocumento?null:s.selectedTipoDocumento.id))),t.xp6(2),t.Oqu(o.id),t.xp6(2),t.Oqu(o.nome),t.xp6(1),t.Q6J("ngIf",!c.opened),t.xp6(2),t.hij(" ",o.activo?"Sim":"N\xe3o"," "),t.xp6(1),t.Q6J("ngIf",!c.opened),t.xp6(2),t.hij(" ",o.confidencialidade?"Sim":"N\xe3o"," ")}}const Dt=function(n){return{"pointer-events-none":n}},xt=function(){return[10,25,100,500]};function Ct(n,e){if(1&n&&(t.ynx(0),t.TgZ(1,"table",33)(2,"tr",34)(3,"td",35),t._uU(4,"Nr. Ord"),t.qZA(),t.TgZ(5,"td",36),t._uU(6,"Nome do Documento"),t.qZA(),t.YNc(7,ht,2,0,"th",37),t.TgZ(8,"th",38),t._uU(9,"Activo"),t.qZA(),t.YNc(10,ft,2,0,"th",39),t.TgZ(11,"th",40),t._uU(12,"Confidencial"),t.qZA()(),t.YNc(13,Tt,11,9,"tr",41),t.qZA(),t._UZ(14,"mat-paginator",42),t.BQk()),2&n){const o=t.oxw().ngIf,s=t.oxw(),c=t.MAs(3);t.xp6(7),t.Q6J("ngIf",!c.opened),t.xp6(3),t.Q6J("ngIf",!c.opened),t.xp6(3),t.Q6J("ngForOf",o),t.xp6(1),t.Q6J("ngClass",t.VKq(9,Dt,s.isLoading))("length",s.pagination.length)("pageIndex",s.pagination.page)("pageSize",s.pagination.size)("pageSizeOptions",t.DdM(11,xt))("showFirstLastButtons",!0)}}function Zt(n,e){if(1&n&&(t.ynx(0),t.YNc(1,Ct,15,12,"ng-container",32),t.BQk()),2&n){const o=e.ngIf;t.oxw();const s=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.length>0)("ngIfElse",s)}}function bt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",47),t._UZ(1,"mat-icon",48),t.TgZ(2,"div",49),t._uU(3," N\xe3o h\xe1 Tipos de Documentos cadastrados! "),t.qZA(),t.TgZ(4,"button",50),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.createTipoDocumento())}),t._UZ(5,"mat-icon",21),t.TgZ(6,"span",29),t._uU(7,"Cadastrar o Primeiro Tipo de Documento"),t.qZA()()()}2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:clipboard-list"),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"))}class J{constructor(e,o,s,c,x,Z,M,It){this._activatedRoute=e,this._changeDetectorRef=o,this._router=s,this._tipoDocumentoService=c,this._templateService=x,this._fuseMediaWatcherService=Z,this._drawerService=M,this._fuseAlertService=It,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new a.p4,this._unsubscribeAll=new G.x,this.showAlert=!1,this.alert={type:"success",message:""}}ngOnInit(){this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,R.R)(this._unsubscribeAll)).subscribe(e=>{this.drawerMode=e.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this._tipoDocumentoService.pagination$.pipe((0,R.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.tipoDocumentos$=this._tipoDocumentoService.tipoDocumentos$,this.templates$=this._templateService.templates$,this._templateService.templates$.subscribe(e=>{this.templates=e})}ngAfterViewInit(){this._drawerService.setDrawer(this.matDrawer),this._sort&&this._paginator&&(this._sort.sort({id:"id",start:"asc",disableClear:!0}),this._sort.sortChange.pipe((0,R.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,H.T)(this._sort.sortChange,this._paginator.page).pipe((0,V.w)(()=>{let e=new B.LE;return e=e.append("page",this._paginator.pageIndex),e=e.append("size",this._paginator.pageSize),e=e.append("sort",this._sort.active),e=e.append("order",this._sort.direction),this._tipoDocumentoService.getTipoDocumentos(e)})).subscribe(),this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createTipoDocumento(){this.selectedTipoDocumento=null,this.matDrawer.open()}updateTipoDocumento(e){this.matDrawer.opened||this.matDrawer.open(),this.selectedTipoDocumento=e}trackByFn(e,o){return o.id||e}showAlertEvent(e){this.alert=e,this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxDocumentosTipos"),this._changeDetectorRef.markForCheck()},15e3)}applyFilter(e){const o=e;if(null===o||null==o)this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams).subscribe();else{let s=new B.LE;s=s.append("nome",o),this._tipoDocumentoService.getTipoDocumentos(s).subscribe(),this.searchInputControl.reset()}}}J.\u0275fac=function(e){return new(e||J)(t.Y36(f.gz),t.Y36(t.sBO),t.Y36(f.F0),t.Y36(q.D),t.Y36(tt.E),t.Y36(et.T),t.Y36(Y.z),t.Y36(k.jm))},J.\u0275cmp=t.Xpm({type:J,selectors:[["documento-tipo-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(lt,5),t.Gf(P.NW,5),t.Gf(L.YE,5)),2&e){let s;t.iGM(s=t.CRH())&&(o.matDrawer=s.first),t.iGM(s=t.CRH())&&(o._paginator=s.first),t.iGM(s=t.CRH())&&(o._sort=s.first)}},decls:38,vars:22,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900",2,"width","520px!important",3,"mode","opened","position","disableClose"],["matDrawer",""],[3,"tipoDocumento","templates","alertMessage"],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",2,"margin-right","-16px",3,"color","click"],[3,"svgIcon"],["mat-flat-button","",1,"ml-4",3,"color","click"],["class","ml-2 mr-1",4,"ngIf"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[4,"ngIf"],["noTipoDocumentos",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"ml-2","mr-1"],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["matSort",""],[1,"sticky","top-0","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["mat-sort-header","id",1,"padding-l-40"],["mat-sort-header","nome"],["mat-sort-header","descricao",4,"ngIf"],["mat-sort-header","activo"],["mat-sort-header","atributosDinamico",4,"ngIf"],["mat-sort-header","confidencialidade"],["class","h-10 text-sm border-b cursor-p",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-sort-header","descricao"],["mat-sort-header","atributosDinamico"],[1,"h-10","text-sm","border-b","cursor-p",3,"ngClass","click"],[1,"padding-l-40"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"],["mat-flat-button","",1,"ml-4","mt-5",3,"color","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return o.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3)(4,"documento-tipo-form",4),t.NdJ("alertMessage",function(c){return o.showAlertEvent(c)}),t.qZA()(),t.TgZ(5,"mat-drawer-content",5)(6,"div",6)(7,"div",7),t.YNc(8,pt,2,1,"div",8),t.TgZ(9,"div",9)(10,"div",10)(11,"div")(12,"a",11),t._uU(13,"Configura\xe7\xf5es"),t.qZA()(),t.TgZ(14,"div",12),t._UZ(15,"mat-icon",13),t.TgZ(16,"span",14),t._uU(17,"Tipos"),t.qZA()(),t.TgZ(18,"div",12),t._UZ(19,"mat-icon",13),t.TgZ(20,"span",14),t._uU(21,"Documentos"),t.qZA()()(),t.TgZ(22,"div",15)(23,"h2",16),t._uU(24," Documentos "),t.qZA()()(),t.TgZ(25,"div",17)(26,"mat-form-field",18),t._UZ(27,"input",19),t.TgZ(28,"button",20),t.NdJ("click",function(){return o.applyFilter(o.searchInputControl.value)}),t._UZ(29,"mat-icon",21),t.qZA()(),t.TgZ(30,"button",22),t.NdJ("click",function(){return o.createTipoDocumento()}),t._UZ(31,"mat-icon",21),t.YNc(32,ut,2,0,"span",23),t.qZA()()(),t.YNc(33,dt,2,7,"fuse-alert",24),t.YNc(34,Zt,2,2,"ng-container",25),t.ALo(35,"async"),t.YNc(36,bt,8,3,"ng-template",null,26,t.W1O),t.qZA()()()()),2&e){const s=t.MAs(3);t.xp6(2),t.Q6J("mode",o.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(2),t.Q6J("tipoDocumento",o.selectedTipoDocumento)("templates",o.templates),t.xp6(4),t.Q6J("ngIf",o.isLoading),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(7),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Pesquisar tipos de documentos"),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:search"),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(1),t.Q6J("ngIf",!s.opened),t.xp6(1),t.Q6J("ngIf",o.showAlert),t.xp6(1),t.Q6J("ngIf",t.lcZ(35,20,o.tipoDocumentos$))}},dependencies:[m.lW,u.KE,b.Hw,r.Nt,C.pW,S.jA,S.kh,S.LW,P.NW,L.YE,L.nU,A.mk,A.sg,A.O5,a.Fj,a.JJ,a.oH,ot.W,w,A.Ov],styles:[".cursor-p:hover{cursor:pointer!important;color:#4f46e5}.padding-l-40{padding-left:40px!important}\n"],encapsulation:2,data:{animation:X.L},changeDetection:0});const At=[{path:"",component:J,resolve:{documentosTipos:W.G,templates:$.L}}];var yt=i(3745);class I{}I.\u0275fac=function(e){return new(e||I)},I.\u0275mod=t.oAB({type:I}),I.\u0275inj=t.cJS({providers:[{provide:h.sG,useValue:l._O}],imports:[f.Bz.forChild(At),p._t,_.Bb,m.ot,d.p9,g.FA,D.t,u.lN,b.Ps,r.c,l.En,v.Tx,C.Cv,F.Fk,h.si,Q.LD,S.SJ,j.AV,P.TU,L.JX,K.V,yt.S1,z.m,O.Co,E.Is,y.To,k.fC]})},1087:(U,T,i)=>{i.d(T,{G:()=>m});var f=i(4650),p=i(6189),_=i(3878);class m{constructor(h,g){this._tipoDocumentoService=h,this._templateService=g}resolve(h,g){return this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams)}}m.\u0275fac=function(h){return new(h||m)(f.LFG(p.D),f.LFG(_.E))},m.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},6189:(U,T,i)=>{i.d(T,{D:()=>u});var f=i(529),p=i(1135),_=i(8505),m=i(5698),d=i(3900),h=i(4004),g=i(2340),D=i(4650);class u{constructor(r){this._httpClient=r,this._pagination=new p.X(null),this._tipoDocumento=new p.X(null),this._tipoDocumentos=new p.X(null)}get pagination$(){return this._pagination.asObservable()}get tipoDocumento$(){return this._tipoDocumento.asObservable()}get tipoDocumentos$(){return this._tipoDocumentos.asObservable()}set tipoDocumento$(r){r.subscribe(l=>{this._tipoDocumento.next(l)})}getTipoDocumentos(r){return this._httpClient.get(g.N.URL_ROOT_API+"/tipos",{params:r}).pipe((0,_.b)(l=>{this._pagination.next(l.pagination),this._tipoDocumentos.next(l.data)}))}getTipoDocumento(r){return this._httpClient.get(g.N.URL_ROOT_API+"/tipos/"+r).pipe((0,_.b)(l=>{this._tipoDocumento.next(l.data)}))}get getTipoDocumentosDefaultParams(){let r=new f.LE;return r=r.append("page",0),r=r.append("size",15),r}createTipoDocumento(r){return this.tipoDocumentos$.pipe((0,m.q)(1),(0,d.w)(l=>this._httpClient.post(g.N.URL_ROOT_API+"/tipos",r).pipe((0,h.U)(v=>v.data))))}updateTipoDocumento(r,l){return this.tipoDocumentos$.pipe((0,m.q)(1),(0,d.w)(v=>this._httpClient.put(g.N.URL_ROOT_API+"/tipos/"+l.id,l).pipe((0,h.U)(C=>C.data))))}deleteTipoDocumento(r){return this.tipoDocumentos$.pipe((0,m.q)(1),(0,d.w)(l=>this._httpClient.delete(g.N.URL_ROOT_API+"/tipos/"+r).pipe((0,h.U)(v=>{const C=l.findIndex(F=>F.id===r);return l.splice(C,1),v}))))}}u.\u0275fac=function(r){return new(r||u)(D.LFG(f.eN))},u.\u0275prov=D.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})},3878:(U,T,i)=>{i.d(T,{E:()=>u});var f=i(529),p=i(1135),_=i(8505),m=i(5698),d=i(3900),h=i(4004),g=i(2340),D=i(4650);class u{constructor(r){this._httpClient=r,this._pagination=new p.X(null),this._template=new p.X(null),this._templates=new p.X(null)}get pagination$(){return this._pagination.asObservable()}get template$(){return this._template.asObservable()}get templates$(){return this._templates.asObservable()}set template$(r){r.subscribe(l=>{this._template.next(l)})}getTemplates(r){return this._httpClient.get(g.N.URL_ROOT_API+"/templates",{params:r}).pipe((0,_.b)(l=>{this._pagination.next(l.pagination),this._templates.next(l.data)}))}getTemplate(r){return this._httpClient.get(g.N.URL_ROOT_API+"/templates/"+r).pipe((0,_.b)(l=>{this._template.next(l.data)}))}get getTemplateDefaultParams(){let r=new f.LE;return r=r.append("page",0),r=r.append("size",15),r}createTemplate(r){return this.templates$.pipe((0,m.q)(1),(0,d.w)(l=>this._httpClient.post(g.N.URL_ROOT_API+"/templates",r).pipe((0,h.U)(v=>v.data))))}updateTemplate(r,l){return this.templates$.pipe((0,m.q)(1),(0,d.w)(v=>this._httpClient.put(g.N.URL_ROOT_API+"/templates/"+l.id,l).pipe((0,h.U)(C=>C.data))))}deleteTemplate(r){return this.templates$.pipe((0,m.q)(1),(0,d.w)(l=>this._httpClient.delete(g.N.URL_ROOT_API+"/templates/"+r).pipe((0,h.U)(v=>{const C=l.findIndex(F=>F.id===r);return l.splice(C,1),v}))))}}u.\u0275fac=function(r){return new(r||u)(D.LFG(f.eN))},u.\u0275prov=D.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})},9424:(U,T,i)=>{i.d(T,{z:()=>p});var f=i(4650);class p{setDrawer(m){this.matDrawer=m}toggle(){this.matDrawer.toggle()}open(){this.matDrawer.open()}close(){this.matDrawer.close()}opened(){return this.matDrawer?.opened}}p.\u0275fac=function(m){return new(m||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}}]);