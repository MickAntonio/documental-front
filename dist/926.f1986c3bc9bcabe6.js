"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[926],{79:(D,u,o)=>{o.d(u,{V:()=>l});var c=o(4650);class r{constructor(){}transform(p,v,C){return Array.isArray(p)?p.map(h=>C.find(f=>f[v]===h)):C.find(h=>h[v]===p)}}r.\u0275fac=function(p){return new(p||r)},r.\u0275pipe=c.Yjl({name:"fuseFindByKey",type:r,pure:!1});class l{}l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({})},7926:(D,u,o)=>{o.r(u),o.d(u,{EntidadesTiposModule:()=>g});var c=o(9299),r=o(1206),l=o(7957),d=o(4859),p=o(6709),v=o(3238),C=o(9602),h=o(4850),f=o(9549),S=o(7392),A=o(284),M=o(9506),y=o(8255),Q=o(3162),N=o(1948),B=o(4385),Z=o(3267),R=o(266),Y=o(79),O=o(4466),z=o(4884),j=o(7579),w=o(2722),K=o(6451),P=o(3900),a=o(4006),J=o(8739),_=o(6308),G=o(8288),k=o(529),e=o(4650),U=o(2141),V=o(4880),L=o(9424),I=o(7775),F=o(6895),W=o(8214),H=o(7401);class E{constructor(t,i,n,m,x,b){this._changeDetectorRef=t,this._formBuilder=i,this._fuseConfirmationService=n,this._tipoEntidadeService=m,this._drawerService=x,this._fuseAlertService=b,this.alertMessage=new e.vpe,this.alert={type:"success",message:""}}ngOnInit(){this.setupForm()}ngOnChanges(t){t.tipoEntidade&&(this.tipoEntidade?1!=this._drawerService.opened()||this.tipoEntidadeForm?.pristine?(this.disabledDelete=!1,this.tipoEntidadeForm.patchValue(this.tipoEntidade,{emitEvent:!1}),this._drawerService.open()):this.saveTipoEntidadeConfirmation():1!=this._drawerService.opened()||this.tipoEntidadeForm?.pristine?(this.disabledDelete=!0,this.setupForm()):this.saveTipoEntidadeConfirmation(),this._changeDetectorRef.markForCheck())}setupForm(){this.tipoEntidadeForm=this._formBuilder.group({id:new a.NI,nome:new a.NI("",[a.kI.required])})}createTipoEntidade(t){this._tipoEntidadeService.createTipoEntidade(t).subscribe({error:i=>{this.alert={type:"error",message:`${i.error.message}`},this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Tipo de Entidade adicionado com successo!"},this._tipoEntidadeService.getTipoEntidades(this._tipoEntidadeService.getTipoEntidadeDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert),this.tipoEntidadeForm.reset(),this._drawerService.close()}})}updateTipoEntidade(t){this._tipoEntidadeService.updateTipoEntidade(t.id,t).subscribe({error:i=>{this.alert={type:"error",message:`${i.error.message}`},this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Tipo de Entidade actualizado com successo!"},this._tipoEntidadeService.getTipoEntidades(this._tipoEntidadeService.getTipoEntidadeDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert),this.tipoEntidadeForm.reset(),this._drawerService.close()}})}save(t){0==t.id||null==t.id?this.createTipoEntidade(t):this.updateTipoEntidade(t)}deleteTipoEntidade(){0!=this.tipoEntidadeForm.get("id").value&&this._fuseConfirmationService.open({title:"Remover TipoEntidade",message:"Tem certeza que queres remover este tipoEntidade? Essa ac\xe7\xe3o n\xe3o pode ser desfeita",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._tipoEntidadeService.deleteTipoEntidade(this.tipoEntidadeForm.get("id").value).subscribe({complete:()=>{this.alert={type:"success",message:"Tipo de Entidade removido com successo!"},this._drawerService.close(),this._tipoEntidadeService.getTipoEntidades(this._tipoEntidadeService.getTipoEntidadeDefaultParams).subscribe(),this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert)},error:n=>{this.alert={type:"error",message:n.error.message},this._fuseAlertService.show("alertBoxEntidadesTipos"),this.alertMessage.emit(this.alert),this._changeDetectorRef.markForCheck()}})})}ngOnDestroy(){this._drawerService.close()}saveTipoEntidadeConfirmation(){var t=null==this.tipoEntidadeForm?.get("id").value||0==this.tipoEntidadeForm?.get("id").value;this._fuseConfirmationService.open({title:"Tipo de Entidade",dismissible:!0,icon:{color:"primary"},message:t?"O formul\xe1rio cont\xeam dados n\xe3o salvos, deseja salvar?":"Foram feitas altera\xe7\xf5es no formul\xe1rio do tipoEntidade, deseja salvar as altera\xe7\xf5es?",actions:{confirm:{label:"Salvar",color:"primary"},cancel:{label:"N\xe3o Salvar"}}}).afterClosed().subscribe(n=>{"confirmed"===n?t?this.createTipoEntidade(this.tipoEntidadeForm.value):this.updateTipoEntidade(this.tipoEntidadeForm.value):(this.tipoEntidadeForm.reset(),this.tipoEntidadeForm.patchValue(this.tipoEntidade,{emitEvent:!1}))})}trackByFn(t,i){return i.id||t}closeDrawer(){this._drawerService.close()}}E.\u0275fac=function(t){return new(t||E)(e.Y36(e.sBO),e.Y36(a.QS),e.Y36(H.R),e.Y36(U.O),e.Y36(L.z),e.Y36(I.jm))},E.\u0275cmp=e.Xpm({type:E,selectors:[["entidade-tipo-form"]],inputs:{tipoEntidade:"tipoEntidade"},outputs:{alertMessage:"alertMessage"},features:[e.TTD],decls:30,vars:14,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"flex","items-center","justify-center","pr-4","pl-3.5"],[3,"svgIcon"],[1,"ml-2","font-semibold"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["moreMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-icon-button","",3,"click"],[1,"mt-6","mb-8"],[1,"flex"],[1,"flex-auto",3,"subscriptSizing","hideRequiredMarker"],[1,"text-red-600"],["matInput","","maxlength","250","required","",3,"formControlName","spellcheck","placeholder"],[1,"flex","justify-end","mt-10"],["mat-flat-button","","type","button",1,"px-8",3,"disabled","color","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),e._UZ(4,"mat-icon",4),e.TgZ(5,"span",5),e._uU(6,"Tipo de Entidade"),e.qZA()(),e.TgZ(7,"div",6)(8,"button",7),e._UZ(9,"mat-icon",4),e.qZA(),e.TgZ(10,"mat-menu",null,8)(12,"button",9),e.NdJ("click",function(){return i.deleteTipoEntidade()}),e._UZ(13,"mat-icon",4),e.TgZ(14,"span"),e._uU(15,"Excluir Tipo de Entidade"),e.qZA()()(),e.TgZ(16,"a",10),e.NdJ("click",function(){return i.closeDrawer()}),e._UZ(17,"mat-icon",4),e.qZA()()(),e._UZ(18,"mat-divider",11),e.TgZ(19,"div")(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),e._uU(23,"Nome "),e.TgZ(24,"span",14),e._uU(25,"*"),e.qZA()(),e._UZ(26,"input",15),e.qZA()(),e.TgZ(27,"div",16)(28,"button",17),e.NdJ("click",function(){return i.save(i.tipoEntidadeForm.value)}),e._uU(29," Salvar "),e.qZA()()()()()),2&t){const n=e.MAs(11);e.xp6(1),e.Q6J("formGroup",i.tipoEntidadeForm),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(4),e.Q6J("matMenuTriggerFor",n),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(3),e.Q6J("disabled",i.disabledDelete),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(4),e.Q6J("subscriptSizing","dynamic")("hideRequiredMarker",!0),e.xp6(5),e.Q6J("formControlName","nome")("spellcheck",!1)("placeholder","Informe o nome"),e.xp6(2),e.Q6J("disabled",i.tipoEntidadeForm.invalid||i.tipoEntidadeForm.pristine)("color","primary")}},dependencies:[d.lW,d.o6,d.RK,h.d,f.KE,f.hX,S.Hw,A.Nt,y.VK,y.OP,y.p6,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u],styles:[".ml-170{margin-left:170px}\n"],encapsulation:2,changeDetection:0});const $=["matDrawer"];function X(s,t){1&s&&(e.TgZ(0,"div",27),e._UZ(1,"mat-progress-bar",28),e.qZA()),2&s&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function q(s,t){1&s&&(e.TgZ(0,"span",29),e._uU(1,"Novo Tipo de Entidade"),e.qZA())}function ee(s,t){if(1&s&&(e.TgZ(0,"fuse-alert",30),e._UZ(1,"div",31),e.qZA()),2&s){const i=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxEntidadesTipos")("type",i.alert.type)("@shake","error"===i.alert.type),e.xp6(1),e.Q6J("innerHTML",i.alert.message,e.oJD)}}const te=function(s){return{"bg-gray-50":s}};function ie(s,t){if(1&s){const i=e.EpF();e.TgZ(0,"tr",39),e.NdJ("click",function(){const x=e.CHM(i).$implicit,b=e.oxw(3);return e.KtG(b.updateTipoEntidade(x))}),e.TgZ(1,"td",40),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()}if(2&s){const i=t.$implicit,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,te,i.id==(null==n.selectedTipoEntidade?null:n.selectedTipoEntidade.id))),e.xp6(2),e.Oqu(i.id),e.xp6(2),e.Oqu(i.nome)}}const oe=function(s){return{"pointer-events-none":s}},ne=function(){return[10,25,100,500]};function se(s,t){if(1&s&&(e.ynx(0),e.TgZ(1,"table",33)(2,"tr",34)(3,"td",35),e._uU(4,"Nr. Ord"),e.qZA(),e.TgZ(5,"td",36),e._uU(6,"Nome"),e.qZA()(),e.YNc(7,ie,5,5,"tr",37),e.qZA(),e._UZ(8,"mat-paginator",38),e.BQk()),2&s){const i=e.oxw().ngIf,n=e.oxw();e.xp6(7),e.Q6J("ngForOf",i),e.xp6(1),e.Q6J("ngClass",e.VKq(7,oe,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",e.DdM(9,ne))("showFirstLastButtons",!0)}}function ae(s,t){if(1&s&&(e.ynx(0),e.YNc(1,se,9,10,"ng-container",32),e.BQk()),2&s){const i=t.ngIf;e.oxw();const n=e.MAs(37);e.xp6(1),e.Q6J("ngIf",i.length>0)("ngIfElse",n)}}function re(s,t){if(1&s){const i=e.EpF();e.TgZ(0,"div",41),e._UZ(1,"mat-icon",42),e.TgZ(2,"div",43),e._uU(3," N\xe3o h\xe1 Tipos de Entidades cadastrados! "),e.qZA(),e.TgZ(4,"button",44),e.NdJ("click",function(){e.CHM(i);const m=e.oxw();return e.KtG(m.createTipoEntidade())}),e._UZ(5,"mat-icon",21),e.TgZ(6,"span",29),e._uU(7,"Cadastrar o Primeiro Tipo de Entidade"),e.qZA()()()}2&s&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:clipboard-list"),e.xp6(3),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"))}class T{constructor(t,i,n,m,x,b,ce){this._activatedRoute=t,this._changeDetectorRef=i,this._router=n,this._tipoEntidadeService=m,this._fuseMediaWatcherService=x,this._drawerService=b,this._fuseAlertService=ce,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new a.p4,this._unsubscribeAll=new j.x,this.showAlert=!1,this.alert={type:"success",message:""}}ngOnInit(){this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,w.R)(this._unsubscribeAll)).subscribe(t=>{this.drawerMode=t.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this._tipoEntidadeService.pagination$.pipe((0,w.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.tipoEntidades$=this._tipoEntidadeService.tipoEntidades$}ngAfterViewInit(){this._drawerService.setDrawer(this.matDrawer),this._sort&&this._paginator&&(this._sort.sort({id:"id",start:"asc",disableClear:!0}),this._sort.sortChange.pipe((0,w.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,K.T)(this._sort.sortChange,this._paginator.page).pipe((0,P.w)(()=>{let t=new k.LE;return t=t.append("page",this._paginator.pageIndex),t=t.append("size",this._paginator.pageSize),t=t.append("sort",this._sort.active),t=t.append("order",this._sort.direction),this._tipoEntidadeService.getTipoEntidades(t)})).subscribe(),this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createTipoEntidade(){this.selectedTipoEntidade=null,this.matDrawer.open()}updateTipoEntidade(t){this.matDrawer.opened||this.matDrawer.open(),this.selectedTipoEntidade=t}trackByFn(t,i){return i.id||t}showAlertEvent(t){this.alert=t,this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntidadesTipos"),this._changeDetectorRef.markForCheck()},15e3)}applyFilter(t){const i=t;if(null===i||null==i)this._tipoEntidadeService.getTipoEntidades(this._tipoEntidadeService.getTipoEntidadeDefaultParams).subscribe();else{let n=new k.LE;n=n.append("nome",i),this._tipoEntidadeService.getTipoEntidades(n).subscribe(),this.searchInputControl.reset()}}}T.\u0275fac=function(t){return new(t||T)(e.Y36(c.gz),e.Y36(e.sBO),e.Y36(c.F0),e.Y36(U.O),e.Y36(V.T),e.Y36(L.z),e.Y36(I.jm))},T.\u0275cmp=e.Xpm({type:T,selectors:[["entidade-tipo-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf($,5),e.Gf(J.NW,5),e.Gf(_.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.matDrawer=n.first),e.iGM(n=e.CRH())&&(i._paginator=n.first),e.iGM(n=e.CRH())&&(i._sort=n.first)}},decls:38,vars:21,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900",2,"width","520px!important",3,"mode","opened","position","disableClose"],["matDrawer",""],[3,"tipoEntidade","alertMessage"],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",2,"margin-right","-16px",3,"color","click"],[3,"svgIcon"],["mat-flat-button","",1,"ml-4",3,"color","click"],["class","ml-2 mr-1",4,"ngIf"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[4,"ngIf"],["noTipoEntidades",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"ml-2","mr-1"],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["matSort",""],[1,"sticky","text-sm","top-0","h-12","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["mat-sort-header","id",1,"padding-l-40"],["mat-sort-header","nome"],["class","h-10 text-sm border-b cursor-p",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"h-10","text-sm","border-b","cursor-p",3,"ngClass","click"],[1,"padding-l-40"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"],["mat-flat-button","",1,"ml-4","mt-5",3,"color","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-drawer-container",1),e.NdJ("backdropClick",function(){return i.onBackdropClicked()}),e.TgZ(2,"mat-drawer",2,3)(4,"entidade-tipo-form",4),e.NdJ("alertMessage",function(m){return i.showAlertEvent(m)}),e.qZA()(),e.TgZ(5,"mat-drawer-content",5)(6,"div",6)(7,"div",7),e.YNc(8,X,2,1,"div",8),e.TgZ(9,"div",9)(10,"div",10)(11,"div")(12,"a",11),e._uU(13,"Configura\xe7\xf5es"),e.qZA()(),e.TgZ(14,"div",12),e._UZ(15,"mat-icon",13),e.TgZ(16,"span",14),e._uU(17,"Tipos"),e.qZA()(),e.TgZ(18,"div",12),e._UZ(19,"mat-icon",13),e.TgZ(20,"span",14),e._uU(21,"Entidades"),e.qZA()()(),e.TgZ(22,"div",15)(23,"h2",16),e._uU(24," Entidades "),e.qZA()()(),e.TgZ(25,"div",17)(26,"mat-form-field",18),e._UZ(27,"input",19),e.TgZ(28,"button",20),e.NdJ("click",function(){return i.applyFilter(i.searchInputControl.value)}),e._UZ(29,"mat-icon",21),e.qZA()(),e.TgZ(30,"button",22),e.NdJ("click",function(){return i.createTipoEntidade()}),e._UZ(31,"mat-icon",21),e.YNc(32,q,2,0,"span",23),e.qZA()()(),e.YNc(33,ee,2,7,"fuse-alert",24),e.YNc(34,ae,2,2,"ng-container",25),e.ALo(35,"async"),e.YNc(36,re,8,3,"ng-template",null,26,e.W1O),e.qZA()()()()),2&t){const n=e.MAs(3);e.xp6(2),e.Q6J("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.xp6(2),e.Q6J("tipoEntidade",i.selectedTipoEntidade),e.xp6(4),e.Q6J("ngIf",i.isLoading),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Pesquisar templates"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("ngIf",!n.opened),e.xp6(1),e.Q6J("ngIf",i.showAlert),e.xp6(1),e.Q6J("ngIf",e.lcZ(35,19,i.tipoEntidades$))}},dependencies:[d.lW,f.KE,S.Hw,A.Nt,Q.pW,Z.jA,Z.kh,Z.LW,J.NW,_.YE,_.nU,F.mk,F.sg,F.O5,a.Fj,a.JJ,a.oH,W.W,E,F.Ov],styles:[".cursor-p:hover{cursor:pointer!important;color:#4f46e5}.padding-l-40{padding-left:40px!important}\n"],encapsulation:2,data:{animation:G.L},changeDetection:0});const de=[{path:"",component:T,resolve:{entidadesTipos:z.$}}];var le=o(3745);class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[{provide:v.sG,useValue:M._O}],imports:[c.Bz.forChild(de),r._t,l.Bb,d.ot,p.p9,C.FA,h.t,f.lN,S.Ps,A.c,M.En,y.Tx,Q.Cv,N.Fk,v.si,B.LD,Z.SJ,R.AV,J.TU,_.JX,Y.V,le.S1,O.m,I.fC]})},9424:(D,u,o)=>{o.d(u,{z:()=>r});var c=o(4650);class r{setDrawer(d){this.matDrawer=d}toggle(){this.matDrawer.toggle()}open(){this.matDrawer.open()}close(){this.matDrawer.close()}opened(){return this.matDrawer?.opened}}r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}}]);