"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[754],{4645:(B,d,r)=>{r.d(d,{z:()=>L});var t=r(4006),e=r(8739),v=r(6308),_=r(7579),b=r(2722),h=r(6451),g=r(3900),x=r(8288),c=r(529),o=r(8335),n=r(4650),i=r(7401),a=r(4693),s=r(5412),u=r(7775),m=r(2500),Z=r(6895),I=r(4859),P=r(9549),j=r(7392),G=r(284),z=r(4385),V=r(3238),Q=r(8214),M=r(9602),C=r(3231);function k(O,p){if(1&O&&(n.TgZ(0,"mat-option",25),n._uU(1),n.qZA()),2&O){const E=p.$implicit;n.s9C("value",E.value),n.Q6J("value",E.key),n.xp6(1),n.hij(" ",E.value," ")}}function R(O,p){if(1&O&&(n.TgZ(0,"mat-option",25),n._uU(1),n.qZA()),2&O){const E=p.$implicit;n.s9C("value",E.id),n.Q6J("value",E.id),n.xp6(1),n.hij(" ",E.username," ")}}function N(O,p){if(1&O&&(n.TgZ(0,"fuse-alert",26),n._UZ(1,"div",27),n.qZA()),2&O){const E=n.oxw();n.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxUsers")("type",null==E.alert?null:E.alert.type)("@shake","error"===(null==E.alert?null:E.alert.type)),n.xp6(1),n.Q6J("innerHTML",E.alert.message,n.oJD)}}function F(O,p){if(1&O){const E=n.EpF();n.TgZ(0,"tr",34)(1,"td",31),n._uU(2),n.qZA(),n.TgZ(3,"td")(4,"label",35),n._uU(5),n.qZA()(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.ALo(14,"date"),n.qZA(),n.TgZ(15,"td")(16,"button",36),n.NdJ("click",function(){const A=n.CHM(E).$implicit,y=n.oxw(3);return n.KtG(y.actionView(A))}),n._UZ(17,"mat-icon",37),n.qZA()()()}if(2&O){const E=p.$implicit,S=p.index,w=n.oxw(3);n.xp6(2),n.Oqu(S+1),n.xp6(2),n.Q6J("ngClass",w.getCustomBadgeClass(E.event)),n.xp6(1),n.hij(" ",w.translateEvent(E.event)," "),n.xp6(2),n.Oqu(E.auditable_type.split("\\")[2]),n.xp6(2),n.Oqu(null==E||null==E.user?null:E.user.name),n.xp6(2),n.Oqu(E.ip_address),n.xp6(2),n.Oqu(n.xi3(14,7,E.created_at,"dd/MM/YYY H:mm:ss"))}}const Y=function(O){return{"pointer-events-none":O}},W=function(){return[5,10,25,100]};function ee(O,p){if(1&O&&(n.ynx(0),n.TgZ(1,"table",29)(2,"tr",30)(3,"td",31),n._uU(4,"Nr. Ord"),n.qZA(),n.TgZ(5,"td"),n._uU(6,"Evento"),n.qZA(),n.TgZ(7,"td"),n._uU(8,"Tabela"),n.qZA(),n.TgZ(9,"td"),n._uU(10,"Utilizador"),n.qZA(),n.TgZ(11,"td"),n._uU(12,"IP"),n.qZA(),n.TgZ(13,"td"),n._uU(14,"Data"),n.qZA(),n.TgZ(15,"td"),n._uU(16,"Ac\xe7\xe3o"),n.qZA()(),n.YNc(17,F,18,10,"tr",32),n.qZA(),n._UZ(18,"mat-paginator",33),n.BQk()),2&O){const E=n.oxw().ngIf,S=n.oxw();n.xp6(17),n.Q6J("ngForOf",E),n.xp6(1),n.Q6J("ngClass",n.VKq(7,Y,S.isLoading))("length",S.pagination.length)("pageIndex",S.pagination.page)("pageSize",S.pagination.size)("pageSizeOptions",n.DdM(9,W))("showFirstLastButtons",!0)}}function X(O,p){if(1&O&&(n.ynx(0),n.YNc(1,ee,19,10,"ng-container",28),n.BQk()),2&O){const E=p.ngIf;n.oxw();const S=n.MAs(41);n.xp6(1),n.Q6J("ngIf",E.length>0)("ngIfElse",S)}}function $(O,p){1&O&&(n.TgZ(0,"div",38),n._UZ(1,"mat-icon",39),n.TgZ(2,"div",40),n._uU(3," N\xe3o h\xe1 registos de auditoria! "),n.qZA()()),2&O&&(n.xp6(1),n.Q6J("svgIcon","heroicons_outline:clipboard-list"))}class L{constructor(p,E,S,w,A,y,q,H){this._changeDetectorRef=p,this._fuseConfirmationService=E,this._formBuilder=S,this._UsersService=w,this.dialog=A,this._fuseAlertService=y,this._auditoriaService=q,this.fb=H,this.flashMessage=null,this.isLoading=!1,this._unsubscribeAll=new _.x,this.showAlert=!1,this.alert={type:"success",message:""},this.formPesquisa=this.fb.group({dtInitial:new t.NI(""),dtEnd:new t.NI(""),evento:new t.NI("selecione"),utilizadorId:new t.NI("Selecione o utilizador")})}ngOnInit(){this._auditoriaService.pagination$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(p=>{this.pagination=p,this._changeDetectorRef.markForCheck()}),this.auditorias$=this._auditoriaService.auditorias$,this.eventos=[{key:"selecione",value:"Selecione o evento"},{key:"created",value:"Cadastrado"},{key:"updated",value:"Actualizado"},{key:"deleted",value:"Excluido"},{key:"restored",value:"Recuperado"},{key:"saw",value:"Visualizado"}],this.searchEventos=this.eventos,this.getUtilizadores()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"id",start:"asc",disableClear:!0}),this._sort.sortChange.pipe((0,b.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,h.T)(this._sort.sortChange,this._paginator.page).pipe((0,g.w)(()=>{let p=new c.LE;const E=this.formPesquisa.controls.dtInitial.value,S=this.formPesquisa.controls.dtEnd.value,w=this.formPesquisa.controls.evento.value,A=this.formPesquisa.controls.utilizadorId.value;return""!=E&&(p=p.append("dtInitial",E.format("YYYY-MM-DD"))),""!=S&&(p=p.append("dtEnd",S.format("YYYY-MM-DD"))),"selecione"!=w&&(p=p.append("event",this.formPesquisa.controls.evento.value)),"Selecione o utilizador"!=A&&(p=p.append("userId",this.formPesquisa.controls.utilizadorId.value)),p=p.append("registoId",this.registoId),p=p.append("page",this._paginator.pageIndex),p=p.append("size",this._paginator.pageSize),p=p.append("sort",this._sort.active),p=p.append("order",this._sort.direction),this._auditoriaService.getAuditorias(p)})).subscribe()),this._changeDetectorRef.markForCheck()}ngOnChanges(p){this.applyFilter()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(p,E){return E.id||p}openDialog(p){null.afterClosed().subscribe(S=>{console.log("The dialog was closed"),console.log(S),null!=S&&(this.alert=S,this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxUsers"),this._changeDetectorRef.markForCheck()},15e3))})}applyFilter(){const p=this.formPesquisa.controls.dtInitial.value,E=this.formPesquisa.controls.dtEnd.value,S=this.formPesquisa.controls.evento.value,w=this.formPesquisa.controls.utilizadorId.value;let A=new c.LE;""!=p&&(A=A.append("dtInitial",p.format("YYYY-MM-DD"))),""!=E&&(A=A.append("dtEnd",E.format("YYYY-MM-DD"))),"selecione"!=S&&(A=A.append("event",this.formPesquisa.controls.evento.value)),"Selecione o utilizador"!=w&&(A=A.append("userId",this.formPesquisa.controls.utilizadorId.value)),A=A.append("registoId",this.registoId),A=A.append("page",0),A=A.append("size",8),A=A.append("sort",this._sort?.active),A=A.append("order",this._sort?.direction),this._auditoriaService.getAuditorias(A).subscribe({error:y=>{this.alert={type:"error",message:`${y.error.message}`},this._fuseAlertService.show("alertBoxUser"),this.showAlert=!0,this._changeDetectorRef.markForCheck()}}),this._changeDetectorRef.markForCheck()}translateEvent(p,E){let S=[];return S.created="Cadastrado",S.updated="Actualizado",S.deleted="Excluido",S.restored="Recuperado",S.saw="Visualizado",S[p]}getCustomBadgeClass(p){var E="text-yellow-800 bg-yellow-100";return"created"==p?E="text-green-800 bg-green-100":"updated"==p?E="text-blue-800 bg-blue-100":"deleted"==p?E="text-red-800 bg-red-100":"restored"==p&&(E="text-yellow-800 bg-yellow-100"),E}actionView(p){this.dialog.open(o.E,{width:"780px",height:"620px",data:p,panelClass:"fuse-confirmation-dialog-panel"}).disableClose=!0}filterEstados(p){this.searchEventos=this.eventos.filter(E=>E.toLowerCase().includes(p.target.value.toLowerCase()))}getUtilizadores(){let p=new c.LE;p=p.append("page",0),p=p.append("size",1e3),p=p.append("sort",""),p=p.append("order",""),this._UsersService.getUsers(p).subscribe(E=>{this.utilizadores=E.data,this.searchUtilizadores=E.data})}filterUtilizadores(p){this.searchUtilizadores=this.utilizadores.filter(E=>E.nome.toLowerCase().includes(p.target.value.toLowerCase()))}}L.\u0275fac=function(p){return new(p||L)(n.Y36(n.sBO),n.Y36(i.R),n.Y36(t.QS),n.Y36(a.f),n.Y36(s.uw),n.Y36(u.jm),n.Y36(m.I),n.Y36(t.qu))},L.\u0275cmp=n.Xpm({type:L,selectors:[["document-auditoria"]],viewQuery:function(p,E){if(1&p&&(n.Gf(e.NW,5),n.Gf(v.YE,5)),2&p){let S;n.iGM(S=n.CRH())&&(E._paginator=S.first),n.iGM(S=n.CRH())&&(E._sort=S.first)}},inputs:{registoId:"registoId"},features:[n.TTD],decls:42,vars:15,consts:[[1,"flex","w-full","px-4",3,"formGroup"],[1,"flex-auto","fuse-mat-dense","fuse-mat-rounded","mt-5","mr-4"],["formControlName","dtInitial","matInput","",3,"placeholder","matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["formControlName","dtEnd","matInput","",3,"placeholder","matDatepicker"],["picker2",""],["formControlName","evento"],["singleSelect",""],["placeholderLabel","Pesquisar o evento...",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex-auto","fuse-mat-dense","fuse-mat-rounded","mt-5"],["formControlName","utilizadorId"],["placeholderLabel","Pesquisar o utilizador...",3,"input"],["value","Selecione o utilizador"],["mat-flat-button","",1,"ml-4","mt-5",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["noAuditorias",""],[3,"value"],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["matSort",""],[1,"sticky","top-0","h-8","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"padding-l-40"],["class","h-8 text-sm border-b cursor-p",4,"ngFor","ngForOf"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"h-8","text-sm","border-b","cursor-p"],[1,"py-0.5","px-2","rounded-full","text-center","font-medium","font-size-08",3,"ngClass"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["svgIcon","heroicons_outline:document-duplicate",1,"icon-size-4"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(p,E){if(1&p&&(n.TgZ(0,"form",0)(1,"mat-form-field",1),n._UZ(2,"input",2)(3,"mat-datepicker-toggle",3)(4,"mat-datepicker",null,4),n.qZA(),n.TgZ(6,"mat-form-field",1),n._UZ(7,"input",5)(8,"mat-datepicker-toggle",3)(9,"mat-datepicker",null,6),n.qZA(),n.TgZ(11,"mat-form-field",1)(12,"mat-select",7,8)(14,"mat-option")(15,"ngx-mat-select-search",9),n.NdJ("input",function(w){return E.filterEstados(w)}),n._UZ(16,"mat-icon",10),n.TgZ(17,"span",11),n._uU(18,"Op\xe7\xe3o n\xe3o encontrada"),n.qZA()()(),n.YNc(19,k,2,3,"mat-option",12),n.qZA()(),n.TgZ(20,"mat-form-field",13)(21,"mat-select",14,8)(23,"mat-option")(24,"ngx-mat-select-search",15),n.NdJ("input",function(w){return E.filterUtilizadores(w)}),n._UZ(25,"mat-icon",10),n.TgZ(26,"span",11),n._uU(27,"Op\xe7\xe3o n\xe3o encontrada"),n.qZA()()(),n.TgZ(28,"mat-option",16),n._uU(29," Selecione o utilizador "),n.qZA(),n.YNc(30,R,2,3,"mat-option",12),n.qZA()(),n.TgZ(31,"button",17),n.NdJ("click",function(){return E.applyFilter()}),n._UZ(32,"mat-icon",18),n.TgZ(33,"span",19),n._uU(34,"Filtrar"),n.qZA()()(),n.YNc(35,N,2,7,"fuse-alert",20),n.TgZ(36,"div",21)(37,"div",22),n.YNc(38,X,2,2,"ng-container",23),n.ALo(39,"async"),n.YNc(40,$,4,1,"ng-template",null,24,n.W1O),n.qZA()()),2&p){const S=n.MAs(5),w=n.MAs(10);n.Q6J("formGroup",E.formPesquisa),n.xp6(2),n.Q6J("placeholder","Data de inicio")("matDatepicker",S),n.xp6(1),n.Q6J("for",S),n.xp6(4),n.Q6J("placeholder","Data de final")("matDatepicker",w),n.xp6(1),n.Q6J("for",w),n.xp6(11),n.Q6J("ngForOf",E.searchEventos),n.xp6(11),n.Q6J("ngForOf",E.searchUtilizadores),n.xp6(1),n.Q6J("color","primary"),n.xp6(1),n.Q6J("svgIcon","heroicons_outline:search"),n.xp6(3),n.Q6J("ngIf",E.showAlert),n.xp6(3),n.Q6J("ngIf",n.lcZ(39,13,E.auditorias$))}},dependencies:[Z.mk,Z.sg,Z.O5,I.lW,P.KE,P.R9,j.Hw,G.Nt,e.NW,v.YE,z.gD,V.ey,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,Q.W,M.Mq,M.hl,M.nW,C.nu,C.C0,Z.Ov,Z.uU],styles:[".cursor-p:hover{cursor:pointer!important;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.padding-l-40{padding-left:40px!important}.font-size-08{font-size:.8em}\n"],encapsulation:2,data:{animation:x.L},changeDetection:0})},1598:(B,d,r)=>{r.d(d,{_:()=>S});var t=r(4650),e=r(1551),v=r(3848),_=r(529),b=r(9969),h=r(5412),g=r(4006),x=r(7775),c=r(2534),o=r(6895),n=r(4859),i=r(7392);function a(w,A){1&w&&(t.ynx(0),t._UZ(1,"div",23),t.BQk())}function s(w,A){if(1&w&&(t.ynx(0),t.TgZ(1,"li",14),t.YNc(2,a,2,0,"ng-container",15),t.TgZ(3,"div",16),t.ynx(4),t.TgZ(5,"div",17),t._UZ(6,"mat-icon",18),t.qZA(),t.BQk(),t.TgZ(7,"div",19),t.ynx(8),t.TgZ(9,"div",20)(10,"div"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.qZA(),t.TgZ(15,"div",21),t._uU(16),t.qZA(),t.TgZ(17,"div")(18,"label",22),t._uU(19),t.qZA()(),t.TgZ(20,"div"),t._uU(21),t.ALo(22,"date"),t.qZA()(),t.BQk(),t.qZA()()(),t.BQk()),2&w){const y=A.$implicit,q=A.last,H=t.oxw();t.xp6(2),t.Q6J("ngIf",!q),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:calendar"),t.xp6(5),t.Oqu(t.xi3(12,8,y.created_at,"dd/MM/yyyy hh:mm")),t.xp6(3),t.Oqu(y.utilizador.name),t.xp6(2),t.Oqu(y.mensagem),t.xp6(2),t.Q6J("ngClass",H.getCustomBadgeClass(y.accao)),t.xp6(1),t.Oqu(y.accao),t.xp6(2),t.Oqu(t.xi3(22,11,y.updated_at,"dd/MM/yyyy hh:mm"))}}class u{constructor(A,y,q,H,oe,ie,se,ce){this.dialogRef=A,this.fb=y,this.data=q,this._formBuilder=H,this._changeDetectorRef=oe,this._fuseAlertService=ie,this._anexosService=se,this._totalPendentesService=ce,this.alertMessage=new t.vpe,this.anexoPushEmitter=new t.vpe,this.alert={type:"success",message:""}}ngOnInit(){}onNoClick(){this.dialogRef.close()}save(){}getCustomBadgeClass(A){var y="text-blue-800 bg-blue-100";return"APROVAR"==A||"ASSINADO"==A?y="text-green-800 bg-green-100":"VERIFICAR"==A||"APROVADO"==A?y="text-blue-800 bg-blue-100":("ASSINAR"==A||"VERIFICADO"==A)&&(y="text-yellow-800 bg-yellow-100"),y}trackByFn(A,y){return y.id||A}}u.\u0275fac=function(A){return new(A||u)(t.Y36(h.so),t.Y36(g.qu),t.Y36(h.WI),t.Y36(g.QS),t.Y36(t.sBO),t.Y36(x.jm),t.Y36(c.d),t.Y36(e.V))},u.\u0275cmp=t.Xpm({type:u,selectors:[["historico-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:29,vars:3,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"top-0","w-full","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"pl-20"],[1,"pl-11"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"relative","flex","py-7","hover:bg-hover","p-2","sm:p-5"],[4,"ngIf"],[1,"relative","flex","flex-auto"],[1,"flex","shrink-0","items-center","justify-center","w-10","h-10","mr-4","mt-5","rounded-full","bg-gray-400"],[1,"icon-size-1","text-white",3,"svgIcon"],[1,"flex","flex-col","flex-auto","items-start"],[1,"w-full","flex","flex-row","justify-between","items-center","cursor-pointer"],[1,"w-60","pl-15"],[1,"py-0.5","px-2","rounded-full","text-center","font-medium","font-size-08",3,"ngClass"],[1,"absolute","top-12","left-7","sm:left-10","w-0.5","h-full","-ml-px","bg-gray-300","dark:bg-gray-600"]],template:function(A,y){1&A&&(t.TgZ(0,"div",0)(1,"div",1),t.ynx(2),t.TgZ(3,"div",2)(4,"div",3)(5,"p",4),t._uU(6,"Circula\xe7oes"),t.qZA(),t.TgZ(7,"p",5),t._uU(8," Hist\xf3rico de Circula\xe7oes "),t.qZA()()(),t.BQk(),t.ynx(9),t.TgZ(10,"div",6)(11,"button",7),t._UZ(12,"mat-icon",8),t.qZA()(),t.BQk(),t._UZ(13,"div",9),t.TgZ(14,"table")(15,"thead",10)(16,"td",11),t._uU(17,"Data"),t.qZA(),t.TgZ(18,"td",12),t._uU(19,"Utilizador"),t.qZA(),t.TgZ(20,"td"),t._uU(21,"Mensagem/Despacho"),t.qZA(),t.TgZ(22,"td"),t._uU(23,"Resposta"),t.qZA(),t.TgZ(24,"td"),t._uU(25,"Data de Resposta"),t.qZA()()(),t.TgZ(26,"div")(27,"ol"),t.YNc(28,s,23,14,"ng-container",13),t.qZA()()()()),2&A&&(t.xp6(11),t.Q6J("matDialogClose",void 0),t.xp6(17),t.Q6J("ngForOf",y.data.destinatarios)("ngForTrackBy",y.trackByFn))},dependencies:[o.mk,o.sg,o.O5,n.RK,i.Hw,h.ZT,o.uU],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]});var m=r(5182);function Z(w,A){if(1&w){const y=t.EpF();t.TgZ(0,"tr",5),t.NdJ("click",function(){const oe=t.CHM(y).$implicit,ie=t.oxw();return t.KtG(ie.openDialog(oe))}),t.TgZ(1,"td",2),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"label",6),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",7),t._uU(11),t.qZA(),t.TgZ(12,"td")(13,"label",6),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"date"),t.qZA()()}if(2&w){const y=A.$implicit,q=t.oxw();t.xp6(2),t.Oqu(y.assunto),t.xp6(2),t.Q6J("ngClass",q.getCustomBadgeClass(y.accaoSolicitada)),t.xp6(1),t.Oqu(y.accaoSolicitada),t.xp6(2),t.Oqu(y.utilizador.name),t.xp6(2),t.Oqu(q.showDestinatariosString(y.destinatarios)),t.xp6(2),t.Oqu(y.mensagem),t.xp6(2),t.Q6J("ngClass",q.getCustomBadgeClass(y.accaoExecutada)),t.xp6(1),t.Oqu(y.accaoExecutada),t.xp6(2),t.Oqu(t.xi3(17,10,y.created_at,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(20,13,y.dataLimite,"dd/MM/yyyy"))}}function I(w,A){1&w&&(t.TgZ(0,"div",8),t._UZ(1,"mat-icon",9),t.TgZ(2,"div",10),t._uU(3," N\xe3o h\xe1 Documentos cadastrados! "),t.qZA()()),2&w&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:clipboard-list"))}class P{constructor(A,y,q){this.dialog=A,this._changeDetectorRef=y,this._encaminharAccaoService=q}ngOnInit(){let A=new _.LE;A=A.append("registoId",this.registoId),A=A.append("sort","id"),A=A.append("order","desc"),this._encaminharAccaoService.getEncaminhamentos(A).subscribe(y=>{this.encaminhamentos=y,this._changeDetectorRef.markForCheck()})}showRemententeGroupName(A){return this.groupsList.filter(y=>y.id==A).map(y=>y.name).toString()}showDestinatariosString(A){var y=A.filter(q=>q.tipo==b.H.ENTIDADE).map(q=>q.entidade.nome).toString();return y+=A.filter(q=>q.tipo==b.H.UTILIZADOR).map(q=>(""!=y?", ":"")+q.utilizador.name).toString(),y+=A.filter(q=>q.tipo==b.H.GRUPO).map(q=>(""!=y?", ":"")+this.showRemententeGroupName(q.grupoId)).toString()}getCustomBadgeClass(A){var y="text-blue-800 bg-blue-100";return"APROVAR"==A||"VERIFICADO"==A?y="text-green-800 bg-green-100":"VERIFICAR"==A||"APROVADO"==A?y="text-blue-800 bg-blue-100":("ASSINAR"==A||"ASSINADO"==A)&&(y="text-yellow-800 bg-yellow-100"),y}openDialog(A){this.dialog.open(u,{data:A}).updateSize("800px","500px").afterClosed().subscribe(q=>{})}ngOnChanges(A){this.ngOnInit()}}P.\u0275fac=function(A){return new(A||P)(t.Y36(h.uw),t.Y36(t.sBO),t.Y36(m.H))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-circulacao-historico"]],inputs:{registoId:"registoId",groupsList:"groupsList"},features:[t.TTD],decls:25,vars:1,consts:[[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto","mt-4","px-6"],[1,"top-0","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"pl-2"],["class","h-10 border-b cursor-p text-sm mat-row",3,"click",4,"ngFor","ngForOf"],["noDocumentos",""],[1,"h-10","border-b","cursor-p","text-sm","mat-row",3,"click"],[1,"py-0.5","px-2","rounded-full","text-center","font-medium","font-size-08",3,"ngClass"],[1,"w-90"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(A,y){1&A&&(t.TgZ(0,"div",0),t.ynx(1)(2),t.TgZ(3,"table")(4,"thead",1)(5,"td",2),t._uU(6,"Assunto"),t.qZA(),t.TgZ(7,"td"),t._uU(8,"Solicita\xe7\xe3o"),t.qZA(),t.TgZ(9,"td"),t._uU(10,"De"),t.qZA(),t.TgZ(11,"td"),t._uU(12,"Para"),t.qZA(),t.TgZ(13,"td"),t._uU(14,"Mensagem/Despacho"),t.qZA(),t.TgZ(15,"td"),t._uU(16,"Resposta"),t.qZA(),t.TgZ(17,"td"),t._uU(18,"Data"),t.qZA(),t.TgZ(19,"td"),t._uU(20,"Data Limite"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,Z,21,16,"tr",3),t.qZA()(),t.BQk()(),t.YNc(23,I,4,1,"ng-template",null,4,t.W1O),t.qZA()),2&A&&(t.xp6(22),t.Q6J("ngForOf",y.encaminhamentos))},dependencies:[o.mk,o.sg,i.Hw,o.uU],styles:[".mat-row[_ngcontent-%COMP%]:nth-child(even){background-color:rgb(248 250 252/var(--tw-bg-opacity))}.mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}"]});var j=r(5861),G=r(8288),z=r(7756),V=r(7490),Q=r(4850),M=r(9549),C=r(284),k=r(9349),R=r(8214),N=r(811);function F(w,A){if(1&w&&(t.TgZ(0,"fuse-alert",5),t._UZ(1,"div",6),t.qZA()),2&w){const y=t.oxw();t.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxRespoata")("type",null==y.alert?null:y.alert.type)("@shake","error"===(null==y.alert?null:y.alert.type)),t.xp6(1),t.Q6J("innerHTML",y.alert.message,t.oJD)}}function Y(w,A){1&w&&t.GkF(0)}function W(w,A){if(1&w){const y=t.EpF();t.TgZ(0,"div",26)(1,"div",27)(2,"label",28),t._uU(3),t.qZA(),t._uU(4," Circula\xe7\xf5es pendentes "),t.qZA(),t.TgZ(5,"div",29)(6,"button",30),t.NdJ("click",function(){t.CHM(y);const H=t.oxw(2);return t.KtG(H.prevCirculacao())}),t._UZ(7,"mat-icon",31),t.qZA(),t.TgZ(8,"button",30),t.NdJ("click",function(){t.CHM(y);const H=t.oxw(2);return t.KtG(H.nextCirculacao())}),t._UZ(9,"mat-icon",31),t.qZA()()()}if(2&w){const y=t.oxw(2);t.xp6(3),t.AsE("",y.circulacaoActive+1," de ",y.encaminhamentos.length,""),t.xp6(3),t.Q6J("disabled",!y.enablePrevBtn),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:chevron-left"),t.xp6(1),t.Q6J("disabled",!y.enableNextBtn),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:chevron-right")}}function ee(w,A){1&w&&t._UZ(0,"div",32)}function X(w,A){1&w&&(t.TgZ(0,"div",13)(1,"mat-button-toggle-group",33)(2,"mat-button-toggle",34),t._uU(3,"Rejeitar"),t.qZA(),t.TgZ(4,"mat-button-toggle",35),t._uU(5,"Aprovar"),t.qZA()()())}function $(w,A){1&w&&(t.TgZ(0,"div",13)(1,"mat-button-toggle-group",33)(2,"mat-button-toggle",36),t._uU(3,"N\xe3o Assinado"),t.qZA(),t.TgZ(4,"mat-button-toggle",37),t._uU(5,"Assinado"),t.qZA()()())}function L(w,A){1&w&&(t.TgZ(0,"div",13)(1,"mat-button-toggle-group",33)(2,"mat-button-toggle",38),t._uU(3,"N\xe3o Verificado"),t.qZA(),t.TgZ(4,"mat-button-toggle",39),t._uU(5,"Verificado"),t.qZA()()())}function O(w,A){if(1&w){const y=t.EpF();t.YNc(0,W,10,6,"div",7),t.YNc(1,ee,1,0,"div",8),t.TgZ(2,"div",9)(3,"div",10)(4,"h1",11),t._uU(5,"Encaminhamento para "),t.TgZ(6,"span",12)(7,"i"),t._uU(8),t.qZA()()(),t.TgZ(9,"div",13)(10,"span"),t._uU(11,"De:"),t.qZA(),t.TgZ(12,"div",14),t._uU(13),t.qZA()(),t.TgZ(14,"div",13)(15,"span"),t._uU(16,"Para:"),t.qZA(),t.TgZ(17,"div",14),t._uU(18),t.qZA()(),t.TgZ(19,"div",13)(20,"span"),t._uU(21,"Mensagem:"),t.qZA(),t.TgZ(22,"div",15),t._uU(23),t.qZA()(),t.TgZ(24,"div",13)(25,"span"),t._uU(26,"Data Limite para resposta:"),t.qZA(),t.TgZ(27,"div",14),t._uU(28),t.qZA()()(),t._UZ(29,"mat-divider",16),t.TgZ(30,"div",17)(31,"form",18)(32,"h1",11),t._uU(33,"Resposta"),t.qZA(),t.YNc(34,X,6,0,"div",19),t.YNc(35,$,6,0,"div",19),t.YNc(36,L,6,0,"div",19),t.TgZ(37,"div",20)(38,"mat-form-field",21)(39,"mat-label"),t._uU(40,"Mensagem"),t.qZA(),t._UZ(41,"textarea",22),t.qZA()(),t.TgZ(42,"div",23)(43,"button",24),t.NdJ("click",function(){t.CHM(y);const H=t.oxw();return t.KtG(H.executarAccao())}),t.TgZ(44,"span",25),t._uU(45),t.qZA(),t.TgZ(46,"mat-icon"),t._uU(47,"send"),t.qZA()()()()()()}if(2&w){const y=t.oxw();t.Q6J("ngIf",y.encaminhamentos.length>1),t.xp6(1),t.Q6J("ngIf",1==y.encaminhamentos.length),t.xp6(7),t.Oqu(y.encaminhamento.accaoSolicitada),t.xp6(5),t.Oqu(y.encaminhamento.utilizador.name),t.xp6(5),t.Oqu(y.showDestinatariosString(y.encaminhamento.destinatarios)),t.xp6(5),t.Oqu(y.encaminhamento.mensagem),t.xp6(5),t.Oqu(y.encaminhamento.dataLimite),t.xp6(1),t.Q6J("vertical",!0),t.xp6(2),t.Q6J("formGroup",y.encaminharRespostaForm),t.xp6(3),t.Q6J("ngIf","APROVAR"==y.encaminhamento.accaoSolicitada),t.xp6(1),t.Q6J("ngIf","ASSINAR"==y.encaminhamento.accaoSolicitada),t.xp6(1),t.Q6J("ngIf","VERIFICAR"==y.encaminhamento.accaoSolicitada),t.xp6(7),t.Q6J("color","primary"),t.xp6(2),t.Oqu(y.txtBtnEncaminhar)}}function p(w,A){1&w&&(t.TgZ(0,"div",40)(1,"h1",11),t._uU(2,"Sem Circula\xe7\xf5es no momento para este documento!"),t.qZA()())}class E{constructor(A,y,q,H,oe,ie,se){this._changeDetectorRef=A,this.fb=y,this._keycloakService=q,this._encaminharAccaoService=H,this._fuseAlertService=oe,this._entradasService=ie,this._totalPendentesService=se,this.alertMessage=new t.vpe,this.anexoPushEmitter=new t.vpe,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.encaminhamentos=this.registo?.encaminhamentos.filter(A=>A.destinatarios.length>0),null!=this.encaminhamentos&&(this.circulacaoActive=0,this.encaminhamento=this.encaminhamentos[this.circulacaoActive],this.enableNextBtn=!0,this.updateEncaminhamnetoData()),this.setupForm()}setupForm(){this.encaminharRespostaForm=this.fb.group({id:new g.NI(this.encaminhamento?.id),accao:new g.NI,mensagem:new g.NI(this.txtResposta)})}getUser(){var A=this;return(0,j.Z)(function*(){A.user=yield A._keycloakService.loadUserProfile()})()}ngOnChanges(A){this.loadEncaminhamentos(this.registo)}loadEncaminhamentos(A){this.registoNew=A,this.encaminhamentos=[],null!=this.registoNew?.encaminhamentos&&(this.encaminhamentos=this.registoNew?.encaminhamentos.filter(y=>y.destinatarios.length>0)),null!=this.encaminhamentos&&(this.circulacaoActive=0,this.encaminhamento=this.encaminhamentos[this.circulacaoActive],this.enableNextBtn=!0,this.updateEncaminhamnetoData()),this.setupForm(),this._changeDetectorRef.markForCheck()}refreshRegisto(){this._entradasService.getEntradaDetails(this.registo.id).subscribe(A=>{this.loadEncaminhamentos(A.data)})}updateEncaminhamnetoData(){if(null!=this.encaminhamento)switch(this.encaminhamento.accaoSolicitada){case"APROVAR":this.txtBtnEncaminhar="Encaminhar Resposta",this.txtResposta="Sauda\xe7\xf5es prezado "+this.encaminhamento.utilizador.name+", Confirmo por meio desta a aprova\xe7\xe3o do documento. \n\n Melhores comprimentos.";break;case"VERIFICAR":this.txtBtnEncaminhar="Confirmar Verifica\xe7\xe3o",this.txtResposta="Sauda\xe7\xf5es prezado "+this.encaminhamento.utilizador.name+", Confirmo por meio desta a verifica\xe7\xe3o do documento. \n\n Melhores comprimentos.";break;case"ASSINAR":this.txtBtnEncaminhar="Encaminhar Resposta",this.txtResposta="Sauda\xe7\xf5es prezado "+this.encaminhamento.utilizador.name+", venho por meio desta confirmar a assinatura do documento. \n\n Melhores comprimentos.";break;default:this.txtBtnEncaminhar="Encaminhar Resposta",this.txtResposta="Sauda\xe7\xf5es prezado "+this.encaminhamento.utilizador.name+",  \n\n Melhores comprimentos."}this._changeDetectorRef.markForCheck()}showRemententeGroupName(A){return this.groupsList.filter(y=>y.id==A).map(y=>y.name).toString()}showDestinatariosString(A){var y=A.filter(q=>q.tipo==b.H.ENTIDADE).map(q=>q.entidade.nome).toString();return y+=A.filter(q=>q.tipo==b.H.UTILIZADOR).map(q=>(""!=y?", ":"")+q.utilizador.name).toString(),y+=A.filter(q=>q.tipo==b.H.GRUPO).map(q=>(""!=y?", ":"")+this.showRemententeGroupName(q.grupoId)).toString()}nextCirculacao(){this.circulacaoActive<this.encaminhamentos.length-1&&(this.circulacaoActive++,this.encaminhamento=this.encaminhamentos[this.circulacaoActive],this.enablePrevBtn=!0,this.circulacaoActive==this.encaminhamentos.length-1&&(this.enableNextBtn=!1)),this.encaminharRespostaForm.patchValue({id:this.encaminhamento.id}),this.updateEncaminhamnetoData()}prevCirculacao(){this.circulacaoActive<=this.encaminhamentos.length-1&&(this.circulacaoActive--,this.encaminhamento=this.encaminhamentos[this.circulacaoActive],0==this.circulacaoActive&&(this.enablePrevBtn=!1,this._changeDetectorRef.markForCheck()),this.enableNextBtn=!0,this._changeDetectorRef.markForCheck()),this.encaminharRespostaForm.patchValue({id:this.encaminhamento.id}),this.updateEncaminhamnetoData()}executarAccao(){console.log(this.encaminharRespostaForm.getRawValue()),this._encaminharAccaoService.executarAccao(this.encaminharRespostaForm.getRawValue()).subscribe({error:A=>{this.alert={type:"error",message:`${A.error}`},this._fuseAlertService.show("alertBoxRespoata"),this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxRespoata"),this._changeDetectorRef.markForCheck()},15e3)},complete:()=>{this.alert={type:"success",message:"Resposta enviada com successo!"},setTimeout(()=>{this._fuseAlertService.show("alertBoxRespoata"),this.showAlert=!0},1e3),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxRespoata"),this._changeDetectorRef.markForCheck()},5e3),this._encaminharAccaoService.getTotalPendentes().subscribe(A=>{this._totalPendentesService.value=A.pendentes}),this.refreshRegisto(),this._changeDetectorRef.markForCheck()}})}}E.\u0275fac=function(A){return new(A||E)(t.Y36(t.sBO),t.Y36(g.qu),t.Y36(z.MZ),t.Y36(m.H),t.Y36(x.jm),t.Y36(V._),t.Y36(e.V))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-circulacao-circulacao"]],inputs:{registo:"registo",groupsList:"groupsList"},outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},features:[t.TTD],decls:7,vars:4,consts:[[1,"pl-2","mt-2","pr-2"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["circulacao",""],["semCirculacao",""],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],["class","flex justify-end",4,"ngIf"],["class","mt-10",4,"ngIf"],[1,"flex","sm:mb-18","overflow-hidden","sm:overflow-y-auto","mt-4","px-6"],[1,"flex-col","w-[50%]"],[1,"font-bold"],[1,"font-bold","text-primary-800"],[1,"mt-4"],[1,"bg-gray-50","mt-2","px-4","py-2"],[1,"bg-gray-50","mt-2","p-4"],[1,"ml-5",3,"vertical"],[1,"flex-auto","ml-5","w-[50%]"],[3,"formGroup"],["class","mt-4",4,"ngIf"],[1,"flex","mt-4"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","true","formControlName","mensagem","rows","4","required",""],[1,"flex","justify-start","mt-2"],["mat-flat-button","","type","button",1,"px-8",3,"color","click"],[1,"ml-2","mr-1"],[1,"flex","justify-end"],[1,"mt-6"],[1,"py-0.5","px-2","rounded-full","text-center","font-medium","font-size-08","text-green-800","bg-green-100"],[1,"mt-4","mr-5"],["mat-icon-button","",3,"disabled","click"],[3,"svgIcon"],[1,"mt-10"],["appearance","legacy","formControlName","accao","required","","aria-label","Font Style"],["value","REJEITADO"],["value","APROVADO"],["value","NAO_ASSINADO"],["value","ASSINADO"],["value","NAO_VERIFICADO"],["value","VERIFICADO"],[1,"p-4","text-center"]],template:function(A,y){if(1&A&&(t.TgZ(0,"div",0),t.YNc(1,F,2,7,"fuse-alert",1),t.qZA(),t.YNc(2,Y,1,0,"ng-container",2),t.YNc(3,O,48,14,"ng-template",null,3,t.W1O),t.YNc(5,p,3,0,"ng-template",null,4,t.W1O)),2&A){const q=t.MAs(4),H=t.MAs(6);t.xp6(1),t.Q6J("ngIf",y.showAlert),t.xp6(1),t.Q6J("ngIf",null!=y.encaminhamento)("ngIfThen",q)("ngIfElse",H)}},dependencies:[o.O5,n.lW,n.RK,Q.d,M.KE,M.hX,i.Hw,C.Nt,k.IC,R.W,g._Y,g.Fj,g.JJ,g.JL,g.Q7,N.A9,N.Yi,g.sg,g.u],styles:[".mat-button-toggle-checked,.mat-button-toggle{border-radius:0!important}\n"],encapsulation:2,data:{animation:G.L},changeDetection:0});class S{constructor(A,y){this._changeDetectorRef=A,this._totalPendentesService=y,this.encaminhamentos=[]}ngOnInit(){this._totalPendentesService.valueChanges.subscribe(A=>{this.value=A,this._changeDetectorRef.markForCheck()}),this.encaminhamentos=this.registo?.encaminhamentos.filter(A=>A.destinatarios.length>0),this.selectedIndex=this.encaminhamentos.length>0?0:1}}S.\u0275fac=function(A){return new(A||S)(t.Y36(t.sBO),t.Y36(e.V))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-circulacoes"]],inputs:{registo:"registo",groupsList:"groupsList"},decls:6,vars:5,consts:[["mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedIndex"],["label","Circula\xe7\xe3o",1,"p-0","tabs"],[3,"registo","groupsList"],["label","Hist\xf3rico"],[3,"registoId","groupsList"]],template:function(A,y){1&A&&(t.TgZ(0,"div")(1,"mat-tab-group",0)(2,"mat-tab",1),t._UZ(3,"app-circulacao-circulacao",2),t.qZA(),t.TgZ(4,"mat-tab",3),t._UZ(5,"app-circulacao-historico",4),t.qZA()()()),2&A&&(t.xp6(1),t.Q6J("selectedIndex",y.selectedIndex),t.xp6(2),t.Q6J("registo",y.registo)("groupsList",y.groupsList),t.xp6(2),t.Q6J("registoId",null==y.registo?null:y.registo.id)("groupsList",y.groupsList))},dependencies:[v.uX,v.SP,P,E],encapsulation:2,changeDetection:0})},3004:(B,d,r)=>{r.d(d,{I:()=>V});var t=r(5861),e=r(4650),v=r(2340),_=r(3284),b=r(7756),h=r(2534),g=r(5412),x=r(7775),c=r(7401),o=r(6895),n=r(7392),i=r(8214);function a(Q,M){if(1&Q&&(e.TgZ(0,"fuse-alert",7),e._UZ(1,"div",8),e.qZA()),2&Q){const C=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxAnexo")("type",null==C.alert?null:C.alert.type)("@shake","error"===(null==C.alert?null:C.alert.type)),e.xp6(1),e.Q6J("innerHTML",C.alert.message,e.oJD)}}function s(Q,M){1&Q&&(e.TgZ(0,"td",4),e._uU(1,"Observa\xe7\xe3o"),e.qZA())}function u(Q,M){1&Q&&(e.TgZ(0,"td",4),e._uU(1,"Editado por"),e.qZA())}function m(Q,M){1&Q&&(e.TgZ(0,"td",4),e._uU(1,"Editado aos"),e.qZA())}function Z(Q,M){1&Q&&(e.TgZ(0,"td",4),e._uU(1,"Adicionado por"),e.qZA())}function I(Q,M){if(1&Q&&(e.TgZ(0,"td",4),e._uU(1),e.qZA()),2&Q){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(null==C?null:C.observacao)}}function P(Q,M){if(1&Q&&(e.TgZ(0,"td",4),e._uU(1),e.qZA()),2&Q){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(null==C?null:C.editadoPor)}}function j(Q,M){if(1&Q&&(e.TgZ(0,"td",4),e._uU(1),e.ALo(2,"date"),e.qZA()),2&Q){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,null==C?null:C.updated_at,"dd/MM/yyyy"))}}function G(Q,M){if(1&Q&&(e.TgZ(0,"td",4),e._uU(1),e.qZA()),2&Q){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(null==C?null:C.criadoPor)}}function z(Q,M){if(1&Q){const C=e.EpF();e.TgZ(0,"tr",9)(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td",4),e._uU(7),e.qZA(),e.YNc(8,I,2,1,"td",5),e.TgZ(9,"td",4),e._uU(10),e.qZA(),e.YNc(11,P,2,1,"td",5),e.YNc(12,j,3,4,"td",5),e.YNc(13,G,2,1,"td",5),e.TgZ(14,"td",10)(15,"button",11),e.NdJ("click",function(){const N=e.CHM(C).$implicit,F=e.oxw();return e.KtG(F.fileViewHistorico(N))}),e._UZ(16,"mat-icon",12),e.qZA(),e.TgZ(17,"a",13),e._UZ(18,"mat-icon",14),e.qZA()()()}if(2&Q){const C=M.$implicit,k=e.oxw();e.Q6J("ngClass",k.getCustomCss(C.id)),e.xp6(2),e.Oqu(C.nome),e.xp6(2),e.Oqu(e.xi3(5,12,C.versao,"1.2-2")),e.xp6(3),e.Oqu(k.estadoDescricao(C)),e.xp6(1),e.Q6J("ngIf",!k.opened),e.xp6(2),e.Oqu(k.bytesToString(null==C?null:C.tamanho)),e.xp6(1),e.Q6J("ngIf",!k.opened),e.xp6(1),e.Q6J("ngIf",!k.opened),e.xp6(1),e.Q6J("ngIf",!k.opened),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:eye"),e.xp6(1),e.Q6J("href",k.anexoDownload(null==C?null:C.id),e.LSH),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:download")}}class V{constructor(M,C,k,R,N,F){this._changeDetectorRef=M,this._keycloakService=C,this._anexosService=k,this.dialog=R,this._fuseAlertService=N,this._fuseConfirmationService=F,this.files=[],this.showFileViewHistorico=new e.vpe,this.showAlert=!1,this.alert={type:"success",message:""},this.updatedAnexoId=0,this.deleteAnexoId=0,this.newAnexosId=new Array,this.units=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]}ngOnInit(){this.getUser()}ngOnChanges(M){this.opened=this.isOpened,this._changeDetectorRef.detectChanges()}getUser(){var M=this;return(0,t.Z)(function*(){M.user=yield M._keycloakService.loadUserProfile()})()}anexoDownload(M){return v.N.URL_ROOT_API+"/anexos/download/"+M+"/"+this.user?.id}checkOutAnexo(M){this._anexosService.checkoutAnexo(M.id).subscribe(C=>{const k=URL.createObjectURL(C),R=document.createElement("a");R.href=k,R.download=M.nome+""+M.extensao,R.click(),M.estado="OUT",M.checkoutUtilizadorId=this.user?.id,this.anexoPush(M),this.updatedAnexoId=M.id,this.statusChanged=!0,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3)})}checkInAnexo(M){this._anexosService.checkinAnexo(M.id).subscribe(C=>{M.estado="IN",this.anexoPush(M),this.updatedAnexoId=M.id,this.statusChanged=!0,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3)})}bytesToString(M){let C=0,k=parseInt(M,10)||0;for(;k>=1024&&++C;)k/=1024;return k.toFixed(k<10&&C>0?1:0)+" "+this.units[C]}dropped(M){var C=this;return(0,t.Z)(function*(){C.files=M;const k=M.map(F=>new Promise(Y=>{F.fileEntry.isFile&&F.fileEntry.file(ee=>{const X=new FileReader;X.readAsDataURL(ee),X.onload=()=>{const $=X.result,L=ee.name,O=ee.size,p=L.split(".").pop();Y({file:$,name:L.substring(0,ee.name.lastIndexOf(".")),size:O,extension:"."+p})}})}));let N={anexos:yield Promise.all(k),registoId:C.registo.id,numeroDocumento:C.registo.documento.numeroDocumento,tipo:C.registo.tipo.nome,username:C.user?.username};C._anexosService.uploadAnexos(N).subscribe(F=>{F.data.forEach(Y=>{C.anexos.push(Y),C.newAnexosId.push(Y.id),C._changeDetectorRef.markForCheck()}),setTimeout(()=>{C.newAnexosId=new Array,C._changeDetectorRef.markForCheck()},2e3)})})()}fileOver(M){}fileLeave(M){}fileViewHistorico(M){this.selectedAnexo=M.id,this.opened=!0,this.showFileViewHistorico.emit({id:M.id,extensao:M.extensao})}openDialog(M){this.dialog.open(_.c,{data:M}).updateSize("500px","400px").afterClosed().subscribe(k=>{null!=k&&(null!=k.anexo&&(this.anexoPush(k.anexo),this.updatedAnexoId=k.anexo.id,this._changeDetectorRef.markForCheck()),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3))})}anexoPush(M){this.anexos=this.anexos.map(C=>C.id==M.id?M:C),this._changeDetectorRef.markForCheck()}deleteSelectedUser(M){this._fuseConfirmationService.open({title:"Remover Anexo",message:"Tem certeza que queres remover este anexo? Essa ac\xe7\xe3o n\xe3o pode ser desfeita.",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(k=>{if("confirmed"===k){const R={next:()=>{this.deleteAnexoId=M,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.anexos=this.anexos.filter(N=>N.id!=M),this.deleteAnexoId=null,this._changeDetectorRef.markForCheck()},1e3)}};this._anexosService.deleteAnexo(M).subscribe(R)}})}getCustomCss(M){var C="";return this.updatedAnexoId==M&&(C+=" bg-yellow-100 "),this.newAnexosId.find(k=>k==M)&&(C+=" bg-green-100 "),this.deleteAnexoId==M&&(C+=" bg-red-100 "),this.selectedAnexo==M&&(C+=" bg-gray-50 "),C}estadoDescricao(M){return"IN"==M.estado?"Check in":this.statusChanged?"Check out - "+this.user?.username:"Check out - "+M.utilizador?.name}}V.\u0275fac=function(M){return new(M||V)(e.Y36(e.sBO),e.Y36(b.MZ),e.Y36(h.d),e.Y36(g.uw),e.Y36(x.jm),e.Y36(c.R))},V.\u0275cmp=e.Xpm({type:V,selectors:[["app-anexo-historico"]],inputs:{anexos:"anexos",registo:"registo",isOpened:"isOpened"},outputs:{showFileViewHistorico:"showFileViewHistorico"},features:[e.TTD],decls:20,vars:6,consts:[["class","mb-2",3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[1,"flex","flex-col"],[1,"w-full","text-md"],[1,"sticky","top-0","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"px-1"],["class","px-1",4,"ngIf"],["class","h-10 border-b text-secondary",3,"ngClass",4,"ngFor","ngForOf"],[1,"mb-2",3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[1,"h-10","border-b","text-secondary",3,"ngClass"],[1,"flex","justify-left","items-center","pt-2"],[3,"click"],[1,"scale-[.75]","rounded","pt-1",3,"svgIcon"],[3,"href"],[1,"scale-[.75]","rounded","pt-1","pr-2",3,"svgIcon"]],template:function(M,C){1&M&&(e.YNc(0,a,2,7,"fuse-alert",0),e.TgZ(1,"div",1)(2,"table",2)(3,"tr",3)(4,"td",4),e._uU(5,"Nome"),e.qZA(),e.TgZ(6,"td",4),e._uU(7,"Vers\xe3o"),e.qZA(),e.TgZ(8,"td",4),e._uU(9,"Estado"),e.qZA(),e.YNc(10,s,2,0,"td",5),e.TgZ(11,"td",4),e._uU(12,"Tamanho"),e.qZA(),e.YNc(13,u,2,0,"td",5),e.YNc(14,m,2,0,"td",5),e.YNc(15,Z,2,0,"td",5),e.TgZ(16,"td",4),e._uU(17,"Ac\xe7\xe3o"),e.qZA(),e._UZ(18,"td"),e.qZA(),e.YNc(19,z,19,15,"tr",6),e.qZA()()),2&M&&(e.Q6J("ngIf",C.showAlert),e.xp6(10),e.Q6J("ngIf",!C.opened),e.xp6(3),e.Q6J("ngIf",!C.opened),e.xp6(1),e.Q6J("ngIf",!C.opened),e.xp6(1),e.Q6J("ngIf",!C.opened),e.xp6(4),e.Q6J("ngForOf",C.anexos))},dependencies:[o.mk,o.sg,o.O5,n.Hw,i.W,o.JJ,o.uU]})},3284:(B,d,r)=>{r.d(d,{c:()=>o});var t=r(4650),e=r(4006),v=r(5412),_=r(7775),b=r(2534),h=r(4859),g=r(9549),x=r(7392),c=r(284);class o{constructor(i,a,s,u,m,Z,I){this.dialogRef=i,this.fb=a,this.data=s,this._formBuilder=u,this._changeDetectorRef=m,this._fuseAlertService=Z,this._anexosService=I,this.alertMessage=new t.vpe,this.anexoPushEmitter=new t.vpe,this.alert={type:"success",message:""},this.anexoForm=new e.cw({nome:new e.NI(0),versao:new e.NI(""),observacao:new e.NI("")})}ngOnInit(){this.anexoForm=this.fb.group({id:this.data?.id,nome:new e.NI(this.data?.nome,[e.kI.required]),versao:new e.NI(this.data?.versao,[e.kI.required]),observacao:new e.NI(this.data?.observacao)})}onNoClick(){this.dialogRef.close()}updateMetadados(i){const a={next:s=>{this.alert={type:"success",message:"Metadados do anexo actualizado com successo!"},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,anexo:s})},error:s=>{this.alert={type:"error",message:`${s.message}`},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,anexo:null})}};this._anexosService.updateMetadados(i).subscribe(a)}save(){}}o.\u0275fac=function(i){return new(i||o)(t.Y36(v.so),t.Y36(e.qu),t.Y36(v.WI),t.Y36(e.QS),t.Y36(t.sBO),t.Y36(_.jm),t.Y36(b.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-anexo-update-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:35,vars:7,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex","mt-2"],[1,"flex-auto"],["matInput","","formControlName","nome",3,"placeholder"],["matInput","","appTwoDigitDecimaNumber","","formControlName","versao",3,"placeholder"],[1,"flex"],["matInput","","formControlName","observacao","rows","2"],[1,"flex","justify-end","mt-5"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.ynx(2),t.TgZ(3,"div",2)(4,"div",3)(5,"p",4),t._uU(6," Actualizar Metadados"),t.qZA(),t.TgZ(7,"p",5),t._uU(8," Formul\xe1rio para actualiza\xe7\xe3o dos metadados do anexo "),t.qZA()()(),t.BQk(),t.ynx(9),t.TgZ(10,"div",6)(11,"button",7),t._UZ(12,"mat-icon",8),t.qZA()(),t.BQk(),t._UZ(13,"div",9),t.TgZ(14,"form",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),t._uU(18,"Nome do anexo"),t.qZA(),t._UZ(19,"input",13),t.qZA(),t._uU(20," \xa0 "),t.TgZ(21,"mat-form-field",12)(22,"mat-label"),t._uU(23,"Vers\xe3o"),t.qZA(),t._UZ(24,"input",14),t.qZA()(),t.TgZ(25,"div",15)(26,"mat-form-field",12)(27,"mat-label"),t._uU(28,"Observa\xe7\xe3o"),t.qZA(),t._UZ(29,"textarea",16),t.qZA()(),t.TgZ(30,"div",17)(31,"button",18),t.NdJ("click",function(){return a.updateMetadados(a.anexoForm.value)}),t._UZ(32,"mat-icon",19),t.TgZ(33,"span",20),t._uU(34,"Salvar"),t.qZA()()()()()()),2&i&&(t.xp6(11),t.Q6J("matDialogClose",void 0),t.xp6(3),t.Q6J("formGroup",a.anexoForm),t.xp6(5),t.Q6J("placeholder","Informe um nome do anexo"),t.xp6(5),t.Q6J("placeholder","Informe a vers\xe3o"),t.xp6(7),t.Q6J("color","primary")("disabled",a.anexoForm.invalid),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:pencil-alt"))},dependencies:[h.lW,h.RK,g.KE,g.hX,x.Hw,c.Nt,v.ZT,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]})},6527:(B,d,r)=>{r.d(d,{U:()=>$});var t=r(5861),e=r(4650),v=r(8288),_=r(2340),b=r(3284),h=r(705),g=r(7756),x=r(4006),c=r(2534),o=r(5412),n=r(7775),i=r(7401),a=r(7490),s=r(6895),u=r(6709),m=r(7392),Z=r(8255),I=r(8214),P=r(7494);function j(L,O){if(1&L&&(e.TgZ(0,"fuse-alert",20),e._UZ(1,"div",21),e.qZA()),2&L){const p=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxAnexo")("type",null==p.alert?null:p.alert.type)("@shake","error"===(null==p.alert?null:p.alert.type)),e.xp6(1),e.Q6J("innerHTML",p.alert.message,e.oJD)}}function G(L,O){1&L&&(e.TgZ(0,"td",6),e._uU(1,"Observa\xe7\xe3o"),e.qZA())}function z(L,O){1&L&&(e.TgZ(0,"td",6),e._uU(1,"Editado por"),e.qZA())}function V(L,O){1&L&&(e.TgZ(0,"td",6),e._uU(1,"Editado aos"),e.qZA())}function Q(L,O){1&L&&(e.TgZ(0,"td",6),e._uU(1,"Adicionado por"),e.qZA())}function M(L,O){if(1&L&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&L){const p=e.oxw().$implicit;e.xp6(1),e.Oqu(null==p?null:p.observacao)}}function C(L,O){if(1&L&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&L){const p=e.oxw().$implicit,E=e.oxw();e.xp6(1),e.Oqu(E.extensaoDescricao(null==p?null:p.extensao))}}function k(L,O){if(1&L&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&L){const p=e.oxw().$implicit;e.xp6(1),e.Oqu(null==p?null:p.editadoPor)}}function R(L,O){if(1&L&&(e.TgZ(0,"td",6),e._uU(1),e.ALo(2,"date"),e.qZA()),2&L){const p=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,null==p?null:p.updated_at,"dd/MM/yyyy"))}}function N(L,O){if(1&L&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&L){const p=e.oxw().$implicit;e.xp6(1),e.Oqu(null==p?null:p.criadoPor)}}function F(L,O){if(1&L){const p=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(p);const S=e.oxw().$implicit,w=e.oxw();return e.KtG(w.checkOutAnexo(S))}),e._UZ(1,"mat-icon",13),e.TgZ(2,"div",14)(3,"span",15),e._uU(4,"Check Out"),e.qZA(),e.TgZ(5,"span",16),e._uU(6,"Edi\xe7\xe3o exclusiva do utilizador"),e.qZA()()()}if(2&L){const p=e.oxw().$implicit;e.Q6J("disabled","OUT"==p.estado),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:download")}}function Y(L,O){if(1&L){const p=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(p);const S=e.oxw().$implicit,w=e.oxw();return e.KtG(w.checkInAnexo(S))}),e._UZ(1,"mat-icon",13),e.TgZ(2,"div",14)(3,"span",15),e._uU(4,"Check In"),e.qZA(),e.TgZ(5,"span",16),e._uU(6,"Remover edi\xe7\xe3o exclusiva"),e.qZA()()()}2&L&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:download"))}function W(L,O){if(1&L){const p=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(p);const S=e.oxw().$implicit,w=e.oxw();return e.KtG(w.converterAnexo(S))}),e.TgZ(1,"mat-icon"),e._uU(2,"picture_as_pdf"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5,"Gravar como PDF"),e.qZA(),e.TgZ(6,"span",16),e._uU(7,"Converter o anexo para PDF"),e.qZA()()()}}function ee(L,O){if(1&L){const p=e.EpF();e.TgZ(0,"tr",22)(1,"td",23)(2,"mat-checkbox",24),e.NdJ("ngModelChange",function(S){const A=e.CHM(p).index,y=e.oxw();return e.KtG(y.anexosSelecionados[A].selecionado=S)})("change",function(){e.CHM(p);const S=e.oxw();return e.KtG(S.checkboxChange())}),e.qZA()(),e.TgZ(3,"td",6),e._uU(4),e.qZA(),e.TgZ(5,"td",6),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",6),e._uU(9),e.qZA(),e.YNc(10,M,2,1,"td",7),e.TgZ(11,"td",6),e._uU(12),e.qZA(),e.YNc(13,C,2,1,"td",7),e.YNc(14,k,2,1,"td",7),e.YNc(15,R,3,4,"td",7),e.YNc(16,N,2,1,"td",7),e.TgZ(17,"td",25)(18,"button",26),e.NdJ("click",function(){const w=e.CHM(p).$implicit,A=e.oxw();return e.KtG(A.fileView(w))}),e._UZ(19,"mat-icon",27),e.qZA(),e.TgZ(20,"a",28),e._UZ(21,"mat-icon",9),e.qZA()(),e.TgZ(22,"td")(23,"button",8),e._UZ(24,"mat-icon",9),e.qZA(),e.TgZ(25,"mat-menu",null,29),e.YNc(27,F,7,2,"button",30),e.YNc(28,Y,7,1,"button",31),e.YNc(29,W,8,0,"button",31),e.TgZ(30,"button",32),e.NdJ("click",function(){const w=e.CHM(p).$implicit,A=e.oxw();return e.KtG(A.assinarFicheiroDialog(w))}),e.TgZ(31,"mat-icon"),e._uU(32,"assignment"),e.qZA(),e.TgZ(33,"div",14)(34,"span",15),e._uU(35,"Inserir Assinatura"),e.qZA(),e.TgZ(36,"span",16),e._uU(37,"Assinar o ficheiro selecionado"),e.qZA()()(),e.TgZ(38,"button",32),e.NdJ("click",function(){const w=e.CHM(p).$implicit,A=e.oxw();return e.KtG(A.openDialog(w))}),e._UZ(39,"mat-icon",13),e.TgZ(40,"div",14)(41,"span",15),e._uU(42,"Editar"),e.qZA(),e.TgZ(43,"span",16),e._uU(44,"Alterar os metadados do anexo"),e.qZA()()(),e.TgZ(45,"button",32),e.NdJ("click",function(){const w=e.CHM(p).$implicit,A=e.oxw();return e.KtG(A.deleteSelectedUser(w.id))}),e._UZ(46,"mat-icon",13),e.TgZ(47,"div",14)(48,"span",15),e._uU(49,"Excluir"),e.qZA(),e.TgZ(50,"span",16),e._uU(51,"Excluir o anexo do documento"),e.qZA()()()()()()}if(2&L){const p=O.$implicit,E=O.index,S=e.MAs(26),w=e.oxw();e.Q6J("ngClass",w.getCustomCss(p.id)),e.xp6(2),e.Q6J("color","primary")("ngModel",w.anexosSelecionados[E].selecionado),e.xp6(2),e.Oqu(p.nome),e.xp6(2),e.Oqu(e.xi3(7,25,p.versao,"1.2-2")),e.xp6(3),e.Oqu(w.estadoDescricao(p)),e.xp6(1),e.Q6J("ngIf",!w.opened),e.xp6(2),e.Oqu(w.bytesToString(null==p?null:p.tamanho)),e.xp6(1),e.Q6J("ngIf",!w.opened),e.xp6(1),e.Q6J("ngIf",!w.opened),e.xp6(1),e.Q6J("ngIf",!w.opened),e.xp6(1),e.Q6J("ngIf",!w.opened),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:eye"),e.xp6(1),e.Q6J("href",w.anexoDownload(null==p?null:p.id),e.LSH),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:download"),e.xp6(2),e.Q6J("matMenuTriggerFor",S),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(3),e.Q6J("ngIf",".docx"==p.extensao||".doc"==p.extensao||".xlsx"==p.extensao||".xls"==p.extensao||".pptx"==p.extensao||".ppt"==p.extensao||".txt"==p.extensao),e.xp6(1),e.Q6J("ngIf","OUT"==p.estado&&(null==w.user?null:w.user.id)==p.checkoutUtilizadorId),e.xp6(1),e.Q6J("ngIf",".pdf"!=p.extensao&&".msi"!=p.extensao&&".exe"!=p.extensao),e.xp6(1),e.Q6J("disabled","OUT"==p.estado),e.xp6(8),e.Q6J("disabled","OUT"==p.estado),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil"),e.xp6(6),e.Q6J("disabled","OUT"==p.estado),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash")}}function X(L,O){if(1&L){const p=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const w=e.CHM(p).openFileSelector;return e.KtG(w())}),e._UZ(1,"mat-icon",13),e.TgZ(2,"span",34),e._uU(3,"Arraste novos anexos para esta \xe1rea"),e.qZA()()}2&L&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:upload"))}class ${constructor(O,p,E,S,w,A,y,q){this._changeDetectorRef=O,this._keycloakService=p,this.fb=E,this._anexosService=S,this.dialog=w,this._fuseAlertService=A,this._fuseConfirmationService=y,this._entradasService=q,this.documentRefreshEmmit=new e.vpe,this.files=[],this.showFileView=new e.vpe,this.showAlert=!1,this.alert={type:"success",message:""},this.updatedAnexoId=0,this.deleteAnexoId=0,this.deleteAnexoIds=[],this.newAnexosId=[],this.anexosSelecionados=[],this.units=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]}ngOnInit(){this.getUser(),this.resetAnexosSelecionados()}resetAnexosSelecionados(){this.anexosSelecionados=[],this.anexos?.forEach(O=>{this.anexosSelecionados.push({id:O.id,selecionado:!1})})}ngOnChanges(O){this.opened=this.isOpened,this.resetAnexosSelecionados()}selectAll(){this.anexosSelecionados.forEach(O=>{O.id=O.id,O.selecionado=this.selecionarTodos}),this._anexosService.anexosSelecionados=this.anexosSelecionados.filter(O=>1==O.selecionado)}getUser(){var O=this;return(0,t.Z)(function*(){O.user=yield O._keycloakService.loadUserProfile()})()}anexoDownload(O){return _.N.URL_ROOT_API+"/anexos/download/"+O+"/"+this.user?.id}checkOutAnexo(O){this._anexosService.checkoutAnexo(O.id).subscribe(p=>{const E=URL.createObjectURL(p),S=document.createElement("a");S.href=E,S.download=O.nome+""+O.extensao,S.click(),O.estado="OUT",O.checkoutUtilizadorId=this.user?.id,this.anexoPush(O),this.updatedAnexoId=O.id,this.statusChanged=!0,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3)})}checkInAnexo(O){this._anexosService.checkinAnexo(O.id).subscribe(p=>{O.estado="IN",this.anexoPush(O),this.updatedAnexoId=O.id,this.statusChanged=!0,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3)})}bytesToString(O){let p=0,E=parseInt(O,10)||0;for(;E>=1024&&++p;)E/=1024;return E.toFixed(E<10&&p>0?1:0)+" "+this.units[p]}dropped(O){var p=this;return(0,t.Z)(function*(){p.files=O;const E=O.map(A=>new Promise(y=>{A.fileEntry.isFile&&A.fileEntry.file(H=>{const oe=new FileReader;oe.readAsDataURL(H),oe.onload=()=>{const ie=oe.result,se=H.name,ce=H.size,fe=se.split(".").pop();y({file:ie,name:se.substring(0,H.name.lastIndexOf(".")),size:ce,extension:"."+fe})}})}));let w={anexos:yield Promise.all(E),registoId:p.registo.id,numeroDocumento:p.registo.documento.numeroDocumento,tipo:p.registo.tipo.nome,username:p.user?.username};p._anexosService.uploadAnexos(w).subscribe(A=>{A.data.forEach(y=>{p.anexos.push(y),p.newAnexosId.push(y.id),p._changeDetectorRef.markForCheck(),p.anexosSelecionados.push({id:y.id,selecionado:!1})}),setTimeout(()=>{p.newAnexosId=new Array,p._changeDetectorRef.markForCheck()},2e3)})})()}fileOver(O){}fileLeave(O){}fileView(O){this.selectedAnexo=O.id,this.opened=!0,this.showFileView.emit({id:O.id,extensao:O.extensao,nome:O.nome})}openDialog(O){this.dialog.open(b.c,{data:O}).updateSize("500px","400px").afterClosed().subscribe(E=>{null!=E&&(null!=E.anexo&&(this.anexoPush(E.anexo),this.updatedAnexoId=E.anexo.id,this._changeDetectorRef.markForCheck()),setTimeout(()=>{this.updatedAnexoId=null,this._changeDetectorRef.markForCheck()},2e3))})}anexoPush(O){this.anexos=this.anexos.map(p=>p.id==O.id?O:p),this._changeDetectorRef.markForCheck()}deleteSelectedUser(O){this._fuseConfirmationService.open({title:"Remover Anexo",message:"Tem certeza que queres remover este anexo? Essa ac\xe7\xe3o n\xe3o pode ser desfeita.",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(E=>{if("confirmed"===E){const S={next:()=>{this.deleteAnexoId=O,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.anexos=this.anexos.filter(w=>w.id!=O),this.deleteAnexoId=null,this._changeDetectorRef.markForCheck()},1e3)}};this._anexosService.deleteAnexo(O).subscribe(S)}})}deleteAnexoSelecionados(){var O=Array();this.anexosSelecionados.filter(E=>1==E.selecionado).forEach(E=>{O.push(E.id)}),this._fuseConfirmationService.open({title:"Remover Anexo",message:"Tem certeza que queres remover este anexo? Essa ac\xe7\xe3o n\xe3o pode ser desfeita.",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(E=>{if("confirmed"===E){const S={next:()=>{this.deleteAnexoIds=O,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.anexos=this.anexos.filter(w=>!O.includes(w.id)),this.deleteAnexoIds=null,this._changeDetectorRef.markForCheck()},1e3)}};this._anexosService.deleteAnexos({anexos:O}).subscribe(S)}})}getCustomCss(O){var p="";return this.updatedAnexoId==O&&(p+=" bg-yellow-100 "),this.newAnexosId.find(E=>E==O)&&(p+=" bg-green-100 "),(this.deleteAnexoId==O||this.deleteAnexoIds?.find(E=>E==O))&&(p+=" bg-red-100 "),this.selectedAnexo==O&&(p+=" bg-gray-50 "),p}estadoDescricao(O){return"IN"==O.estado?"Check in":this.statusChanged?"Check out - "+this.user?.username:"Check out - "+O.utilizador?.name}assinarFicheiroDialog(O){this.dialog.open(h.z,{data:O}).updateSize("700px","530px").afterClosed().subscribe(E=>{})}extensaoDescricao(O){return O.replace(".","").toUpperCase()}converterAnexo(O){this._anexosService.converterAnexos({anexos:[O.id]}).subscribe(p=>{p.data.forEach(E=>{this.anexos.push(E),this.newAnexosId.push(E.id),this.anexosSelecionados.push({id:E.id,selecionado:!1}),this._changeDetectorRef.markForCheck()}),setTimeout(()=>{this.newAnexosId=new Array,this._changeDetectorRef.markForCheck()},2e3)})}converterAnexoSelecionados(){var O=Array();this.anexosSelecionados.filter(p=>1==p.selecionado).forEach(p=>{O.push(p.id)}),this._anexosService.converterAnexos({anexos:O}).subscribe(p=>{p.data.forEach(E=>{this.anexos.push(E),this.newAnexosId.push(E.id),this.anexosSelecionados.push({id:E.id,selecionado:!1}),this._changeDetectorRef.markForCheck()}),setTimeout(()=>{this.newAnexosId=new Array,this._changeDetectorRef.markForCheck()},2e3)})}assinarFicheiroSelecionadosDialog(){}checkboxChange(){this._anexosService.anexosSelecionados=this.anexosSelecionados.filter(O=>1==O.selecionado)}documentRefresh(){this._entradasService.getEntradaDetails(this.registo.id).subscribe(O=>{this.documentRefreshEmmit.emit(O.data),this.resetAnexosSelecionados(),this._changeDetectorRef.markForCheck()})}dowloadAnexoSelecionados(){var O=Array();this.anexosSelecionados.filter(p=>1==p.selecionado).forEach(p=>{O.push(p.id)}),this._anexosService.downloadAnexos({anexos:O}).subscribe(p=>{const E=URL.createObjectURL(p),S=document.createElement("a");S.href=E,S.download=this.registo.tipo.nome+".zip",S.click()})}}$.\u0275fac=function(O){return new(O||$)(e.Y36(e.sBO),e.Y36(g.MZ),e.Y36(x.qu),e.Y36(c.d),e.Y36(o.uw),e.Y36(n.jm),e.Y36(i.R),e.Y36(a._))},$.\u0275cmp=e.Xpm({type:$,selectors:[["entrada-anexo"]],inputs:{anexos:"anexos",registo:"registo",isOpened:"isOpened"},outputs:{documentRefreshEmmit:"documentRefreshEmmit",showFileView:"showFileView"},features:[e.TTD],decls:68,vars:13,consts:[["class","mb-2",3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[1,"flex","flex-col"],[1,"w-full","text-md"],[1,"sticky","top-0","h-12","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"pt-3",2,"width","10px"],[3,"ngModel","color","ngModelChange","change"],[1,"px-1"],["class","px-1",4,"ngIf"],[3,"matMenuTriggerFor"],[1,"scale-[.75]","rounded","pt-1","pr-2",3,"svgIcon"],["class","h-10 border-b text-secondary",3,"ngClass",4,"ngFor","ngForOf"],["moreMenuMultiple","matMenu"],["mat-menu-item","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col","items-start","justify-center"],[1,"text-lg"],[1,"text-sm"],[1,"w-full","mt-2"],["dropZoneLabel","Drop files here",3,"onFileDrop","onFileOver","onFileLeave"],["ngx-file-drop-content-tmp",""],[1,"mb-2",3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[1,"h-10","border-b","text-secondary",3,"ngClass"],[1,"pt-3"],[3,"color","ngModel","ngModelChange","change"],[1,"flex","justify-left","items-center","pt-2"],[3,"click"],[1,"scale-[.75]","rounded","pt-1",3,"svgIcon"],[3,"href"],["moreMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],[1,"flex","gap-2",3,"click"],[2,"color","#64748b","font-weight","500"]],template:function(O,p){if(1&O&&(e.YNc(0,j,2,7,"fuse-alert",0),e.TgZ(1,"div",1)(2,"table",2)(3,"tr",3)(4,"td",4)(5,"mat-checkbox",5),e.NdJ("ngModelChange",function(S){return p.selecionarTodos=S})("change",function(){return p.selectAll()}),e.qZA()(),e.TgZ(6,"td",6),e._uU(7,"Nome"),e.qZA(),e.TgZ(8,"td",6),e._uU(9,"Vers\xe3o"),e.qZA(),e.TgZ(10,"td",6),e._uU(11,"Estado"),e.qZA(),e.YNc(12,G,2,0,"td",7),e.TgZ(13,"td",6),e._uU(14,"Tamanho"),e.qZA(),e.TgZ(15,"td",6),e._uU(16,"Formato"),e.qZA(),e.YNc(17,z,2,0,"td",7),e.YNc(18,V,2,0,"td",7),e.YNc(19,Q,2,0,"td",7),e.TgZ(20,"td",6),e._uU(21,"Ac\xe7\xe3o"),e.qZA(),e.TgZ(22,"td")(23,"button",8),e._UZ(24,"mat-icon",9),e.qZA()()(),e.YNc(25,ee,52,28,"tr",10),e.qZA(),e.TgZ(26,"mat-menu",null,11)(28,"button",12),e.NdJ("click",function(){return p.dowloadAnexoSelecionados()}),e._UZ(29,"mat-icon",13),e.TgZ(30,"div",14)(31,"span",15),e._uU(32,"Descarregar anexos"),e.qZA(),e.TgZ(33,"span",16),e._uU(34,"Descarregar os selecionados"),e.qZA()()(),e.TgZ(35,"button",12),e.NdJ("click",function(){return p.converterAnexoSelecionados()}),e.TgZ(36,"mat-icon"),e._uU(37,"picture_as_pdf"),e.qZA(),e.TgZ(38,"div",14)(39,"span",15),e._uU(40,"Gravar como PDF"),e.qZA(),e.TgZ(41,"span",16),e._uU(42,"Converter o anexo para PDF"),e.qZA()()(),e.TgZ(43,"button",12),e.NdJ("click",function(){return p.assinarFicheiroSelecionadosDialog()}),e.TgZ(44,"mat-icon"),e._uU(45,"assignment"),e.qZA(),e.TgZ(46,"div",14)(47,"span",15),e._uU(48,"Inserir Assinatura"),e.qZA(),e.TgZ(49,"span",16),e._uU(50,"Assinar o ficheiro selecionado"),e.qZA()()(),e.TgZ(51,"button",12),e.NdJ("click",function(){return p.deleteAnexoSelecionados()}),e._UZ(52,"mat-icon",13),e.TgZ(53,"div",14)(54,"span",15),e._uU(55,"Excluir"),e.qZA(),e.TgZ(56,"span",16),e._uU(57,"Excluir o anexo do documento"),e.qZA()()(),e.TgZ(58,"button",12),e.NdJ("click",function(){return p.documentRefresh()}),e._UZ(59,"mat-icon",13),e.TgZ(60,"div",14)(61,"span",15),e._uU(62,"Actualizar"),e.qZA(),e.TgZ(63,"span",16),e._uU(64,"Actualizar os dados do documento"),e.qZA()()()(),e.TgZ(65,"div",17)(66,"ngx-file-drop",18),e.NdJ("onFileDrop",function(S){return p.dropped(S)})("onFileOver",function(S){return p.fileOver(S)})("onFileLeave",function(S){return p.fileLeave(S)}),e.YNc(67,X,4,1,"ng-template",19),e.qZA()()()),2&O){const E=e.MAs(27);e.Q6J("ngIf",p.showAlert),e.xp6(5),e.Q6J("ngModel",p.selecionarTodos)("color","primary"),e.xp6(7),e.Q6J("ngIf",!p.opened),e.xp6(5),e.Q6J("ngIf",!p.opened),e.xp6(1),e.Q6J("ngIf",!p.opened),e.xp6(1),e.Q6J("ngIf",!p.opened),e.xp6(4),e.Q6J("matMenuTriggerFor",E),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(1),e.Q6J("ngForOf",p.anexos),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:download"),e.xp6(23),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:refresh")}},dependencies:[s.mk,s.sg,s.O5,u.oG,m.Hw,Z.VK,Z.OP,Z.p6,I.W,P.CB,P.L9,x.JJ,x.On,s.JJ,s.uU],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #64748B!important}"],data:{animation:v.L}})},705:(B,d,r)=>{r.d(d,{z:()=>C});var t=r(4650),e=r(5412),v=r(4006),_=r(7775),b=r(2534),h=r(2340),g=r(529);class x{constructor(R){this._httpClient=R}assinar(R,N){return this._httpClient.post(h.N.URL_ROOT_API+"/assinatura",{anexo:R,assinatura:N},{responseType:"blob"})}}x.\u0275fac=function(R){return new(R||x)(t.LFG(g.eN))},x.\u0275prov=t.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var c=r(4859),o=r(7392),n=r(3848),i=r(261);const a=["signature"];class s{constructor(){this.imagemEmitter=new t.vpe,this.signaturePadOptions={minWidth:5,canvasWidth:600,canvasHeight:180}}ngAfterViewInit(){this.signaturePad.clear()}drawComplete(R){console.log(this.signaturePad.toDataURL()),this.imagemEmitter.emit(this.signaturePad.toDataURL())}drawStart(R){console.log("Start drawing",R)}limpar(){this.signaturePad.clear()}}s.\u0275fac=function(R){return new(R||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-signing-pad"]],viewQuery:function(R,N){if(1&R&&t.Gf(a,5),2&R){let F;t.iGM(F=t.CRH())&&(N.signaturePad=F.first)}},outputs:{imagemEmitter:"imagemEmitter"},decls:7,vars:2,consts:[[1,"pad"],[3,"options","drawStart","drawEnd"],["signature",""],[1,"flex","justify-center","mt-5"],["mat-flat-button","","type","button",1,"px-8",3,"color","click"]],template:function(R,N){1&R&&(t.TgZ(0,"div",0)(1,"signature-pad",1,2),t.NdJ("drawStart",function(Y){return N.drawStart(Y)})("drawEnd",function(Y){return N.drawComplete(Y)}),t._uU(3,"SASDD"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return N.limpar()}),t._uU(6," Limpar a assinatura "),t.qZA()()()),2&R&&(t.xp6(1),t.Q6J("options",N.signaturePadOptions),t.xp6(4),t.Q6J("color","default"))},dependencies:[c.lW,i.l],styles:["signature-pad[_ngcontent-%COMP%]{background-color:#fff!important}"]});var u=r(9695),m=r(6895);function Z(k,R){if(1&k){const N=t.EpF();t.TgZ(0,"div",5)(1,"input",6),t.NdJ("change",function(Y){t.CHM(N);const W=t.oxw();return t.KtG(W.selectFiles(Y))}),t.qZA()()}}function I(k,R){1&k&&t._UZ(0,"img",7),2&k&&t.Q6J("src",R.$implicit,t.LSH)}class P{constructor(R,N){this.uploadService=R,this._changeDetectorRef=N,this.imagemEmitter=new t.vpe,this.selectedFileNames=[],this.progressInfos=[],this.message=[],this.previews=[]}ngOnInit(){this.imageInfos=this.uploadService.getFiles()}selectFiles(R){if(console.log("teste"),this.message=[],this.progressInfos=[],this.selectedFileNames=[],this.selectedFiles=R.target.files,this.previews=[],this.selectedFiles&&this.selectedFiles[0]){const N=this.selectedFiles.length;for(let F=0;F<N;F++){const Y=new FileReader;Y.onload=W=>{console.log(W.target.result),this.previews.push(W.target.result),this.imagemEmitter.emit(this.previews[0])},Y.readAsDataURL(this.selectedFiles[F]),this.selectedFileNames.push(this.selectedFiles[F].name)}}}limpar(){this.selectedFiles=null,this.selectedFileNames=[],this.previews=[],this._changeDetectorRef.detectChanges()}}P.\u0275fac=function(R){return new(R||P)(t.Y36(u.J),t.Y36(t.sBO))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-assign-upload-images"]],outputs:{imagemEmitter:"imagemEmitter"},decls:6,vars:3,consts:[[1,"w-full","flex","justify-center",2,"height","180px","border","1px solid black"],["class","w-full",4,"ngIf"],["class","preview",3,"src",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],["mat-flat-button","","type","button",1,"px-8",3,"color","click"],[1,"w-full"],["type","file","id","fileInput","name","fileInput","accept","image/*","value","Selecionar Imagem",3,"change"],[1,"preview",3,"src"]],template:function(R,N){1&R&&(t.TgZ(0,"div",0),t.YNc(1,Z,2,0,"div",1),t.YNc(2,I,1,1,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return N.limpar()}),t._uU(5," Limpar a assinatura "),t.qZA()()),2&R&&(t.xp6(1),t.Q6J("ngIf",0==N.previews.length),t.xp6(1),t.Q6J("ngForOf",N.previews),t.xp6(2),t.Q6J("color","default"))},dependencies:[m.sg,m.O5,c.lW],styles:[".progress-bar[_ngcontent-%COMP%]{padding:0}.progress[_ngcontent-%COMP%]{width:50px}.mat-input-element[_ngcontent-%COMP%]{font-size:medium;font-weight:200}#fileInput[_ngcontent-%COMP%]{cursor:pointer;z-index:10;opacity:0;width:100%;height:100%}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent;padding:0}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{background-color:#ddd;padding:15px;color:#333;border:#aaa solid 1px;border-radius:4px;margin:15px 0}.preview[_ngcontent-%COMP%]{vertical-align:middle}.list-card[_ngcontent-%COMP%]{margin-top:20px}.list-item[_ngcontent-%COMP%]{margin-bottom:20px}"]});var j=r(8288),G=r(9549),z=r(284),V=r(811);const Q=["signPad"];class M{constructor(){this.signatureSaved=new t.vpe,this.assinaturaForm=new v.cw({texto:new v.NI("assinatura"),fonte:new v.NI("font1")})}get texto(){return this.assinaturaForm.get("texto").value}ngOnInit(){}ngAfterViewInit(){this.sigPadElement=this.signPad.nativeElement,this.context=this.sigPadElement.getContext("2d"),this.context.font="30px Lucida Handwriting",this.context.fillStyle="Black",this.context.fillText(this.texto,5,30),this.assinaturaForm.valueChanges.subscribe(R=>{this.fillTextPad(),this.signatureSaved.emit(this.sigPadElement.toDataURL())})}fillTextPad(){this.context.clearRect(0,0,this.sigPadElement.width,this.sigPadElement.height),this.context.beginPath(),this.context.font="30px "+this.getFonteType(),this.context.fillStyle="Black",this.context.fillText(this.texto,5,30)}getFonte(){return"font1"==this.assinaturaForm.get("fonte").value?"font-lucida":"font2"==this.assinaturaForm.get("fonte").value?"font-brush":"font-papyrus"}getFonteType(){return"font1"==this.assinaturaForm.get("fonte").value?"Lucida Handwriting":"font2"==this.assinaturaForm.get("fonte").value?"Brush Script MT":"Papyrus, Monaco"}}M.\u0275fac=function(R){return new(R||M)},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-assign-digitalize"]],viewQuery:function(R,N){if(1&R&&t.Gf(Q,5),2&R){let F;t.iGM(F=t.CRH())&&(N.signPad=F.first)}},outputs:{signatureSaved:"signatureSaved"},decls:18,vars:5,consts:[[1,"w-full",2,"height","16.2rem"],[3,"formGroup"],[1,"flex","justify-center","mt-15"],[1,"w-100",2,"border-radius","none"],["matInput","","formControlName","texto","value","assinatura",1,"font-bold","text-center","h-20",2,"font-size","1.5em",3,"ngClass"],[1,"flex","mt-4","justify-center"],["appearance","legacy","formControlName","fonte","required","","aria-label","Font Style"],["value","font1"],[2,"font-family","Lucida Handwriting"],["value","font2"],[2,"font-family","Brush Script MT"],["value","font3"],[2,"font-family","Papyrus, Monaco"],["width","350","height","200",2,"display","none"],["signPad",""]],template:function(R,N){1&R&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3),t._UZ(4,"input",4),t.qZA()(),t.TgZ(5,"div",5)(6,"mat-button-toggle-group",6)(7,"mat-button-toggle",7)(8,"span",8),t._uU(9),t.qZA()(),t.TgZ(10,"mat-button-toggle",9)(11,"span",10),t._uU(12),t.qZA()(),t.TgZ(13,"mat-button-toggle",11)(14,"span",12),t._uU(15),t.qZA()()()()(),t._UZ(16,"canvas",13,14),t.qZA()),2&R&&(t.xp6(1),t.Q6J("formGroup",N.assinaturaForm),t.xp6(3),t.Q6J("ngClass",N.getFonte()),t.xp6(5),t.Oqu(N.texto),t.xp6(3),t.Oqu(N.texto),t.xp6(3),t.Oqu(N.texto))},dependencies:[m.mk,G.KE,z.Nt,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,V.A9,V.Yi],styles:[".font-lucida{font-family:Lucida Handwriting!important}.font-brush{font-family:Brush Script MT!important}.font-papyrus{font-family:Papyrus,Monaco!important}\n"],encapsulation:2,data:{animation:j.L},changeDetection:0});class C{constructor(R,N,F,Y,W,ee,X,$){this.dialogRef=R,this.fb=N,this.data=F,this._formBuilder=Y,this._changeDetectorRef=W,this._fuseAlertService=ee,this._anexosService=X,this._assinaturaService=$,this.alertMessage=new t.vpe,this.anexoPushEmitter=new t.vpe,this.alert={type:"success",message:""}}ngOnInit(){}onNoClick(){this.dialogRef.close()}assinarDocumento(){this._assinaturaService.assinar(this.data,this.assinaturaImagem).subscribe(R=>{const N=URL.createObjectURL(R),F=document.createElement("a");F.href=N,F.download=this.data.nome+""+this.data.extensao,F.click()}),this.dialogRef.close()}imagemGet(R){this.assinaturaImagem=R}}C.\u0275fac=function(R){return new(R||C)(t.Y36(e.so),t.Y36(v.qu),t.Y36(e.WI),t.Y36(v.QS),t.Y36(t.sBO),t.Y36(_.jm),t.Y36(b.d),t.Y36(x))},C.\u0275cmp=t.Xpm({type:C,selectors:[["assinatura-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:30,vars:4,consts:[[1,"relative"],[1,"relative","flex","flex-col"],[1,"py-5"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],["mat-align-tabs","start"],["label","Desenhar",1,"p-0","tabs"],[1,"p-10"],[3,"imagemEmitter"],["label","Imagem"],[1,"px-30","py-10"],["label","Digitar"],[3,"signatureSaved"],[1,"flex","justify-end","mt-5"],["mat-flat-button","","type","button",1,"px-8","mr-4",3,"matDialogClose","color"],[1,"ml-2","mr-1"],["mat-flat-button","","type","button",1,"px-8","mr-5",3,"color","click"]],template:function(R,N){1&R&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.ynx(3),t.TgZ(4,"div",3)(5,"div",4)(6,"p",5),t._uU(7,"Adicionar Assinatura"),t.qZA()()(),t.BQk(),t.ynx(8),t.TgZ(9,"div",6)(10,"button",7),t._UZ(11,"mat-icon",8),t.qZA()(),t.BQk(),t.qZA(),t._UZ(12,"div",9),t.TgZ(13,"mat-tab-group",10)(14,"mat-tab",11)(15,"div",12)(16,"app-signing-pad",13),t.NdJ("imagemEmitter",function(Y){return N.imagemGet(Y)}),t.qZA()()(),t.TgZ(17,"mat-tab",14)(18,"div",15)(19,"app-assign-upload-images",13),t.NdJ("imagemEmitter",function(Y){return N.imagemGet(Y)}),t.qZA()()(),t.TgZ(20,"mat-tab",16)(21,"app-assign-digitalize",17),t.NdJ("signatureSaved",function(Y){return N.imagemGet(Y)}),t.qZA()()(),t._UZ(22,"div",9),t.TgZ(23,"div",18)(24,"button",19)(25,"span",20),t._uU(26,"Cancelar"),t.qZA()(),t.TgZ(27,"button",21),t.NdJ("click",function(){return N.assinarDocumento()}),t.TgZ(28,"span",20),t._uU(29,"Ok"),t.qZA()()()()()),2&R&&(t.xp6(10),t.Q6J("matDialogClose",void 0),t.xp6(14),t.Q6J("matDialogClose",void 0)("color","accent"),t.xp6(3),t.Q6J("color","primary"))},dependencies:[c.lW,c.RK,o.Hw,n.uX,n.SP,e.ZT,s,P,M],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]})},3612:(B,d,r)=>{r.d(d,{W:()=>de});var t=r(5861),e=r(4650),v=r(8288),_=r(9969),b=r(705),h=r(4006),g=r(5412),x=r(7775),c=r(5979),o=r(9424),n=r(4693),i=r(7756),a=r(5182),s=r(1551),u=r(6895),m=r(3238),Z=r(4859),I=r(9549),P=r(7392),j=r(284),G=r(4385),z=r(3231),V=r(455),Q=r(9602);function M(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.username," ")}}function C(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.name," ")}}function k(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.nome," ")}}function R(U,f){if(1&U&&(e.TgZ(0,"mat-option",39)(1,"div",40),e.YNc(2,M,2,1,"span",41),e.YNc(3,C,2,1,"span",41),e.YNc(4,k,2,1,"span",41),e.qZA()()),2&U){const l=f.$implicit,D=e.oxw();e.Q6J("value",l.id),e.xp6(1),e.Q6J("ngSwitch",D.selectDestinatario),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}const N=function(U){return{"text-primary":U}};class F{constructor(f,l,D,T,J,K,ne,ae,te,re,le){this.dialogRef=f,this.fb=l,this.data=D,this._changeDetectorRef=T,this._fuseAlertService=J,this._entidadeService=K,this._drawerService=ne,this._userService=ae,this._keycloakService=te,this._encaminharAccaoService=re,this._totalPendentesService=le,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.encaminharForm=new h.cw({nome:new h.NI(0),versao:new h.NI(""),observacao:new h.NI("")}),this.selectDestinatario=1}ngOnInit(){this.encaminharForm=this.fb.group({accao:new h.NI({value:this.data?.accaoSolicitada,disabled:!0}),assunto:new h.NI({value:this.data?.registo.assunto,disabled:!0}),mensagem:new h.NI("Envio para aprova\xe7\xe3o a(o) seguinte "+this.data?.registo.tipo.nome+" \n\n Melhores comprimentos."),registoId:new h.NI(this.data?.registo.id),utilizadorId:new h.NI,encaminharDestinatario:new h.NI([]),destinatario:new h.NI([]),dataLimite:new h.NI,enviarEmail:new h.NI(!1),receberNotificacao:new h.NI(!0),accaoObrigatoriaTodos:new h.NI(!1)}),this.getEntidades(),this.getUsers(),this.getGroups(),this.getUser()}getEntidades(){this._entidadeService.entidades$.subscribe(f=>{this.entidades=f,this._changeDetectorRef.detectChanges()})}getUsers(){this._userService.users$.subscribe(f=>{this.users=f,this.searchDestinatarios=f})}getGroups(){this._userService.groups$.subscribe(f=>{this.groups=f})}getUser(){var f=this;return(0,t.Z)(function*(){f.user=yield f._keycloakService.loadUserProfile(),f.encaminharForm.patchValue({utilizadorId:f.user?.id})})()}onNoClick(){this.dialogRef.close()}changeDestinatario(f){switch(this.selectDestinatario=f,f){case 1:this.searchDestinatarios=this.users;break;case 2:this.searchDestinatarios=this.groups;break;case 3:this.searchDestinatarios=this.entidades}let l=[];l=this.encaminharForm.get("encaminharDestinatario").value,l.map(D=>{let T={};if("UTILIZADOR"==D.tipo){switch(T=this.users.find(J=>J.id==D.utilizadorId),T.tipo="UTILIZADOR",f){case 1:T.username=T.username;break;case 2:T.name=T.username;break;case 3:T.nome=T.username}this.searchDestinatarios.unshift(T)}else if("GRUPO"==D.tipo){switch(T=this.groups.find(J=>J.id==D.grupoId),T.tipo="GRUPO",f){case 1:T.username=T.name;break;case 2:T.name=T.name;break;case 3:T.nome=T.name}this.searchDestinatarios.unshift(T)}else if("ENTIDADE"==D.tipo){switch(T=this.entidades.find(J=>J.id==D.entidadeId),T.tipo="ENTIDADE",f){case 1:T.username=T.nome;break;case 2:T.name=T.nome;break;case 3:T.nome=T.nome}this.searchDestinatarios.unshift(T)}}),this.searchDestinatarios=this.searchDestinatarios?.filter((D,T,J)=>T===J.findIndex(K=>K.id===D.id))}changeSelectDestinatario(f){let l={},D=f?.value?.pop();switch(f?.value?.push(D),this.selectDestinatario){case 1:l={tipo:"UTILIZADOR",utilizadorId:D};break;case 2:l={tipo:"GRUPO",grupoId:D};break;case 3:l={tipo:"ENTIDADE",entidadeId:D}}let T=[],J=[];J=this.encaminharForm.get("encaminharDestinatario").value,T=this.encaminharForm.get("destinatario").value,T?.length>J?.length?(J.push(l),this.encaminharForm.patchValue({encaminharDestinatario:J})):T?.length<J?.length&&(J.pop(),this.encaminharForm.patchValue({registoDestinatario:J}))}filterDestinatarios(f){switch(this.selectDestinatario){case 1:this.searchDestinatarios=this.users.filter(l=>l.username.includes(f.target.value));break;case 2:this.searchDestinatarios=this.groups.filter(l=>l.name.includes(f.target.value));break;case 3:this.searchDestinatarios=this.entidades.filter(l=>l.nome.includes(f.target.value))}}createEncaminhamento(){this._encaminharAccaoService.create(this.encaminharForm.getRawValue()).subscribe({error:f=>{this.alert={type:"error",message:`${f.error}`},this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Documento encaminhado com successo!"},this._totalPendentesService.refresh(),this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alertMessage.emit(this.alert),this.encaminharForm.reset(),this.dialogRef.close(this.alert)}})}}F.\u0275fac=function(f){return new(f||F)(e.Y36(g.so),e.Y36(h.qu),e.Y36(g.WI),e.Y36(e.sBO),e.Y36(x.jm),e.Y36(c.b),e.Y36(o.z),e.Y36(n.f),e.Y36(i.MZ),e.Y36(a.H),e.Y36(s.V))},F.\u0275cmp=e.Xpm({type:F,selectors:[["encaminhar-accao-dialog-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:69,vars:15,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex","mt-2"],[1,"flex-auto","fuse-mat-dense"],["matInput","","formControlName","accao",1,"font-bold"],["matInput","","formControlName","assunto",1,"font-bold"],[1,"flex","flex-auto","flex-col"],[1,"text-lg","mb-2"],[1,"flex","w-full","justify-between","mb-1"],[1,"w-[34%]","border","cursor-pointer","dest-first",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer","dest-last",3,"ngClass","click"],["required","","multiple","","formControlName","destinatario",3,"selectionChange"],["placeholderLabel","Pesquisar destinat\xe1rio...",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex"],["matInput","","formControlName","mensagem","rows","3"],[1,"flex-auto","fuse-mat-dense","h-16"],["matInput","","formControlName","dataLimite","placeholder","Data Limite Resposta",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"flex-auto","pl-7"],["color","warn","formControlName","enviarEmail"],["color","warn","formControlName","receberNotificacao"],["color","warn","formControlName","accaoObrigatoriaTodos"],[1,"flex","justify-end","mt-5"],["mat-flat-button","","type","button",1,"px-8",3,"color","click"],[1,"ml-2","mr-1"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(f,l){if(1&f&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6,"Encaminhar c/ Ac\xe7\xe3o Pend\xeancia"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Encaminhar o documento "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.TgZ(14,"form",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),e._uU(18,"Ac\xe7\xe3o solicitada "),e.qZA(),e._UZ(19,"input",13),e.qZA(),e._uU(20," \xa0 \xa0 "),e.TgZ(21,"mat-form-field",12)(22,"mat-label"),e._uU(23,"Assunto"),e.qZA(),e._UZ(24,"input",14),e.qZA()(),e.TgZ(25,"div",15)(26,"span",16),e._uU(27,"Destinat\xe1rio"),e.qZA(),e.TgZ(28,"div",17)(29,"a",18),e.NdJ("click",function(){return l.changeDestinatario(1)}),e._uU(30,"Utilizadores"),e.qZA(),e.TgZ(31,"a",19),e.NdJ("click",function(){return l.changeDestinatario(2)}),e._uU(32,"Grupos"),e.qZA(),e.TgZ(33,"a",20),e.NdJ("click",function(){return l.changeDestinatario(3)}),e._uU(34,"Entidades"),e.qZA()(),e.TgZ(35,"mat-form-field",12)(36,"mat-select",21),e.NdJ("selectionChange",function(T){return l.changeSelectDestinatario(T)}),e.TgZ(37,"mat-option")(38,"ngx-mat-select-search",22),e.NdJ("input",function(T){return l.filterDestinatarios(T)}),e._UZ(39,"mat-icon",23),e.TgZ(40,"span",24),e._uU(41,"Op\xe7\xe3o n\xe3o encontrada2"),e.qZA()()(),e.YNc(42,R,5,5,"mat-option",25),e.qZA()()(),e.TgZ(43,"div",26)(44,"mat-form-field",12)(45,"mat-label"),e._uU(46,"Mensagem"),e.qZA(),e._UZ(47,"textarea",27),e.qZA()(),e.TgZ(48,"div",26)(49,"mat-form-field",28),e._UZ(50,"input",29)(51,"mat-datepicker-toggle",30)(52,"mat-datepicker",null,31),e.qZA(),e.TgZ(54,"div",32)(55,"mat-slide-toggle",33),e._uU(56,"Enviar e-mail"),e.qZA(),e._UZ(57,"br"),e.TgZ(58,"mat-slide-toggle",34),e._uU(59,"Receber notifica\xe7\xe3o"),e.qZA(),e._UZ(60,"br"),e.TgZ(61,"mat-slide-toggle",35),e._uU(62,"Obrigat\xf3ria para todos distinat\xe1rios"),e.qZA()()(),e.TgZ(63,"div",36)(64,"button",37),e.NdJ("click",function(){return l.createEncaminhamento()}),e.TgZ(65,"span",38),e._uU(66,"Encaminhar"),e.qZA(),e.TgZ(67,"mat-icon"),e._uU(68,"send"),e.qZA()()()()()()),2&f){const D=e.MAs(53);e.xp6(11),e.Q6J("matDialogClose",void 0),e.xp6(3),e.Q6J("formGroup",l.encaminharForm),e.xp6(15),e.Q6J("ngClass",e.VKq(9,N,1==l.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,N,2==l.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,N,3==l.selectDestinatario)),e.xp6(9),e.Q6J("ngForOf",l.searchDestinatarios),e.xp6(8),e.Q6J("matDatepicker",D),e.xp6(1),e.Q6J("for",D),e.xp6(13),e.Q6J("color","primary")}},dependencies:[u.mk,u.sg,u.RF,u.n9,m.ey,Z.lW,Z.RK,I.KE,I.hX,I.R9,P.Hw,j.Nt,G.gD,z.nu,z.C0,V.Rr,Q.Mq,Q.hl,Q.nW,g.ZT,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.sg,h.u],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel{width:32rem}}.fuse-confirmation-dialog-panel .mat-dialog-container{padding:0!important}.fuse-confirmation-dialog-panel .mat-dialog-container .mat-success{background-color:green;color:#fff}.fuse-confirmation-dialog-panel .mat-dialog-container .mat-form-field+.mat-form-field{margin-left:8px}.mat-dialog-container{border-radius:5px!important}.btn-file{width:48%}\n"],encapsulation:2,changeDetection:0});var Y=r(1135),W=r(2340),ee=r(529);class X{constructor(f){this._httpClient=f,this._encaminhamentos=new Y.X(null),this._encaminhamento=new Y.X(null)}get encaminhamentos$(){return this._encaminhamentos.asObservable()}get encaminhamento$(){return this._encaminhamento.asObservable()}create(f){return this._httpClient.post(W.N.URL_ROOT_API+"/encaminhamentos-externo",f)}update(f){return this._httpClient.put(W.N.URL_ROOT_API+"/encaminhamentos",f)}updateAccao(f){return this._httpClient.put(W.N.URL_ROOT_API+"/encaminhamentos-accao",f)}getEncaminhamentos(f){return this._httpClient.get(W.N.URL_ROOT_API+"/encaminhamentos",{params:f})}}X.\u0275fac=function(f){return new(f||X)(e.LFG(ee.eN))},X.\u0275prov=e.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"});class ${constructor(f,l,D,T,J,K,ne,ae,te,re,le){this.dialogRef=f,this.fb=l,this.data=D,this._formBuilder=T,this._changeDetectorRef=J,this._fuseAlertService=K,this._entidadeService=ne,this._drawerService=ae,this._userService=te,this._keycloakService=re,this._encaminharAccaoExternoService=le,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.encaminharForm=new h.cw({nome:new h.NI(0),versao:new h.NI(""),observacao:new h.NI("")}),this.selectDestinatario=1}ngOnInit(){console.log(this.data),this.encaminharForm=this.fb.group({utilizadorId:new h.NI,registoId:new h.NI(this.data?.id),assunto:new h.NI(this.data?.assunto),mensagem:new h.NI("Envio para a vossa valida\xe7\xe3o a(o) seguinte "+this.data?.tipo.nome+" \n\n Melhores comprimentos."),to:new h.NI(""),cc:new h.NI,bcc:new h.NI}),this.getUser()}getUser(){var f=this;return(0,t.Z)(function*(){f.user=yield f._keycloakService.loadUserProfile(),f.encaminharForm.patchValue({utilizadorId:f.user?.id})})()}onNoClick(){this.dialogRef.close()}createEncaminhamento(){console.log(this.encaminharForm.getRawValue()),this._encaminharAccaoExternoService.create(this.encaminharForm.getRawValue()).subscribe({error:f=>{this.alert={type:"error",message:`${f.error}`},this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alertMessage.emit(this.alert)},complete:()=>{this.alert={type:"success",message:"Documento encaminhado com successo!"},this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alertMessage.emit(this.alert),this.encaminharForm.reset(),this.dialogRef.close(this.alert)}})}}$.\u0275fac=function(f){return new(f||$)(e.Y36(g.so),e.Y36(h.qu),e.Y36(g.WI),e.Y36(h.QS),e.Y36(e.sBO),e.Y36(x.jm),e.Y36(c.b),e.Y36(o.z),e.Y36(n.f),e.Y36(i.MZ),e.Y36(X))},$.\u0275cmp=e.Xpm({type:$,selectors:[["encaminhar-externo-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:45,vars:3,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex","mt-2"],[1,"flex-auto"],["matInput","","formControlName","assunto",1,"font-bold"],[1,"flex"],["matInput","","formControlName","mensagem","rows","3"],["matInput","","formControlName","to"],[1,"flex-auto","mr-1"],["matInput","","formControlName","cc"],[1,"flex-auto","ml-1"],["matInput","","formControlName","bcc"],[1,"flex","justify-end","mt-2"],["mat-flat-button","","type","button",1,"px-8",3,"color","click"],[1,"ml-2","mr-1"]],template:function(f,l){1&f&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6,"Encaminhar p/ o Exterior"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Encaminhar o documento para o exterior "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.TgZ(14,"form",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),e._uU(18,"Assunto"),e.qZA(),e._UZ(19,"input",13),e.qZA()(),e.TgZ(20,"div",14)(21,"mat-form-field",12)(22,"mat-label"),e._uU(23,"Mensagem"),e.qZA(),e._UZ(24,"textarea",15),e.qZA()(),e.TgZ(25,"div",14)(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Enviar para"),e.qZA(),e._UZ(29,"input",16),e.qZA()(),e.TgZ(30,"div",14)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Cc"),e.qZA(),e._UZ(34,"input",18),e.qZA(),e.TgZ(35,"mat-form-field",19)(36,"mat-label"),e._uU(37,"Bcc"),e.qZA(),e._UZ(38,"input",20),e.qZA()(),e.TgZ(39,"div",21)(40,"button",22),e.NdJ("click",function(){return l.createEncaminhamento()}),e.TgZ(41,"span",23),e._uU(42,"Encaminhar"),e.qZA(),e.TgZ(43,"mat-icon"),e._uU(44,"send"),e.qZA()()()()()()),2&f&&(e.xp6(11),e.Q6J("matDialogClose",void 0),e.xp6(3),e.Q6J("formGroup",l.encaminharForm),e.xp6(26),e.Q6J("color","primary"))},dependencies:[Z.lW,Z.RK,I.KE,I.hX,P.Hw,j.Nt,g.ZT,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel{width:32rem}}.fuse-confirmation-dialog-panel .mat-dialog-container{padding:0!important}.fuse-confirmation-dialog-panel .mat-dialog-container .mat-success{background-color:green;color:#fff}.fuse-confirmation-dialog-panel .mat-dialog-container .mat-form-field+.mat-form-field{margin-left:8px}.mat-dialog-container{border-radius:5px!important}.btn-file{width:48%}\n"],encapsulation:2,changeDetection:0});var L=r(2534),O=r(6189);function p(U,f){if(1&U&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&U){const l=f.$implicit;e.s9C("value",l.id),e.Q6J("value",l.id),e.xp6(1),e.hij(" ",l.nome," ")}}function E(U,f){if(1&U&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&U){const l=f.$implicit;e.s9C("value",l.template.id),e.Q6J("value",l.template.id),e.xp6(1),e.hij(" ",l.template.nome," ")}}class S{constructor(f,l,D,T,J,K,ne,ae){this.dialogRef=f,this.fb=l,this.data=D,this._formBuilder=T,this._changeDetectorRef=J,this._fuseAlertService=K,this._anexosService=ne,this._tipoDocumentoService=ae,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.anexoForm=new h.cw({tipoId:new h.NI,templateId:new h.NI,registoId:new h.NI,documentoId:new h.NI})}ngOnInit(){this.anexoForm=this.fb.group({tipoId:new h.NI(0),templateId:new h.NI,registoId:this.data?.registoId,documentoId:this.data?.documentoId}),this.getTipos()}getTipos(){this._tipoDocumentoService.getTipoDocumentos(this._tipoDocumentoService.getTipoDocumentosDefaultParams).subscribe(f=>{this.tipoDocumentos=f.data,this.searchTipoDocumentos=this.tipoDocumentos})}onNoClick(){this.dialogRef.close()}updateMetadados(f){const l={next:D=>{this.alert={type:"success",message:"Template adicionado aos anexos com successo!"},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,template:D})},error:D=>{this.alert={type:"error",message:`${D.message}`},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,template:null})}};this._anexosService.addTemplateAnexo(f).subscribe(l)}save(){}filterTipoDocumentosTemplates(f){this.searchTipoDocumentosTemplates=this.tipoDocumentosTemplates.filter(l=>l.nome.includes(f.target.value))}filterTipoDocumentos(f){this.searchTipoDocumentos=this.tipoDocumentos.filter(l=>l.nome.includes(f.target.value))}filterTipo(f){let l=this.tipoDocumentos.find(D=>D.id==f);this.tipoDocumentosTemplates=l.tipo_templates,this.searchTipoDocumentosTemplates=l.tipo_templates}}S.\u0275fac=function(f){return new(f||S)(e.Y36(g.so),e.Y36(h.qu),e.Y36(g.WI),e.Y36(h.QS),e.Y36(e.sBO),e.Y36(x.jm),e.Y36(L.d),e.Y36(O.D))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-anexo-add-template-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:42,vars:7,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex","mt-2"],[1,"flex-auto"],["formControlName","tipoId","required","",3,"selectionChange"],["placeholderLabel","Pesquisar a tipo de documento..",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex"],["formControlName","templateId"],[1,"flex","justify-end","mt-5"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[3,"value"]],template:function(f,l){1&f&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6," Adicionar Template"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Formul\xe1rio para adicionar template como anexo "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.TgZ(14,"form",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),e._uU(18,"Tipo de Documento"),e.qZA(),e.TgZ(19,"mat-select",13),e.NdJ("selectionChange",function(T){return l.filterTipo(T.value)}),e.TgZ(20,"mat-option")(21,"ngx-mat-select-search",14),e.NdJ("input",function(T){return l.filterTipoDocumentos(T)}),e._UZ(22,"mat-icon",15),e.TgZ(23,"span",16),e._uU(24,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(25,p,2,3,"mat-option",17),e.qZA()()(),e.TgZ(26,"div",18)(27,"mat-form-field",12)(28,"mat-label"),e._uU(29,"Template"),e.qZA(),e.TgZ(30,"mat-select",19)(31,"mat-option")(32,"ngx-mat-select-search",14),e.NdJ("input",function(T){return l.filterTipoDocumentosTemplates(T)}),e._UZ(33,"mat-icon",15),e.TgZ(34,"span",16),e._uU(35,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(36,E,2,3,"mat-option",17),e.qZA()()(),e.TgZ(37,"div",20)(38,"button",21),e.NdJ("click",function(){return l.updateMetadados(l.anexoForm.value)}),e._UZ(39,"mat-icon",22),e.TgZ(40,"span",23),e._uU(41,"Salvar"),e.qZA()()()()()()),2&f&&(e.xp6(11),e.Q6J("matDialogClose",void 0),e.xp6(3),e.Q6J("formGroup",l.anexoForm),e.xp6(11),e.Q6J("ngForOf",l.searchTipoDocumentos),e.xp6(11),e.Q6J("ngForOf",l.searchTipoDocumentosTemplates),e.xp6(2),e.Q6J("color","primary")("disabled",l.anexoForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil-alt"))},dependencies:[u.sg,m.ey,Z.lW,Z.RK,I.KE,I.hX,P.Hw,G.gD,z.nu,z.C0,g.ZT,h._Y,h.JJ,h.JL,h.Q7,h.sg,h.u],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]});var w=r(7751);function A(U,f){if(1&U&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&U){const l=f.$implicit;e.s9C("value",l.id),e.Q6J("value",l.id),e.xp6(1),e.hij(" ",l.nome," ")}}class y{constructor(f,l,D,T,J,K,ne){this.dialogRef=f,this.fb=l,this.data=D,this._formBuilder=T,this._changeDetectorRef=J,this._fuseAlertService=K,this._documentoService=ne,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.updateForm=new h.cw({estadoId:new h.NI(0)})}ngOnInit(){this.updateForm=this.fb.group({id:this.data?.id,estadoId:new h.NI(this.data?.estadoId,[h.kI.required])}),this.getEstados()}onNoClick(){this.dialogRef.close()}updateEstado(f){const l={next:D=>{this.alert={type:"success",message:"Estado do actualizado com successo!"},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,registo:D})},error:D=>{this.alert={type:"error",message:`${D.message}`},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,registo:null})}};this._documentoService.updateEstado(f).subscribe(l)}getEstados(){this._documentoService.getAllEstados().subscribe(f=>{this.estados=f.data,this.searchEstados=f.data})}filterEstados(f){this.searchEstados=this.estados.filter(l=>l.nome.toLowerCase().includes(f.target.value.toLowerCase()))}save(){}}y.\u0275fac=function(f){return new(f||y)(e.Y36(g.so),e.Y36(h.qu),e.Y36(g.WI),e.Y36(h.QS),e.Y36(e.sBO),e.Y36(x.jm),e.Y36(w.c))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-estado-update-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:32,vars:6,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden",3,"formGroup"],[1,"flex"],[1,"flex-auto","fuse-mat-dense"],["formControlName","estadoId"],["singleSelect",""],["placeholderLabel","Pesquisar o estado...",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-2"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[3,"value"]],template:function(f,l){1&f&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6," Alterar Estado"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Formul\xe1rio para altera\xe7\xe3o do esatdo "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.TgZ(14,"form",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),e._uU(18,"Estado"),e.qZA(),e.TgZ(19,"mat-select",13,14)(21,"mat-option")(22,"ngx-mat-select-search",15),e.NdJ("input",function(T){return l.filterEstados(T)}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(26,A,2,3,"mat-option",18),e.qZA()()(),e.TgZ(27,"div",19)(28,"button",20),e.NdJ("click",function(){return l.updateEstado(l.updateForm.value)}),e._UZ(29,"mat-icon",21),e.TgZ(30,"span",22),e._uU(31,"Salvar"),e.qZA()()()()()()),2&f&&(e.xp6(11),e.Q6J("matDialogClose",void 0),e.xp6(3),e.Q6J("formGroup",l.updateForm),e.xp6(12),e.Q6J("ngForOf",l.searchEstados),e.xp6(2),e.Q6J("color","primary")("disabled",l.updateForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil-alt"))},dependencies:[u.sg,m.ey,Z.lW,Z.RK,I.KE,I.hX,P.Hw,G.gD,z.nu,z.C0,g.ZT,h._Y,h.JJ,h.JL,h.sg,h.u],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]});var q=r(6308);function H(U,f){1&U&&e.GkF(0)}function oe(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.username," ")}}function ie(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.name," ")}}function se(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.nome," ")}}function ce(U,f){if(1&U&&(e.TgZ(0,"mat-option",27)(1,"div",38),e.YNc(2,oe,2,1,"span",39),e.YNc(3,ie,2,1,"span",39),e.YNc(4,se,2,1,"span",39),e.qZA()()),2&U){const l=f.$implicit,D=e.oxw(2);e.Q6J("value",l.id),e.xp6(1),e.Q6J("ngSwitch",D.selectDestinatario),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function fe(U,f){if(1&U){const l=e.EpF();e.TgZ(0,"mat-select",35),e.NdJ("selectionChange",function(T){e.CHM(l);const J=e.oxw();return e.KtG(J.changeSelectDestinatario(T))}),e.TgZ(1,"mat-option")(2,"ngx-mat-select-search",36),e.NdJ("input",function(T){e.CHM(l);const J=e.oxw();return e.KtG(J.filterDestinatarios(T))}),e._UZ(3,"mat-icon",25),e.TgZ(4,"span",26),e._uU(5,"Op\xe7\xe3o n\xe3o encontrada2"),e.qZA()()(),e.YNc(6,ce,5,5,"mat-option",37),e.qZA()}if(2&U){const l=e.oxw();e.xp6(6),e.Q6J("ngForOf",l.searchDestinatarios)}}function pe(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.username," ")}}function _e(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.name," ")}}function ve(U,f){if(1&U&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&U){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.nome," ")}}function xe(U,f){if(1&U&&(e.TgZ(0,"mat-option",27)(1,"div",38),e.YNc(2,pe,2,1,"span",39),e.YNc(3,_e,2,1,"span",39),e.YNc(4,ve,2,1,"span",39),e.qZA()()),2&U){const l=f.$implicit,D=e.oxw(2);e.Q6J("value",l.id),e.xp6(1),e.Q6J("ngSwitch",D.selectDestinatario),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function Ae(U,f){if(1&U){const l=e.EpF();e.TgZ(0,"mat-select",40),e.NdJ("selectionChange",function(T){e.CHM(l);const J=e.oxw();return e.KtG(J.changeSelectDestinatario(T))}),e.TgZ(1,"mat-option")(2,"ngx-mat-select-search",36),e.NdJ("input",function(T){e.CHM(l);const J=e.oxw();return e.KtG(J.filterDestinatarios(T))}),e._UZ(3,"mat-icon",25),e.TgZ(4,"span",26),e._uU(5,"Op\xe7\xe3o n\xe3o encontrada3"),e.qZA()()(),e.YNc(6,xe,5,5,"mat-option",37),e.qZA()}if(2&U){const l=e.oxw();e.Q6J("compareWith",l.compareFunctionObject),e.xp6(6),e.Q6J("ngForOf",l.searchDestinatarios)}}function be(U,f){if(1&U){const l=e.EpF();e.TgZ(0,"tr",45)(1,"td",43),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e._uU(6),e.qZA(),e.TgZ(7,"td",46)(8,"button",47),e.NdJ("click",function(){const J=e.CHM(l).$implicit,K=e.oxw(2);return e.KtG(K.deleteUtilizadorPermissoes(J.id))}),e._UZ(9,"mat-icon",48),e.qZA()()()}if(2&U){const l=f.$implicit,D=f.index,T=e.oxw(2);e.xp6(2),e.Oqu(D+1),e.xp6(2),e.Oqu(T.showPermissaoString(l)),e.xp6(2),e.Oqu(l.permissoes),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:trash")}}function Ee(U,f){if(1&U&&(e.ynx(0),e.TgZ(1,"table",41)(2,"tr",42)(3,"td",43),e._uU(4,"Nr. Ord"),e.qZA(),e.TgZ(5,"td",43),e._uU(6,"Utilizador, Grupo ou Entidade"),e.qZA(),e.TgZ(7,"td",43),e._uU(8,"Permiss\xf5es"),e.qZA(),e.TgZ(9,"td",43),e._uU(10,"Ac\xe7\xe3o"),e.qZA()(),e.YNc(11,be,10,4,"tr",44),e.qZA(),e.BQk()),2&U){const l=e.oxw();e.xp6(11),e.Q6J("ngForOf",l.registoPermissoes)}}function Te(U,f){1&U&&(e.TgZ(0,"div",49),e._UZ(1,"mat-icon",50),e.TgZ(2,"div",51),e._uU(3," N\xe3o h\xe1 Permiss\xf5es Cadastradas "),e.qZA()()),2&U&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:clipboard-list"))}const me=function(U){return{"text-primary":U}};class ue{constructor(f,l,D,T,J,K,ne,ae,te,re){this.dialogRef=f,this.fb=l,this.data=D,this._formBuilder=T,this._changeDetectorRef=J,this._fuseAlertService=K,this._documentoService=ne,this._entidadeService=ae,this._userService=te,this._keycloakService=re,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.permissaoForm=new h.cw({registoUtilizadores:new h.NI([]),permissoes:new h.NI}),this.selectDestinatario=1}ngOnInit(){this.permissaoForm=this.fb.group({registoId:this.data?.id,destinatario:new h.NI(""),registoUtilizadores:new h.NI([]),permissoes:new h.NI}),this.getEntidades(),this.getUser(),this.getUsers(),this.getGroups(),this.getRegistoPermissoes()}getEntidades(){this._entidadeService.getEntidades(this._entidadeService.getEntidadeDefaultParams).subscribe(f=>{this.entidades=f.data})}getUsers(){this._userService.users$.subscribe(f=>{this.users=f,this.searchDestinatarios=f})}getGroups(){this._userService.groups$.subscribe(f=>{this.groups=f})}getUser(){var f=this;return(0,t.Z)(function*(){f.user=yield f._keycloakService.loadUserProfile()})()}changeDestinatario(f){switch(this.selectDestinatario=f,f){case 1:this.searchDestinatarios=this.users;break;case 2:this.searchDestinatarios=this.groups;break;case 3:this.searchDestinatarios=this.entidades}let l=[];l=this.permissaoForm.get("registoUtilizadores").value,l.map(D=>{let T={};if("UTILIZADOR"==D.tipo){switch(T=this.users.find(J=>J.id==D.utilizadorId),T.tipo="UTILIZADOR",f){case 1:T.username=T.username;break;case 2:T.name=T.username;break;case 3:T.nome=T.username}this.searchDestinatarios.unshift(T)}else if("GRUPO"==D.tipo){switch(T=this.groups.find(J=>J.id==D.grupoId),T.tipo="GRUPO",f){case 1:T.username=T.name;break;case 2:T.name=T.name;break;case 3:T.nome=T.name}this.searchDestinatarios.unshift(T)}else if("ENTIDADE"==D.tipo){switch(T=this.entidades.find(J=>J.id==D.entidadeId),T.tipo="ENTIDADE",f){case 1:T.username=T.nome;break;case 2:T.name=T.nome;break;case 3:T.nome=T.nome}this.searchDestinatarios.unshift(T)}}),this.searchDestinatarios=this.searchDestinatarios?.filter((D,T,J)=>T===J.findIndex(K=>K.id===D.id))}changeSelectDestinatario(f){let l={},D=f?.value?.pop();switch(f?.value?.push(D),this.selectDestinatario){case 1:l={tipo:"UTILIZADOR",utilizadorId:D};break;case 2:l={tipo:"GRUPO",grupoId:D};break;case 3:l={tipo:"ENTIDADE",entidadeId:D}}let T=[],J=[];J=this.permissaoForm.get("registoUtilizadores").value,T=this.permissaoForm.get("destinatario").value,T?.length>J?.length?(J.push(l),this.permissaoForm.patchValue({registoUtilizadores:J})):T?.length<J?.length&&(J.pop(),this.permissaoForm.patchValue({registoUtilizadores:J}))}onNoClick(){this.dialogRef.close()}savePermissoes(f){const l={next:D=>{this.alert={type:"success",message:"Estado do actualizado com successo!"},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,registo:D})},error:D=>{this.alert={type:"error",message:`${D.message}`},this._fuseAlertService.show("alertBoxAnexo"),this.dialogRef.close({alert:this.alert,registo:null})}};this._documentoService.savePermissoes(f).subscribe(l)}getRegistoPermissoes(){this._documentoService.getAllRegistoPermissoes(this.data?.id).subscribe(f=>{this.registoPermissoes=f.data})}showPermissaoString(f){var l=null;return f.tipo==_.H.UTILIZADOR?l=f.utilizador.name:f.tipo==_.H.ENTIDADE?l=f.entidade.nome:f.tipo==_.H.GRUPO&&(l=this.showRemententeGroupName(f?.grupoId).toString()),l}showRemententeGroupName(f){return this.data?.groupsList?.filter(l=>l.id==f).map(l=>l.name).toString()}deleteUtilizadorPermissoes(f){this._documentoService.deleteUtilizadorPermissoes(f).subscribe({error:l=>{this.alert={type:"error",message:`${l.error.message}`},this._fuseAlertService.show("alertBoxUsers"),this.alertMessage.emit(this.alert)},complete:()=>{this.getRegistoPermissoes(),this._changeDetectorRef.markForCheck()}})}}ue.\u0275fac=function(f){return new(f||ue)(e.Y36(g.so),e.Y36(h.qu),e.Y36(g.WI),e.Y36(h.QS),e.Y36(e.sBO),e.Y36(x.jm),e.Y36(w.c),e.Y36(c.b),e.Y36(n.f),e.Y36(i.MZ))},ue.\u0275cmp=e.Xpm({type:ue,selectors:[["app-permissao-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:65,vars:26,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],[1,"px-6","pt-4","rounded","overflow-hidden",3,"formGroup"],[1,"flex"],[1,"w-[60%]"],[1,"flex","flex-auto","flex-col"],[1,"flex","w-full","justify-between","mb-1"],[1,"w-[34%]","border","cursor-pointer","dest-first",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer","dest-last",3,"ngClass","click"],[1,"flex-auto"],[4,"ngIf","ngIfThen","ngIfElse"],["newDestinatarios",""],["updateDestinatarios",""],[1,"flex","flex-auto","flex-col","ml-2"],["formControlName","permissoes","multiple",""],["placeholderLabel","Pesquisar o Scanner"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value"],[1,"flex","justify-end"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto","px-6","mt-4"],[4,"ngIf"],["noDocumentos",""],["multiple","","formControlName","destinatario",3,"selectionChange"],["placeholderLabel","Pesquisar destinat\xe1rio...",3,"input"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["multiple","","formControlName","destinatario",3,"compareWith","selectionChange"],["matSort","",1,"w-full"],[1,"sticky","top-0","h-10","shadow","text-sm","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"px-1"],["class","h-10 border-b text-secondary text-sm",4,"ngFor","ngForOf"],[1,"h-10","border-b","text-secondary","text-sm"],[1,"flex","justify-left","items-center","pt-2"],[3,"click"],[1,"scale-[.75]","rounded","pt-1",3,"svgIcon"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(f,l){if(1&f&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6," Permiss\xf5es"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Formul\xe1rio para altera\xe7\xe3o as permiss\xf5es "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.TgZ(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),e.NdJ("click",function(){return l.changeDestinatario(1)}),e._uU(20,"Utilizadores"),e.qZA(),e.TgZ(21,"a",16),e.NdJ("click",function(){return l.changeDestinatario(2)}),e._uU(22,"Grupos"),e.qZA(),e.TgZ(23,"a",17),e.NdJ("click",function(){return l.changeDestinatario(3)}),e._uU(24,"Entidades"),e.qZA()(),e.TgZ(25,"mat-form-field",18),e.YNc(26,H,1,0,"ng-container",19),e.YNc(27,fe,7,1,"ng-template",null,20,e.W1O),e.YNc(29,Ae,7,2,"ng-template",null,21,e.W1O),e.qZA()()(),e.TgZ(31,"mat-form-field",22)(32,"mat-label"),e._uU(33,"Permiss\xf5es"),e.qZA(),e.TgZ(34,"mat-select",23)(35,"mat-option")(36,"ngx-mat-select-search",24),e._UZ(37,"mat-icon",25),e.TgZ(38,"span",26),e._uU(39,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.TgZ(40,"mat-option",27),e._uU(41,"Todas"),e.qZA(),e.TgZ(42,"mat-option",27),e._uU(43,"Visualizar"),e.qZA(),e.TgZ(44,"mat-option",27),e._uU(45,"Editar"),e.qZA(),e.TgZ(46,"mat-option",27),e._uU(47,"Excluir"),e.qZA(),e.TgZ(48,"mat-option",27),e._uU(49,"Encaminhar Internamente"),e.qZA(),e.TgZ(50,"mat-option",27),e._uU(51,"Encaminhar Externamnete"),e.qZA(),e.TgZ(52,"mat-option",27),e._uU(53,"Baixar Anexos"),e.qZA(),e.TgZ(54,"mat-option",27),e._uU(55,"Assinaturas"),e.qZA()()()(),e.TgZ(56,"div",28)(57,"button",29),e.NdJ("click",function(){return l.savePermissoes(l.permissaoForm.value)}),e._UZ(58,"mat-icon",30),e.TgZ(59,"span",31),e._uU(60,"ADICIONAR"),e.qZA()()()(),e.TgZ(61,"div",32),e.YNc(62,Ee,12,1,"ng-container",33),e.YNc(63,Te,4,1,"ng-template",null,34,e.W1O),e.qZA()()()),2&f){const D=e.MAs(28),T=e.MAs(30);e.xp6(11),e.Q6J("matDialogClose",void 0),e.xp6(3),e.Q6J("formGroup",l.permissaoForm),e.xp6(5),e.Q6J("ngClass",e.VKq(20,me,1==l.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(22,me,2==l.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(24,me,3==l.selectDestinatario)),e.xp6(3),e.Q6J("ngIf",!0)("ngIfThen",D)("ngIfElse",T),e.xp6(14),e.Q6J("value","Todas"),e.xp6(2),e.Q6J("value","Visualizar"),e.xp6(2),e.Q6J("value","Editar"),e.xp6(2),e.Q6J("value","Excluir"),e.xp6(2),e.Q6J("value","Encaminhar Internamente"),e.xp6(2),e.Q6J("value","Encaminhar Externamnete"),e.xp6(2),e.Q6J("value","Baixar Anexos"),e.xp6(2),e.Q6J("value","Assinaturas"),e.xp6(3),e.Q6J("color","primary")("disabled",l.permissaoForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(4),e.Q6J("ngIf",!0)}},dependencies:[u.mk,u.sg,u.O5,u.RF,u.n9,m.ey,Z.lW,Z.RK,I.KE,I.hX,P.Hw,G.gD,z.nu,z.C0,g.ZT,h._Y,h.JJ,h.JL,h.sg,h.u,q.YE],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]});var ye=r(7243),Oe=r.n(ye),Ze=r(9299),De=r(7490),Ce=r(7401),he=r(8255),we=r(8214);function Ie(U,f){if(1&U&&(e.TgZ(0,"fuse-alert",41),e._UZ(1,"div",42),e.qZA()),2&U){const l=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxEncaminhamentos")("type",null==l.alert?null:l.alert.type)("@shake","error"===(null==l.alert?null:l.alert.type)),e.xp6(1),e.Q6J("innerHTML",l.alert.message,e.oJD)}}function Ue(U,f){if(1&U){const l=e.EpF();e.TgZ(0,"div",23)(1,"div",43)(2,"div",44)(3,"mat-icon"),e._uU(4,"warning"),e.qZA()(),e.TgZ(5,"div",45)(6,"span"),e._uU(7),e.TgZ(8,"span",46),e.NdJ("click",function(){e.CHM(l);const T=e.oxw();return e.KtG(T.tabDocumentoChange(1))}),e._uU(9,"Clique aqui"),e.qZA(),e._uU(10," para responder."),e.qZA()()()()}if(2&U){const l=e.oxw();e.xp6(7),e.hij(" ",l.circulacaoPendenteMessage," ")}}function Pe(U,f){if(1&U&&(e.TgZ(0,"tr")(1,"th",31),e._uU(2),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA()()),2&U){const l=f.$implicit;e.xp6(2),e.Oqu(l.atributo.label),e.xp6(2),e.Oqu(l.valor)}}class de{constructor(f,l,D,T,J,K,ne,ae,te,re){this._changeDetectorRef=f,this._router=l,this.dialog=D,this._userService=T,this._entidadeService=J,this._fuseAlertService=K,this._anexosService=ne,this._entradasService=ae,this._keycloakService=te,this._fuseConfirmationService=re,this.documentRefreshEmmit=new e.vpe,this.circulacaoPendenteEmmit=new e.vpe,this.showAlert=!1,this.alert={type:"success",message:""},this.hideProtocolo=!0,this.firstInit=!0}ngAfterViewInit(){this.firstInit=!1,this.carregarProtocolo()}ngOnInit(){this.anexosSelecionados=[],this.getUser(),this.setupEncaminhamentos()}calcPx2MmFactor(){let f=document.createElement("div");f.style.position="absolute",f.style.width="100mm",document.body.appendChild(f);let l=f.getBoundingClientRect();return document.body.removeChild(f),l.width/100}carregarProtocolo(){if("ENTRADA"==this.registoDetail.registoTipo&&""!=this.registoDetail.protocolo&&null!=this.registoDetail.protocolo){let f=this.registoDetail.protocolo;this.hideProtocolo=!1,this._changeDetectorRef.markForCheck(),Oe()("#barcode",f,{format:"code39",height:40,width:2,text:f,font:"helvetica",fontSize:14,lineColor:"#64748b",textAlign:"left",marginTop:-10})}else this.hideProtocolo=!0}getUser(){var f=this;return(0,t.Z)(function*(){f.user=yield f._keycloakService.loadUserProfile()})()}setupEncaminhamentos(){this.encaminhamentos=this.registoDetail?.encaminhamentos.filter(f=>f.destinatarios.length>0),this.circulacaoPendenteMessage=1==this.encaminhamentos.length?"Tens uma circula\xe7\xe3o pendente de resposta neste documento.":"Tens "+this.encaminhamentos.length+" circula\xe7\xf5es pendentes de resposta neste documento."}ngOnChanges(f){this.anexosSelecionados=this._anexosService.anexosSelecionados,this.encaminhamentos=this.registoDetail?.encaminhamentos.filter(l=>l.destinatarios.length>0),this.firstInit||this.carregarProtocolo(),this._changeDetectorRef.markForCheck()}showRemententeGroupName(f){return this.groupsList?.filter(l=>l.id==f).map(l=>l.name).toString()}showDestinatariosString(f){var l=f.filter(D=>D.tipo==_.H.ENTIDADE).map(D=>D.entidade.nome).toString();return l+=f.filter(D=>D.tipo==_.H.UTILIZADOR).map(D=>(""!=l?", ":"")+D.utilizador.name).toString(),l+=f.filter(D=>D.tipo==_.H.GRUPO).map(D=>(""!=l?", ":"")+this.showRemententeGroupName(D?.grupoId)).toString()}editRegisto(){this._router.navigate(["registo/entradas/edit",this.registoDetail.id])}getCustomBadgeClass(f){var l="text-blue-800 bg-blue-100";return"NOVO"==f?l="text-green-800 bg-green-100":"EM ELABORA\xc7\xc3O"==f?l="text-blue-800 bg-blue-100":"ARQUIVADO"==f?l="text-yellow-800 bg-yellow-100":"CONCLU\xcdDO"==f&&(l="text-gray-800 bg-gray-100"),l}openEncaminharAccaoDialog(f,l){this._userService.getUsers(this._userService.getUserDefaultParams).subscribe(),this._entidadeService.getEntidades(this._entidadeService.getEntidadeDefaultParams).subscribe(),this.dialog.open(F,{data:{registo:f,accaoSolicitada:l}}).updateSize("580px","650px").afterClosed().subscribe(T=>{null!=T&&(this.alert=T,this.showAlert=!0,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEncaminhamentos"),this._changeDetectorRef.markForCheck()},15e3))})}openEncaminharExterioroDialog(f){this.dialog.open($,{data:f}).updateSize("550px","610px").afterClosed().subscribe(D=>{})}assinarFicheiroDialog(){this.dialog.open(b.z).updateSize("700px","530px").afterClosed().subscribe(l=>{})}updateEstadoOpenDialog(){this.dialog.open(y,{data:{id:this.registoDetail.id,estadoId:this.registoDetail.estadoId}}).updateSize("400px","260px").afterClosed().subscribe(l=>{null!=l&&(this.documentRefresh(),this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alert=l.alert,this.showAlert=!0,setTimeout(()=>{this.showAlert=!1,this._fuseAlertService.dismiss("alertBoxEncaminhamentos")},5e3))})}permissaoOpenDialog(){this.dialog.open(ue,{data:{id:this.registoDetail.id,estadoId:this.registoDetail.estadoId,groupsList:this.groupsList}}).updateSize("800px","500px").afterClosed().subscribe(l=>{null!=l&&(this.documentRefresh(),this._fuseAlertService.show("alertBoxEncaminhamentos"),this.alert=l.alert,this.showAlert=!0,setTimeout(()=>{this.showAlert=!1,this._fuseAlertService.dismiss("alertBoxEncaminhamentos")},5e3))})}converterAnexoSelecionados(f){var l=Array();this.anexosSelecionados=this._anexosService.anexosSelecionados,this.anexosSelecionados.filter(D=>1==D.selecionado).forEach(D=>{l.push(D.id)}),this._anexosService.converterAnexos({anexos:l}).subscribe(D=>{setTimeout(()=>{this.documentRefresh(),f.scrollIntoView({behavior:"smooth"})},1e3)})}deleteAnexoSelecionados(f){var l=Array();this.anexosSelecionados=this._anexosService.anexosSelecionados,this.anexosSelecionados.filter(T=>1==T.selecionado).forEach(T=>{l.push(T.id)}),this._fuseConfirmationService.open({title:"Remover Anexo",message:"Tem certeza que queres remover este anexo? Essa ac\xe7\xe3o n\xe3o pode ser desfeita.",actions:{confirm:{label:"Remover"},cancel:{label:"Cancelar"}}}).afterClosed().subscribe(T=>{if("confirmed"===T){const J={next:()=>{setTimeout(()=>{this.documentRefresh(),f.scrollIntoView({behavior:"smooth"})},1e3)}};this._anexosService.deleteAnexos({anexos:l}).subscribe(J)}})}documentRefresh(){this._entradasService.getEntradaDetailsRefresh(this.registoDetail.id).subscribe(f=>{this.registoDetail=f.data,this.setupEncaminhamentos(),this.documentRefreshEmmit.emit(this.registoDetail),this._changeDetectorRef.markForCheck()})}tabDocumentoChange(f){this.circulacaoPendenteEmmit.emit(f)}onFileSelected(f,l){var D=this;return(0,t.Z)(function*(){l.scrollIntoView({behavior:"smooth"}),console.log(f.target.files);const T=f.target.files;new Array;const K=Array.from(T).map(te=>new Promise(re=>{const le=new FileReader;le.readAsDataURL(te),le.onload=()=>{const Se=le.result,ge=te.name,Re=te.size,Me=ge.split(".").pop();re({file:Se,name:ge.substring(0,te.name.lastIndexOf(".")),size:Re,extension:"."+Me})}}));let ae={anexos:yield Promise.all(K),registoId:D.registoDetail.id,numeroDocumento:D.registoDetail.documento.numeroDocumento,tipo:D.registoDetail.tipo.nome,username:D.user?.username};D._anexosService.uploadAnexos(ae).subscribe(te=>{D.documentRefresh()})})()}openAddTemplateDialog(f){this.dialog.open(S,{data:{registoId:this.registoDetail.id,documentoId:this.registoDetail.documento.id}}).updateSize("500px","400px").afterClosed().subscribe(D=>{null!=D&&setTimeout(()=>{this.documentRefresh(),f.scrollIntoView({behavior:"smooth"})},1e3)})}dowloadAnexoSelecionados(){var f=Array();this.anexosSelecionados=this._anexosService.anexosSelecionados,this.anexosSelecionados.filter(l=>1==l.selecionado).forEach(l=>{f.push(l.id)}),this._anexosService.downloadAnexos({anexos:f}).subscribe(l=>{const D=URL.createObjectURL(l),T=document.createElement("a");T.href=D,T.download=this.registoDetail.tipo.nome+".zip",T.click()})}}de.\u0275fac=function(f){return new(f||de)(e.Y36(e.sBO),e.Y36(Ze.F0),e.Y36(g.uw),e.Y36(n.f),e.Y36(c.b),e.Y36(x.jm),e.Y36(L.d),e.Y36(De._),e.Y36(i.MZ),e.Y36(Ce.R))},de.\u0275cmp=e.Xpm({type:de,selectors:[["entrada-document-detail"]],inputs:{registoDetail:"registoDetail",groupsList:"groupsList"},outputs:{documentRefreshEmmit:"documentRefreshEmmit",circulacaoPendenteEmmit:"circulacaoPendenteEmmit"},features:[e.TTD],decls:199,vars:38,consts:[[1,"flex","flex-col","mt-4"],[1,"flex","w-full","gap-2"],[1,"flex","items-center"],[1,"flex","items-center",3,"matMenuTriggerFor"],[3,"svgIcon"],[1,"font-bold"],[1,"scale-[.75]",3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","flex-col","items-start","justify-center"],[1,"text-lg"],[1,"text-sm"],["mat-menu-item","",3,"matMenuTriggerFor"],[1,"rotate-icon",3,"svgIcon"],["EncaminharMenu","matMenu"],["DocumentoAccaoMenu","matMenu"],[1,"icon-size-6","mr-2","text-secondary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"],["moreMenuAnexos","matMenu"],["mat-icon-button","",3,"click"],["id","fornecedor-tab-pane","role","tabpanel","aria-labelledby","fornecedor-tab","tabindex","0",1,"tab-pane","fade"],["switch",""],[1,"pl-2","mt-2","pr-2"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],["class","pl-2 mt-2 pr-2",4,"ngIf"],[1,"bg-white","p-2"],[1,"table","border","text-secondary"],[1,"col-md-2","text-left","border","border-r-2","py-2","px-3","min-w-60"],[1,"py-2","px-3","w-full","border","border-b-2","font-bold"],[3,"hidden"],[1,"col-md-2","text-left","border","border-r-2","py-2","px-3","font-normal"],[1,"py-2","w-full","border","border-b-2"],["id","barcode"],[1,"py-2","px-3","w-full","border","border-b-2"],[1,"py-2","px-3","border","border-b-2"],[1,"py-0.5","px-2","rounded-full","text-center","font-medium","font-size-08",3,"ngClass"],[4,"ngFor","ngForOf"],["type","file","multiple","",2,"display","none",3,"change"],["fileInput",""],["target",""],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[1,"bg-gray-100","pt-2","flex",2,"border-left","10px solid rgb(188, 145, 15)"],[1,"flex-col","ml-3"],[1,"flex-col","ml-2"],[1,"text-primary",2,"text-decoration","underline","cursor","pointer",3,"click"]],template:function(f,l){if(1&f){const D=e.EpF();e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1)(3,"div",2)(4,"button",3),e._UZ(5,"mat-icon",4),e.TgZ(6,"span",5),e._uU(7,"Op\xe7\xf5es"),e.qZA(),e._UZ(8,"mat-icon",6),e.qZA(),e.TgZ(9,"mat-menu",null,7)(11,"button",8),e.NdJ("click",function(){return l.editRegisto()}),e._UZ(12,"mat-icon",4),e.TgZ(13,"div",9)(14,"span",10),e._uU(15,"Editar"),e.qZA(),e.TgZ(16,"span",11),e._uU(17,"Alterar os dados do documento"),e.qZA()()(),e.TgZ(18,"button",8),e.NdJ("click",function(){return l.updateEstadoOpenDialog()}),e._UZ(19,"mat-icon",4),e.TgZ(20,"div",9)(21,"span",10),e._uU(22,"Alterar Estado"),e.qZA(),e.TgZ(23,"span",11),e._uU(24,"Concluir o documento"),e.qZA()()(),e.TgZ(25,"button",12),e._UZ(26,"mat-icon",13),e.TgZ(27,"div",9)(28,"span",10),e._uU(29,"Encaminhar"),e.qZA(),e.TgZ(30,"span",11),e._uU(31,"Encaminhar o documento"),e.qZA()()(),e.TgZ(32,"button",8),e.NdJ("click",function(){return l.permissaoOpenDialog()}),e._UZ(33,"mat-icon",4),e.TgZ(34,"div",9)(35,"span",10),e._uU(36,"Permiss\xf5es"),e.qZA(),e.TgZ(37,"span",11),e._uU(38,"Acessos ao documento"),e.qZA()()(),e.TgZ(39,"button",8),e.NdJ("click",function(){return l.tabDocumentoChange(2)}),e._UZ(40,"mat-icon",4),e.TgZ(41,"div",9)(42,"span",10),e._uU(43,"Audit\xf3ria"),e.qZA(),e.TgZ(44,"span",11),e._uU(45,"Ac\xe7\xf5es realizadas sobre o documento"),e.qZA()()()(),e.TgZ(46,"mat-menu",null,14)(48,"button",12),e._UZ(49,"mat-icon",13),e.TgZ(50,"div",9)(51,"span",10),e._uU(52,"Documento c/ Ac\xe7\xe3o Pend\xeancia"),e.qZA(),e.TgZ(53,"span",11),e._uU(54,"Dentro da institui\xe7\xe3o"),e.qZA()()(),e.TgZ(55,"button",8),e.NdJ("click",function(){return l.openEncaminharExterioroDialog(l.registoDetail)}),e._UZ(56,"mat-icon",4),e.TgZ(57,"div",9)(58,"span",10),e._uU(59,"Documento para exterior"),e.qZA(),e.TgZ(60,"span",11),e._uU(61,"Fora do dominio da institui\xe7\xe3o"),e.qZA()()()(),e.TgZ(62,"mat-menu",null,15)(64,"button",8),e.NdJ("click",function(){return l.openEncaminharAccaoDialog(l.registoDetail,"APROVAR")}),e.TgZ(65,"div",16),e.O4$(),e.TgZ(66,"svg",17),e._UZ(67,"path",18),e.qZA()(),e.kcU(),e.TgZ(68,"div",9)(69,"span",10),e._uU(70,"Aprovar"),e.qZA(),e.TgZ(71,"span",11),e._uU(72,"Documento para aprova\xe7\xe3o"),e.qZA()()(),e.TgZ(73,"button",8),e.NdJ("click",function(){return l.openEncaminharAccaoDialog(l.registoDetail,"ASSINAR")}),e._UZ(74,"mat-icon",4),e.TgZ(75,"div",9)(76,"span",10),e._uU(77,"Assinar CC"),e.qZA(),e.TgZ(78,"span",11),e._uU(79,"Documento para assinatura"),e.qZA()()(),e.TgZ(80,"button",8),e.NdJ("click",function(){return l.openEncaminharAccaoDialog(l.registoDetail,"VERIFICAR")}),e._UZ(81,"mat-icon",4),e.TgZ(82,"div",9)(83,"span",10),e._uU(84,"Verificar"),e.qZA(),e.TgZ(85,"span",11),e._uU(86,"Documento especial aten\xe7\xe3o"),e.qZA()()()()(),e.TgZ(87,"div",2)(88,"button",3)(89,"span",5),e._uU(90,"Op\xe7\xf5es Anexos"),e.qZA(),e._UZ(91,"mat-icon",6),e.qZA(),e.TgZ(92,"mat-menu",null,19)(94,"button",8),e.NdJ("click",function(){e.CHM(D);const J=e.MAs(196);return e.KtG(J.click())}),e.TgZ(95,"mat-icon"),e._uU(96,"attach_file"),e.qZA(),e.TgZ(97,"div",9)(98,"span",10),e._uU(99,"Adicionar"),e.qZA(),e.TgZ(100,"span",11),e._uU(101,"Novos ficheiros"),e.qZA()()(),e.TgZ(102,"button",8),e.NdJ("click",function(){e.CHM(D);const J=e.MAs(198);return e.KtG(l.openAddTemplateDialog(J))}),e._UZ(103,"mat-icon",4),e.TgZ(104,"div",9)(105,"span",10),e._uU(106,"Adicionar Template"),e.qZA(),e.TgZ(107,"span",11),e._uU(108,"Adicionar um template de qualquer tipo de documento"),e.qZA()()(),e.TgZ(109,"button",8),e.NdJ("click",function(){e.CHM(D);const J=e.MAs(198);return e.KtG(l.converterAnexoSelecionados(J))}),e.TgZ(110,"mat-icon"),e._uU(111,"picture_as_pdf"),e.qZA(),e.TgZ(112,"div",9)(113,"span",10),e._uU(114,"Gravar como PDF"),e.qZA(),e.TgZ(115,"span",11),e._uU(116,"Converter o anexo para PDF"),e.qZA()()(),e.TgZ(117,"button",8),e.NdJ("click",function(){return l.dowloadAnexoSelecionados()}),e._UZ(118,"mat-icon",4),e.TgZ(119,"div",9)(120,"span",10),e._uU(121,"Descarregar anexos"),e.qZA(),e.TgZ(122,"span",11),e._uU(123,"Descarregar os selecionados"),e.qZA()()(),e.TgZ(124,"button",8),e.NdJ("click",function(){e.CHM(D);const J=e.MAs(198);return e.KtG(l.deleteAnexoSelecionados(J))}),e._UZ(125,"mat-icon",4),e.TgZ(126,"div",9)(127,"span",10),e._uU(128,"Excluir"),e.qZA(),e.TgZ(129,"span",11),e._uU(130,"Remover o(s) anexo(s) selecionados"),e.qZA()()()()(),e.TgZ(131,"div")(132,"a",20),e.NdJ("click",function(){return l.editRegisto()}),e._UZ(133,"mat-icon",4),e.qZA()(),e.TgZ(134,"div")(135,"button",20),e.NdJ("click",function(){return l.documentRefresh()}),e._UZ(136,"mat-icon",4),e.qZA()()(),e.BQk(),e.TgZ(137,"div")(138,"div",21,22),e.ynx(140),e.TgZ(141,"div",23),e.YNc(142,Ie,2,7,"fuse-alert",24),e.qZA(),e.YNc(143,Ue,11,1,"div",25),e.TgZ(144,"div",26)(145,"table",27)(146,"tbody")(147,"tr")(148,"th",28),e._uU(149),e.qZA(),e.TgZ(150,"td",29),e._uU(151),e.qZA()(),e.TgZ(152,"tr",30)(153,"td",31),e._uU(154,"Protocolo"),e.qZA(),e.TgZ(155,"td",32),e.O4$(),e._UZ(156,"svg",33),e.qZA()(),e.kcU(),e.TgZ(157,"tr")(158,"th",31),e._uU(159,"Tipo Documento"),e.qZA(),e.TgZ(160,"td",34),e._uU(161),e.qZA()(),e.TgZ(162,"tr")(163,"th",31),e._uU(164,"Assunto"),e.qZA(),e.TgZ(165,"td",34),e._uU(166),e.qZA()(),e.TgZ(167,"tr")(168,"th",31),e._uU(169,"Remetente"),e.qZA(),e.TgZ(170,"td",34),e._uU(171),e.qZA()(),e.TgZ(172,"tr")(173,"th",31),e._uU(174,"Destinat\xe1rios"),e.qZA(),e.TgZ(175,"td",34),e._uU(176),e.qZA()(),e.TgZ(177,"tr")(178,"th",31),e._uU(179,"Data"),e.qZA(),e.TgZ(180,"td",34),e._uU(181),e.ALo(182,"date"),e.qZA()(),e.TgZ(183,"tr")(184,"th",31),e._uU(185,"Confidencial"),e.qZA(),e.TgZ(186,"td",34),e._uU(187),e.qZA()(),e.TgZ(188,"tr")(189,"th",31),e._uU(190,"Estado"),e.qZA(),e.TgZ(191,"td",35)(192,"label",36),e._uU(193),e.qZA()()(),e.YNc(194,Pe,5,2,"tr",37),e.qZA()()(),e.BQk(),e.qZA(),e.TgZ(195,"input",38,39),e.NdJ("change",function(J){e.CHM(D);const K=e.MAs(198);return e.KtG(l.onFileSelected(J,K))}),e.qZA()()(),e._UZ(197,"div",null,40)}if(2&f){const D=e.MAs(10),T=e.MAs(47),J=e.MAs(63),K=e.MAs(93);e.xp6(4),e.Q6J("matMenuTriggerFor",D),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:chevron-down"),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:pencil"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:menu-alt-1"),e.xp6(6),e.Q6J("matMenuTriggerFor",T),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:reply"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:users"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:newspaper"),e.xp6(8),e.Q6J("matMenuTriggerFor",J),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:users"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:external-link"),e.xp6(18),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:eye"),e.xp6(7),e.Q6J("matMenuTriggerFor",K),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:chevron-down"),e.xp6(12),e.Q6J("svgIcon","heroicons_outline:document-add"),e.xp6(15),e.Q6J("svgIcon","heroicons_outline:download"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:pencil"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:refresh"),e.xp6(6),e.Q6J("ngIf",l.showAlert),e.xp6(1),e.Q6J("ngIf",l.encaminhamentos.length>0),e.xp6(6),e.hij("Nr. Documento ",l.hideProtocolo,""),e.xp6(2),e.Oqu(l.registoDetail.documento.numeroDocumento),e.xp6(1),e.Q6J("hidden",l.hideProtocolo),e.xp6(9),e.Oqu(l.registoDetail.tipo.nome),e.xp6(5),e.Oqu(l.registoDetail.assunto),e.xp6(5),e.Oqu(null!==(null==l.registoDetail||null==l.registoDetail.registo_remetente?null:l.registoDetail.registo_remetente.entidadeId)?null==l.registoDetail||null==l.registoDetail.registo_remetente||null==l.registoDetail.registo_remetente.entidade?null:l.registoDetail.registo_remetente.entidade.nome:null!==(null==l.registoDetail||null==l.registoDetail.registo_remetente?null:l.registoDetail.registo_remetente.utilizadorId)?null==l.registoDetail||null==l.registoDetail.registo_remetente?null:l.registoDetail.registo_remetente.utilizador.name:l.showRemententeGroupName(null==l.registoDetail||null==l.registoDetail.registo_remetente?null:l.registoDetail.registo_remetente.grupoId)),e.xp6(5),e.Oqu(l.showDestinatariosString(null==l.registoDetail?null:l.registoDetail.registo_destinatario)),e.xp6(5),e.Oqu(e.xi3(182,35,null==l.registoDetail?null:l.registoDetail.data,"dd/MM/yyyy")),e.xp6(6),e.Oqu(0==l.registoDetail.confidencial?"Sim":"N\xe3o"),e.xp6(5),e.Q6J("ngClass",l.getCustomBadgeClass(null==l.registoDetail.estado?null:l.registoDetail.estado.nome)),e.xp6(1),e.hij(" ",l.registoDetail.estado.nome," "),e.xp6(1),e.Q6J("ngForOf",l.registoDetail.valor_atributo_dinamicos)}},dependencies:[u.mk,u.sg,u.O5,Z.o6,Z.RK,P.Hw,he.VK,he.OP,he.p6,we.W,u.uU],styles:[".rotate-icon{transform:rotateY(180deg)}\n"],encapsulation:2,data:{animation:v.L},changeDetection:0})},7243:(B,d,r)=>{var e=I(r(9721)),_=I(r(4070)),h=I(r(6162)),x=I(r(3800)),o=I(r(1731)),i=I(r(70)),s=I(r(1834)),u=r(7497),Z=I(r(7850));function I(C){return C&&C.__esModule?C:{default:C}}var P=function(){},j=function(k,R,N){var F=new P;if(typeof k>"u")throw Error("No element to render on was provided.");return F._renderProperties=(0,o.default)(k),F._encodings=[],F._options=Z.default,F._errorHandler=new s.default(F),typeof R<"u"&&((N=N||{}).format||(N.format=Q()),F.options(N)[N.format](R,N).render()),F};for(var G in j.getModule=function(C){return e.default[C]},e.default)e.default.hasOwnProperty(G)&&z(e.default,G);function z(C,k){P.prototype[k]=P.prototype[k.toUpperCase()]=P.prototype[k.toLowerCase()]=function(R,N){var F=this;return F._errorHandler.wrapBarcodeCall(function(){N.text=typeof N.text>"u"?void 0:""+N.text;var Y=(0,_.default)(F._options,N);Y=(0,i.default)(Y);var ee=V(R,C[k],Y);return F._encodings.push(ee),F})}}function V(C,k,R){var N=new k(C=""+C,R);if(!N.valid())throw new u.InvalidInputException(N.constructor.name,C);var F=N.encode();F=(0,h.default)(F);for(var Y=0;Y<F.length;Y++)F[Y].options=(0,_.default)(R,F[Y].options);return F}function Q(){return e.default.CODE128?"CODE128":Object.keys(e.default)[0]}function M(C,k,R){k=(0,h.default)(k);for(var N=0;N<k.length;N++)k[N].options=(0,_.default)(R,k[N].options),(0,x.default)(k[N].options);(0,x.default)(R),new(0,C.renderer)(C.element,k,R).render(),C.afterRender&&C.afterRender()}P.prototype.options=function(C){return this._options=(0,_.default)(this._options,C),this},P.prototype.blank=function(C){var k=new Array(C+1).join("0");return this._encodings.push({data:k}),this},P.prototype.init=function(){var C;if(this._renderProperties)for(var k in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var R=(0,_.default)(this._options,(C=this._renderProperties[k]).options);"auto"==R.format&&(R.format=Q()),this._errorHandler.wrapBarcodeCall(function(){var Y=V(R.value,e.default[R.format.toUpperCase()],R);M(C,Y,R)})}},P.prototype.render=function(){if(!this._renderProperties)throw new u.NoElementException;if(Array.isArray(this._renderProperties))for(var C=0;C<this._renderProperties.length;C++)M(this._renderProperties[C],this._encodings,this._options);else M(this._renderProperties,this._encodings,this._options);return this},P.prototype._defaults=Z.default,typeof window<"u"&&(window.JsBarcode=j),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(C,k){var R=[];return jQuery(this).each(function(){R.push(this)}),j(R,C,k)}),B.exports=j},4648:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function e(v,_){(function r(e,v){if(!(e instanceof v))throw new TypeError("Cannot call a class as a function")})(this,e),this.data=v,this.text=_.text||v,this.options=_}},6106:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),v=function b(o){return o&&o.__esModule?o:{default:o}}(r(4648)),_=r(9068),c=function(o){function n(i,a){!function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var s=function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.substring(1),a));return s.bytes=i.split("").map(function(u){return u.charCodeAt(0)}),s}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var a=this.bytes,s=a.shift()-105,u=_.SET_BY_CODE[s];if(void 0===u)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&a.unshift(_.FNC1);var m=n.next(a,1,u);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:n.getBar(s)+m.result+n.getBar((m.checksum+s)%_.MODULO)+n.getBar(_.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var a=this.options.ean128||!1;return"string"==typeof a&&(a="true"===a.toLowerCase()),a}}],[{key:"getBar",value:function(a){return _.BARS[a]?_.BARS[a].toString():""}},{key:"correctIndex",value:function(a,s){if(s===_.SET_A){var u=a.shift();return u<32?u+64:u-32}return s===_.SET_B?a.shift()-32:10*(a.shift()-48)+a.shift()-48}},{key:"next",value:function(a,s,u){if(!a.length)return{result:"",checksum:0};var m=void 0,Z=void 0;if(a[0]>=200){Z=a.shift()-105;var I=_.SWAP[Z];void 0!==I?m=n.next(a,s+1,I):((u===_.SET_A||u===_.SET_B)&&Z===_.SHIFT&&(a[0]=u===_.SET_A?a[0]>95?a[0]-96:a[0]:a[0]<32?a[0]+96:a[0]),m=n.next(a,s+1,u))}else Z=n.correctIndex(a,u),m=n.next(a,s+1,u);return{result:n.getBar(Z)+m.result,checksum:Z*s+m.checksum}}}]),n}(v.default);d.default=c},8964:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),v=function b(o){return o&&o.__esModule?o:{default:o}}(r(6106)),_=r(9068),c=function(o){function n(i,a){return function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,_.A_START_CHAR+i,a))}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return new RegExp("^"+_.A_CHARS+"+$").test(this.data)}}]),n}(v.default);d.default=c},3254:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),v=function b(o){return o&&o.__esModule?o:{default:o}}(r(6106)),_=r(9068),c=function(o){function n(i,a){return function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,_.B_START_CHAR+i,a))}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return new RegExp("^"+_.B_CHARS+"+$").test(this.data)}}]),n}(v.default);d.default=c},5701:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),v=function b(o){return o&&o.__esModule?o:{default:o}}(r(6106)),_=r(9068),c=function(o){function n(i,a){return function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,_.C_START_CHAR+i,a))}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return new RegExp("^"+_.C_CHARS+"+$").test(this.data)}}]),n}(v.default);d.default=c},5626:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=b(r(6106)),_=b(r(4779));function b(o){return o&&o.__esModule?o:{default:o}}function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}var c=function(o){function n(i,a){if(function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),/^[\x00-\x7F\xC8-\xD3]+$/.test(i))var s=g(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,(0,_.default)(i),a));else s=g(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,a));return g(s)}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),n}(e.default);d.default=c},4779:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=r(9068),e=function(x){return x.match(new RegExp("^"+t.A_CHARS+"*"))[0].length},v=function(x){return x.match(new RegExp("^"+t.B_CHARS+"*"))[0].length},_=function(x){return x.match(new RegExp("^"+t.C_CHARS+"*"))[0]};function b(g,x){var c=x?t.A_CHARS:t.B_CHARS,o=g.match(new RegExp("^("+c+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(o)return o[1]+String.fromCharCode(204)+h(g.substring(o[1].length));var n=g.match(new RegExp("^"+c+"+"))[0];return n.length===g.length?g:n+String.fromCharCode(x?205:206)+b(g.substring(n.length),!x)}function h(g){var x=_(g),c=x.length;if(c===g.length)return g;g=g.substring(c);var o=e(g)>=v(g);return x+String.fromCharCode(o?206:205)+b(g,o)}d.default=function(g){var x=void 0;if(_(g).length>=2)x=t.C_START_CHAR+h(g);else{var o=e(g)>v(g);x=(o?t.A_START_CHAR:t.B_START_CHAR)+b(g,o)}return x.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(n,i){return String.fromCharCode(203)+i})}},9068:(B,d)=>{var r;function t(G,z,V){return z in G?Object.defineProperty(G,z,{value:V,enumerable:!0,configurable:!0,writable:!0}):G[z]=V,G}Object.defineProperty(d,"__esModule",{value:!0});var e=d.SET_A=0,v=d.SET_B=1,_=d.SET_C=2,h=(d.SHIFT=98,d.START_A=103),g=d.START_B=104,x=d.START_C=105;d.MODULO=103,d.STOP=106,d.FNC1=207,d.SET_BY_CODE=(t(r={},h,e),t(r,g,v),t(r,x,_),r),d.SWAP={101:e,100:v,99:_},d.A_START_CHAR=String.fromCharCode(208),d.B_START_CHAR=String.fromCharCode(209),d.C_START_CHAR=String.fromCharCode(210),d.A_CHARS="[\0-_\xc8-\xcf]",d.B_CHARS="[ -\x7f\xc8-\xcf]",d.C_CHARS="(\xcf*[0-9]{2}\xcf*)",d.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},6038:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CODE128C=d.CODE128B=d.CODE128A=d.CODE128=void 0;var e=c(r(5626)),_=c(r(8964)),h=c(r(3254)),x=c(r(5701));function c(o){return o&&o.__esModule?o:{default:o}}d.CODE128=e.default,d.CODE128A=_.default,d.CODE128B=h.default,d.CODE128C=x.default},528:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CODE39=void 0;var t=function(){function m(Z,I){for(var P=0;P<I.length;P++){var j=I[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(Z,j.key,j)}}return function(Z,I,P){return I&&m(Z.prototype,I),P&&m(Z,P),Z}}(),x=function(m){function Z(I,P){return function b(m,Z){if(!(m instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,Z),I=I.toUpperCase(),P.mod43&&(I+=function a(m){return c[m]}(function u(m){for(var Z=0,I=0;I<m.length;I++)Z+=s(m[I]);return Z%=43}(I))),function h(m,Z){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Z||"object"!=typeof Z&&"function"!=typeof Z?m:Z}(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,I,P))}return function g(m,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);m.prototype=Object.create(Z&&Z.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(m,Z):m.__proto__=Z)}(Z,m),t(Z,[{key:"encode",value:function(){for(var P=n("*"),j=0;j<this.data.length;j++)P+=n(this.data[j])+"0";return{data:P+=n("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),Z}(function _(m){return m&&m.__esModule?m:{default:m}}(r(4648)).default),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],o=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function n(m){return function i(m){return o[m].toString(2)}(s(m))}function s(m){return c.indexOf(m)}d.CODE39=x},7417:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function i(a,s){for(var u=0;u<s.length;u++){var m=s[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,u){return s&&i(a.prototype,s),u&&i(a,u),a}}(),e=r(3819),_=g(r(9259));function g(i){return i&&i.__esModule?i:{default:i}}var n=function(i){function a(s,u){!function x(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);var m=function c(i,a){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?i:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,s,u));return m.fontSize=!u.flat&&u.fontSize>10*u.width?10*u.width:u.fontSize,m.guardHeight=u.height+m.fontSize/2+u.textMargin,m}return function o(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}(a,i),t(a,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(u,m){return this.text.substr(u,m)}},{key:"leftEncode",value:function(u,m){return(0,_.default)(u,m)}},{key:"rightText",value:function(u,m){return this.text.substr(u,m)}},{key:"rightEncode",value:function(u,m){return(0,_.default)(u,m)}},{key:"encodeGuarded",value:function(){var u={fontSize:this.fontSize},m={height:this.guardHeight};return[{data:e.SIDE_BIN,options:m},{data:this.leftEncode(),text:this.leftText(),options:u},{data:e.MIDDLE_BIN,options:m},{data:this.rightEncode(),text:this.rightText(),options:u},{data:e.SIDE_BIN,options:m}]}},{key:"encodeFlat",value:function(){return{data:[e.SIDE_BIN,this.leftEncode(),e.MIDDLE_BIN,this.rightEncode(),e.SIDE_BIN].join(""),text:this.text}}}]),a}(g(r(4648)).default);d.default=n},6195:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function i(a,s){for(var u=0;u<s.length;u++){var m=s[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,u){return s&&i(a.prototype,s),u&&i(a,u),a}}(),e=function i(a,s,u){null===a&&(a=Function.prototype);var m=Object.getOwnPropertyDescriptor(a,s);if(void 0===m){var Z=Object.getPrototypeOf(a);return null===Z?void 0:i(Z,s,u)}if("value"in m)return m.value;var I=m.get;return void 0===I?void 0:I.call(u)},v=r(3819),b=function h(i){return i&&i.__esModule?i:{default:i}}(r(7417)),o=function(a){return(10-a.substr(0,12).split("").map(function(u){return+u}).reduce(function(u,m,Z){return Z%2?u+3*m:u+m},0)%10)%10},n=function(i){function a(s,u){(function g(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")})(this,a),-1!==s.search(/^[0-9]{12}$/)&&(s+=o(s));var m=function x(i,a){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?i:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,s,u));return m.lastChar=u.lastChar,m}return function c(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}(a,i),t(a,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===o(this.data)}},{key:"leftText",value:function(){return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var u=this.data.substr(1,6),m=v.EAN13_STRUCTURE[this.data[0]];return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"leftEncode",this).call(this,u,m)}},{key:"rightText",value:function(){return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var u=this.data.substr(7,6);return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"rightEncode",this).call(this,u,"RRRRRR")}},{key:"encodeGuarded",value:function(){var u=e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(u.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(u.push({data:"00"}),u.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),u}}]),a}(b.default);d.default=n},4500:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function i(a,s){for(var u=0;u<s.length;u++){var m=s[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,u){return s&&i(a.prototype,s),u&&i(a,u),a}}(),e=r(3819),_=g(r(9259));function g(i){return i&&i.__esModule?i:{default:i}}var n=function(i){function a(s,u){return function x(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function c(i,a){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?i:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,s,u))}return function o(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}(a,i),t(a,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var u=e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,_.default)(this.data,u,"01"),text:this.text}}}]),a}(g(r(4648)).default);d.default=n},5174:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function a(s,u){for(var m=0;m<u.length;m++){var Z=u[m];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(s,Z.key,Z)}}return function(s,u,m){return u&&a(s.prototype,u),m&&a(s,m),s}}(),e=r(3819),_=g(r(9259));function g(a){return a&&a.__esModule?a:{default:a}}var i=function(a){function s(u,m){return function x(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s),function c(a,s){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?a:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u,m))}return function o(a,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(a,s):a.__proto__=s)}(s,a),t(s,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var m=e.EAN5_STRUCTURE[function(s){return s.split("").map(function(m){return+m}).reduce(function(m,Z,I){return I%2?m+9*Z:m+3*Z},0)%10}(this.data)];return{data:"1011"+(0,_.default)(this.data,m,"01"),text:this.text}}}]),s}(g(r(4648)).default);d.default=i},2523:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function n(i,a){for(var s=0;s<a.length;s++){var u=a[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}return function(i,a,s){return a&&n(i.prototype,a),s&&n(i,s),i}}(),e=function n(i,a,s){null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,a);if(void 0===u){var m=Object.getPrototypeOf(i);return null===m?void 0:n(m,a,s)}if("value"in u)return u.value;var Z=u.get;return void 0===Z?void 0:Z.call(s)},_=function b(n){return n&&n.__esModule?n:{default:n}}(r(7417)),c=function(i){return(10-i.substr(0,7).split("").map(function(s){return+s}).reduce(function(s,u,m){return m%2?s+u:s+3*u},0)%10)%10},o=function(n){function i(a,s){return function h(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),-1!==a.search(/^[0-9]{7}$/)&&(a+=c(a)),function g(n,i){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?n:i}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a,s))}return function x(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(n,i):n.__proto__=i)}(i,n),t(i,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===c(this.data)}},{key:"leftText",value:function(){return e(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var s=this.data.substr(0,4);return e(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftEncode",this).call(this,s,"LLLL")}},{key:"rightText",value:function(){return e(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var s=this.data.substr(4,4);return e(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightEncode",this).call(this,s,"RRRR")}}]),i}(_.default);d.default=o},4102:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function i(a,s){for(var u=0;u<s.length;u++){var m=s[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,u){return s&&i(a.prototype,s),u&&i(a,u),a}}();d.checksum=n;var v=h(r(9259));function h(i){return i&&i.__esModule?i:{default:i}}var o=function(i){function a(s,u){(function g(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")})(this,a),-1!==s.search(/^[0-9]{11}$/)&&(s+=n(s));var m=function x(i,a){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?i:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,s,u));return m.displayValue=u.displayValue,m.fontSize=u.fontSize>10*u.width?10*u.width:u.fontSize,m.guardHeight=u.height+m.fontSize/2+u.textMargin,m}return function c(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}(a,i),t(a,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==n(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var u="";return u+="101",u+=(0,v.default)(this.data.substr(0,6),"LLLLLL"),u+="01010",u+=(0,v.default)(this.data.substr(6,6),"RRRRRR"),{data:u+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var u=[];return this.displayValue&&u.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),u.push({data:"101"+(0,v.default)(this.data[0],"L"),options:{height:this.guardHeight}}),u.push({data:(0,v.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),u.push({data:"01010",options:{height:this.guardHeight}}),u.push({data:(0,v.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),u.push({data:(0,v.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&u.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),u}}]),a}(h(r(4648)).default);function n(i){var s,a=0;for(s=1;s<11;s+=2)a+=parseInt(i[s]);for(s=0;s<11;s+=2)a+=3*parseInt(i[s]);return(10-a%10)%10}d.default=o},1285:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function u(m,Z){for(var I=0;I<Z.length;I++){var P=Z[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(m,P.key,P)}}return function(m,Z,I){return Z&&u(m.prototype,Z),I&&u(m,I),m}}(),v=g(r(9259)),b=g(r(4648)),h=r(4102);function g(u){return u&&u.__esModule?u:{default:u}}function c(u,m){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?u:m}var n=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],i=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],a=function(u){function m(Z,I){!function x(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}(this,m);var P=c(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,Z,I));if(P.isValid=!1,-1!==Z.search(/^[0-9]{6}$/))P.middleDigits=Z,P.upcA=s(Z,"0"),P.text=I.text||""+P.upcA[0]+Z+P.upcA[P.upcA.length-1],P.isValid=!0;else{if(-1===Z.search(/^[01][0-9]{7}$/))return c(P);if(P.middleDigits=Z.substring(1,Z.length-1),P.upcA=s(P.middleDigits,Z[0]),P.upcA[P.upcA.length-1]!==Z[Z.length-1])return c(P);P.isValid=!0}return P.displayValue=I.displayValue,P.fontSize=I.fontSize>10*I.width?10*I.width:I.fontSize,P.guardHeight=I.height+P.fontSize/2+I.textMargin,P}return function o(u,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);u.prototype=Object.create(m&&m.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(u,m):u.__proto__=m)}(m,u),t(m,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var I="";return I+="101",I+=this.encodeMiddleDigits(),{data:I+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var I=[];return this.displayValue&&I.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),I.push({data:"101",options:{height:this.guardHeight}}),I.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),I.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&I.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),I}},{key:"encodeMiddleDigits",value:function(){var I=this.upcA[0],j=i[parseInt(this.upcA[this.upcA.length-1])][parseInt(I)];return(0,v.default)(this.middleDigits,j)}}]),m}(b.default);function s(u,m){for(var Z=parseInt(u[u.length-1]),I=n[Z],P="",j=0,G=0;G<I.length;G++){var z=I[G];P+="X"===z?u[j++]:z}return(P=""+m+P)+(0,h.checksum)(P)}d.default=a},3819:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SIDE_BIN="101",d.MIDDLE_BIN="01010",d.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},d.EAN2_STRUCTURE=["LL","LG","GL","GG"],d.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],d.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},9259:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=r(3819);d.default=function(_,b,h){var g=_.split("").map(function(c,o){return t.BINARIES[b[o]]}).map(function(c,o){return c?c[_[o]]:""});if(h){var x=_.length-1;g=g.map(function(c,o){return o<x?c+h:c})}return g.join("")}},7422:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UPCE=d.UPC=d.EAN2=d.EAN5=d.EAN8=d.EAN13=void 0;var e=a(r(6195)),_=a(r(2523)),h=a(r(5174)),x=a(r(4500)),o=a(r(4102)),i=a(r(1285));function a(s){return s&&s.__esModule?s:{default:s}}d.EAN13=e.default,d.EAN8=_.default,d.EAN5=h.default,d.EAN2=x.default,d.UPC=o.default,d.UPCE=i.default},791:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericBarcode=void 0;var t=function(){function c(o,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,n,i){return n&&c(o.prototype,n),i&&c(o,i),o}}(),x=function(c){function o(n,i){return function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n,i))}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),t(o,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),o}(function _(c){return c&&c.__esModule?c:{default:c}}(r(4648)).default);d.GenericBarcode=x},3435:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),e=r(5306);function h(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function g(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}var c=function(o){function n(){return h(this,n),g(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function x(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var a=this,s=this.data.match(/.{2}/g).map(function(u){return a.encodePair(u)}).join("");return{data:e.START_BIN+s+e.END_BIN,text:this.text}}},{key:"encodePair",value:function(a){var s=e.BINARIES[a[1]];return e.BINARIES[a[0]].split("").map(function(u,m){return("1"===u?"111":"1")+("1"===s[m]?"000":"0")}).join("")}}]),n}(function b(o){return o&&o.__esModule?o:{default:o}}(r(4648)).default);d.default=c},580:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),v=function _(o){return o&&o.__esModule?o:{default:o}}(r(3435)),x=function(n){var i=n.substr(0,13).split("").map(function(a){return parseInt(a,10)}).reduce(function(a,s,u){return a+s*(3-u%2*2)},0);return 10*Math.ceil(i/10)-i},c=function(o){function n(i,a){return function b(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),-1!==i.search(/^[0-9]{13}$/)&&(i+=x(i)),function h(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,a))}return function g(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===x(this.data)}}]),n}(v.default);d.default=c},5306:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.START_BIN="1010",d.END_BIN="11101",d.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},7191:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ITF14=d.ITF=void 0;var e=b(r(3435)),_=b(r(580));function b(h){return h&&h.__esModule?h:{default:h}}d.ITF=e.default,d.ITF14=_.default},6431:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function o(n,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,a){return i&&o(n.prototype,i),a&&o(n,a),n}}(),x=function(o){function n(i,a){return function b(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function h(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?o:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,a))}return function g(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}(n,o),t(n,[{key:"encode",value:function(){for(var a="110",s=0;s<this.data.length;s++){var m=parseInt(this.data[s]).toString(2);m=c(m,4-m.length);for(var Z=0;Z<m.length;Z++)a+="0"==m[Z]?"100":"110"}return{data:a+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),n}(function _(o){return o&&o.__esModule?o:{default:o}}(r(4648)).default);function c(o,n){for(var i=0;i<n;i++)o="0"+o;return o}d.default=x},7218:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=function _(c){return c&&c.__esModule?c:{default:c}}(r(6431)),v=r(6855),x=function(c){function o(n,i){return function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n+(0,v.mod10)(n),i))}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),o}(e.default);d.default=x},9762:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=function _(c){return c&&c.__esModule?c:{default:c}}(r(6431)),v=r(6855),x=function(c){function o(n,i){return function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),n+=(0,v.mod10)(n),n+=(0,v.mod10)(n),function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n,i))}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),o}(e.default);d.default=x},3117:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=function _(c){return c&&c.__esModule?c:{default:c}}(r(6431)),v=r(6855),x=function(c){function o(n,i){return function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n+(0,v.mod11)(n),i))}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),o}(e.default);d.default=x},1878:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=function _(c){return c&&c.__esModule?c:{default:c}}(r(6431)),v=r(6855),x=function(c){function o(n,i){return function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),n+=(0,v.mod11)(n),n+=(0,v.mod10)(n),function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n,i))}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),o}(e.default);d.default=x},6855:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mod10=function r(e){for(var v=0,_=0;_<e.length;_++){var b=parseInt(e[_]);v+=(_+e.length)%2==0?b:2*b%10+Math.floor(2*b/10)}return(10-v%10)%10},d.mod11=function t(e){for(var v=0,_=[2,3,4,5,6,7],b=0;b<e.length;b++){var h=parseInt(e[e.length-1-b]);v+=_[b%_.length]*h}return(11-v%11)%11}},1247:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSI1110=d.MSI1010=d.MSI11=d.MSI10=d.MSI=void 0;var e=n(r(6431)),_=n(r(7218)),h=n(r(3117)),x=n(r(9762)),o=n(r(1878));function n(i){return i&&i.__esModule?i:{default:i}}d.MSI=e.default,d.MSI10=_.default,d.MSI11=h.default,d.MSI1010=x.default,d.MSI1110=o.default},2250:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.codabar=void 0;var t=function(){function c(o,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,n,i){return n&&c(o.prototype,n),i&&c(o,i),o}}(),x=function(c){function o(n,i){(function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")})(this,o),0===n.search(/^[0-9\-\$\:\.\+\/]+$/)&&(n="A"+n+"A");var a=function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n.toUpperCase(),i));return a.text=a.options.text||a.text.replace(/[A-D]/g,""),a}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),t(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var i=[],a=this.getEncodings(),s=0;s<this.data.length;s++)i.push(a[this.data.charAt(s)]),s!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),o}(function _(c){return c&&c.__esModule?c:{default:c}}(r(4648)).default);d.codabar=x},9721:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=r(528),e=r(6038),v=r(7422),_=r(7191),b=r(1247),h=r(7624),g=r(2250),x=r(791);d.default={CODE39:t.CODE39,CODE128:e.CODE128,CODE128A:e.CODE128A,CODE128B:e.CODE128B,CODE128C:e.CODE128C,EAN13:v.EAN13,EAN8:v.EAN8,EAN5:v.EAN5,EAN2:v.EAN2,UPC:v.UPC,UPCE:v.UPCE,ITF14:_.ITF14,ITF:_.ITF,MSI:b.MSI,MSI10:b.MSI10,MSI11:b.MSI11,MSI1010:b.MSI1010,MSI1110:b.MSI1110,pharmacode:h.pharmacode,codabar:g.codabar,GenericBarcode:x.GenericBarcode}},7624:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.pharmacode=void 0;var t=function(){function c(o,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,n,i){return n&&c(o.prototype,n),i&&c(o,i),o}}(),x=function(c){function o(n,i){!function b(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function h(c,o){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?c:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n,i));return a.number=parseInt(n,10),a}return function g(c,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(c,o):c.__proto__=o)}(o,c),t(o,[{key:"encode",value:function(){for(var i=this.number,a="";!isNaN(i)&&0!=i;)i%2==0?(a="11100"+a,i=(i-2)/2):(a="100"+a,i=(i-1)/2);return{data:a=a.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),o}(function _(c){return c&&c.__esModule?c:{default:c}}(r(4648)).default);d.pharmacode=x},1834:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var r=function(){function v(_,b){for(var h=0;h<b.length;h++){var g=b[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,g.key,g)}}return function(_,b,h){return b&&v(_.prototype,b),h&&v(_,h),_}}(),e=function(){function v(_){(function t(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,v),this.api=_}return r(v,[{key:"handleCatch",value:function(b){if("InvalidInputException"!==b.name)throw b;if(this.api._options.valid===this.api._defaults.valid)throw b.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(b){try{var h=b.apply(void 0,arguments);return this.api._options.valid(!0),h}catch(g){return this.handleCatch(g),this.api}}}]),v}();d.default=e},7497:(B,d)=>{function r(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function t(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?h:g}function e(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}Object.defineProperty(d,"__esModule",{value:!0});var v=function(h){function g(x,c){r(this,g);var o=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return o.name="InvalidInputException",o.symbology=x,o.input=c,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e(g,Error),g}(),_=function(h){function g(){r(this,g);var x=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return x.name="InvalidElementException",x.message="Not supported type to render on",x}return e(g,Error),g}(),b=function(h){function g(){r(this,g);var x=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return x.name="NoElementException",x.message="No element to render on.",x}return e(g,Error),g}();d.InvalidInputException=v,d.InvalidElementException=_,d.NoElementException=b},3800:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function r(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}},6428:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=b(r(70)),_=b(r(7850));function b(g){return g&&g.__esModule?g:{default:g}}d.default=function h(g){var x={};for(var c in _.default)_.default.hasOwnProperty(c)&&(g.hasAttribute("jsbarcode-"+c.toLowerCase())&&(x[c]=g.getAttribute("jsbarcode-"+c.toLowerCase())),g.hasAttribute("data-"+c.toLowerCase())&&(x[c]=g.getAttribute("data-"+c.toLowerCase())));return x.value=g.getAttribute("jsbarcode-value")||g.getAttribute("data-value"),(0,e.default)(x)}},1731:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v=g(r(6428)),b=g(r(2216)),h=r(7497);function g(n){return n&&n.__esModule?n:{default:n}}d.default=function x(n){if("string"==typeof n)return function c(n){var i=document.querySelectorAll(n);if(0!==i.length){for(var a=[],s=0;s<i.length;s++)a.push(x(i[s]));return a}}(n);if(Array.isArray(n)){for(var i=[],a=0;a<n.length;a++)i.push(x(n[a]));return i}if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLImageElement)return function o(n){var i=document.createElement("canvas");return{element:i,options:(0,v.default)(n),renderer:b.default.CanvasRenderer,afterRender:function(){n.setAttribute("src",i.toDataURL())}}}(n);if(n&&n.nodeName&&"svg"===n.nodeName.toLowerCase()||typeof SVGElement<"u"&&n instanceof SVGElement)return{element:n,options:(0,v.default)(n),renderer:b.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement)return{element:n,options:(0,v.default)(n),renderer:b.default.CanvasRenderer};if(n&&n.getContext)return{element:n,renderer:b.default.CanvasRenderer};if(n&&"object"===(typeof n>"u"?"undefined":t(n))&&!n.nodeName)return{element:n,renderer:b.default.ObjectRenderer};throw new h.InvalidElementException}},6162:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function r(t){var e=[];return function v(_){if(Array.isArray(_))for(var b=0;b<_.length;b++)v(_[b]);else _.text=_.text||"",_.data=_.data||"",e.push(_)}(t),e}},4070:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var v=arguments[e];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(t[_]=v[_])}return t};d.default=function(t,e){return r({},t,e)}},70:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function r(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var v in e)e.hasOwnProperty(v)&&"string"==typeof t[v=e[v]]&&(t[v]=parseInt(t[v],10));return"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue),t}},7850:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},726:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function x(c,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}return function(c,o,n){return o&&x(c.prototype,o),n&&x(c,n),c}}(),v=function b(x){return x&&x.__esModule?x:{default:x}}(r(4070)),_=r(3737),g=function(){function x(c,o,n){(function h(x,c){if(!(x instanceof c))throw new TypeError("Cannot call a class as a function")})(this,x),this.canvas=c,this.encodings=o,this.options=n}return t(x,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var o=0;o<this.encodings.length;o++){var n=(0,v.default)(this.options,this.encodings[o].options);this.drawCanvasBarcode(n,this.encodings[o]),this.drawCanvasText(n,this.encodings[o]),this.moveCanvasDrawing(this.encodings[o])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var o=this.canvas.getContext("2d");o.save(),(0,_.calculateEncodingAttributes)(this.encodings,this.options,o);var n=(0,_.getTotalWidthOfEncodings)(this.encodings),i=(0,_.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,o.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(o.fillStyle=this.options.background,o.fillRect(0,0,this.canvas.width,this.canvas.height)),o.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(o,n){var s,i=this.canvas.getContext("2d"),a=n.data;s="top"==o.textPosition?o.marginTop+o.fontSize+o.textMargin:o.marginTop,i.fillStyle=o.lineColor;for(var u=0;u<a.length;u++){var m=u*o.width+n.barcodePadding;"1"===a[u]?i.fillRect(m,s,o.width,o.height):a[u]&&i.fillRect(m,s,o.width,o.height*a[u])}}},{key:"drawCanvasText",value:function(o,n){var s,u,i=this.canvas.getContext("2d");o.displayValue&&(u="top"==o.textPosition?o.marginTop+o.fontSize-o.textMargin:o.height+o.textMargin+o.marginTop+o.fontSize,i.font=o.fontOptions+" "+o.fontSize+"px "+o.font,"left"==o.textAlign||n.barcodePadding>0?(s=0,i.textAlign="left"):"right"==o.textAlign?(s=n.width-1,i.textAlign="right"):(s=n.width/2,i.textAlign="center"),i.fillText(n.text,s,u))}},{key:"moveCanvasDrawing",value:function(o){this.canvas.getContext("2d").translate(o.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),x}();d.default=g},2216:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var e=g(r(726)),_=g(r(7902)),h=g(r(8138));function g(x){return x&&x.__esModule?x:{default:x}}d.default={CanvasRenderer:e.default,SVGRenderer:_.default,ObjectRenderer:h.default}},8138:(B,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var r=function(){function v(_,b){for(var h=0;h<b.length;h++){var g=b[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,g.key,g)}}return function(_,b,h){return b&&v(_.prototype,b),h&&v(_,h),_}}(),e=function(){function v(_,b,h){(function t(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,v),this.object=_,this.encodings=b,this.options=h}return r(v,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),v}();d.default=e},3737:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getTotalWidthOfEncodings=d.calculateEncodingAttributes=d.getBarcodePadding=d.getEncodingHeight=d.getMaximumHeightOfEncodings=void 0;var e=function v(o){return o&&o.__esModule?o:{default:o}}(r(4070));function _(o,n){return n.height+(n.displayValue&&o.text.length>0?n.fontSize+n.textMargin:0)+n.marginTop+n.marginBottom}function b(o,n,i){if(i.displayValue&&n<o){if("center"==i.textAlign)return Math.floor((o-n)/2);if("left"==i.textAlign)return 0;if("right"==i.textAlign)return Math.floor(o-n)}return 0}function c(o,n,i){var a;if(i)a=i;else{if(!(typeof document<"u"))return 0;a=document.createElement("canvas").getContext("2d")}a.font=n.fontOptions+" "+n.fontSize+"px "+n.font;var s=a.measureText(o);return s?s.width:0}d.getMaximumHeightOfEncodings=function x(o){for(var n=0,i=0;i<o.length;i++)o[i].height>n&&(n=o[i].height);return n},d.getEncodingHeight=_,d.getBarcodePadding=b,d.calculateEncodingAttributes=function h(o,n,i){for(var a=0;a<o.length;a++){var m,s=o[a],u=(0,e.default)(n,s.options);m=u.displayValue?c(s.text,u,i):0;var Z=s.data.length*u.width;s.width=Math.ceil(Math.max(m,Z)),s.height=_(s,u),s.barcodePadding=b(m,Z,u)}},d.getTotalWidthOfEncodings=function g(o){for(var n=0,i=0;i<o.length;i++)n+=o[i].width;return n}},7902:(B,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0});var t=function(){function c(o,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,n,i){return n&&c(o.prototype,n),i&&c(o,i),o}}(),v=function b(c){return c&&c.__esModule?c:{default:c}}(r(4070)),_=r(3737),g="http://www.w3.org/2000/svg",x=function(){function c(o,n,i){(function h(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")})(this,c),this.svg=o,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return t(c,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var a=this.encodings[i],s=(0,v.default)(this.options,a.options),u=this.createGroup(n,s.marginTop,this.svg);this.setGroupOptions(u,s),this.drawSvgBarcode(u,s,a),this.drawSVGText(u,s,a),n+=a.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,_.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,_.getTotalWidthOfEncodings)(this.encodings),i=(0,_.getMaximumHeightOfEncodings)(this.encodings),a=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,i),this.options.background&&this.drawRect(0,0,a,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,a){var u,s=a.data;u="top"==i.textPosition?i.fontSize+i.textMargin:0;for(var m=0,Z=0,I=0;I<s.length;I++)Z=I*i.width+a.barcodePadding,"1"===s[I]?m++:m>0&&(this.drawRect(Z-i.width*m,u,i.width*m,i.height,n),m=0);m>0&&this.drawRect(Z-i.width*(m-1),u,i.width*m,i.height,n)}},{key:"drawSVGText",value:function(n,i,a){var u,m,s=this.document.createElementNS(g,"text");i.displayValue&&(s.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),m="top"==i.textPosition?i.fontSize-i.textMargin:i.height+i.textMargin+i.fontSize,"left"==i.textAlign||a.barcodePadding>0?(u=0,s.setAttribute("text-anchor","start")):"right"==i.textAlign?(u=a.width-1,s.setAttribute("text-anchor","end")):(u=a.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",u),s.setAttribute("y",m),s.appendChild(this.document.createTextNode(a.text)),n.appendChild(s))}},{key:"setSvgAttributes",value:function(n,i){var a=this.svg;a.setAttribute("width",n+"px"),a.setAttribute("height",i+"px"),a.setAttribute("x","0px"),a.setAttribute("y","0px"),a.setAttribute("viewBox","0 0 "+n+" "+i),a.setAttribute("xmlns",g),a.setAttribute("version","1.1"),a.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,a){var s=this.document.createElementNS(g,"g");return s.setAttribute("transform","translate("+n+", "+i+")"),a.appendChild(s),s}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,a,s,u){var m=this.document.createElementNS(g,"rect");return m.setAttribute("x",n),m.setAttribute("y",i),m.setAttribute("width",a),m.setAttribute("height",s),u.appendChild(m),m}}]),c}();d.default=x}}]);