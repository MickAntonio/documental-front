"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[402],{3402:(ne,E,o)=>{o.r(E),o.d(E,{EmpresaModule:()=>p});var J=o(9299),A=o(4859),w=o(6709),u=o(9549),T=o(7392),b=o(284),O=o(8255),D=o(8739),Q=o(3162),q=o(3238),z=o(6308),I=o(4385),S=o(455),L=o(266),R=o(4466),U=o(5412),C=o(7775),Y=o(9602),M=o(6257),B=o(1948),f=o(7084),j=o(3267),$=o(811),n=o(4006),G=o(8288),e=o(4650),h=o(1135),F=o(8505),g=o(5698),v=o(4004),y=o(3900),N=o(529),d=o(2340);class m{constructor(t){this._httpClient=t,this._pagination=new h.X(null),this._empresas=new h.X(null),this._empresa=new h.X(null)}get pagination$(){return this._pagination.asObservable()}get empresas$(){return this._empresas.asObservable()}get getEmpresaDefaultParams(){let t=new N.LE;return t=t.append("page",0),t=t.append("size",5),t}getEmpresas(t){return this._httpClient.get(d.N.URL_ROOT+"empresas",{params:t}).pipe((0,F.b)(a=>{this._pagination.next(a.pagination),this._empresas.next(a.data)}))}getOneEmpresa(){return this._httpClient.get(d.N.URL_ROOT_API+"/empresas/1").pipe((0,g.q)(1),(0,v.U)(a=>a.data))}getEmpresa(t){return this._httpClient.get(d.N.URL_ROOT_API+"/empresas/"+t).pipe((0,F.b)(a=>{this._pagination.next(a.pagination),this._empresa.next(a.data)}))}updateEmpresa(t,a){return this.empresas$.pipe((0,g.q)(1),(0,y.w)(s=>this._httpClient.put(d.N.URL_ROOT_API+"/empresas/"+a,t).pipe((0,v.U)(i=>i.data))))}deleteEmpresa(t){return this.empresas$.pipe((0,g.q)(1),(0,y.w)(a=>this._httpClient.delete(d.N.URL_ROOT_API+"/empresas/"+t).pipe((0,v.U)(s=>{const i=a.findIndex(Z=>Z.id===t);return a.splice(i,1),this._empresas.next(a),s}))))}}m.\u0275fac=function(t){return new(t||m)(e.LFG(N.eN))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var P=o(7401),H=o(4880),x=o(6895),X=o(8214);function W(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.showForm=!0)}),e._UZ(1,"mat-icon",26),e.TgZ(2,"span",27),e._uU(3,"Actualizar Empresa"),e.qZA()()}2&r&&(e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil-alt"))}function K(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.showForm=!1)}),e._UZ(1,"mat-icon",26),e.TgZ(2,"span",27),e._uU(3,"Cancelar"),e.qZA()()}2&r&&(e.Q6J("color","accent"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function k(r,t){if(1&r&&(e.TgZ(0,"fuse-alert",28),e._UZ(1,"div",29),e.qZA()),2&r){const a=e.oxw(2);e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxEmpresa")("type",a.alert.type)("@shake","error"===a.alert.type),e.xp6(1),e.Q6J("innerHTML",a.alert.message,e.oJD)}}function V(r,t){if(1&r&&(e.TgZ(0,"table",30)(1,"tbody")(2,"tr")(3,"th"),e._uU(4,"Empresa"),e.qZA(),e.TgZ(5,"td",31),e._uU(6),e.qZA()(),e.TgZ(7,"tr")(8,"th"),e._uU(9,"N\xfamero de identifica\xe7\xe3o"),e.qZA(),e.TgZ(10,"td",31),e._uU(11),e.qZA()(),e.TgZ(12,"tr")(13,"th"),e._uU(14,"Tipo de Natureza"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"th"),e._uU(19,"Actividade"),e.qZA(),e.TgZ(20,"td",31),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"th"),e._uU(24,"Data inicio"),e.qZA(),e.TgZ(25,"td",31),e._uU(26),e.ALo(27,"date"),e.qZA()(),e.TgZ(28,"tr")(29,"th"),e._uU(30,"Telefone"),e.qZA(),e.TgZ(31,"td",31),e._uU(32),e.qZA()(),e.TgZ(33,"tr")(34,"th"),e._uU(35,"E-mail"),e.qZA(),e.TgZ(36,"td",31),e._uU(37),e.qZA()(),e.TgZ(38,"tr")(39,"th"),e._uU(40,"Endereco"),e.qZA(),e.TgZ(41,"td",31),e._uU(42),e.qZA()()()()),2&r){const a=e.oxw().ngIf;e.xp6(6),e.hij(" ",a.nome,""),e.xp6(5),e.hij(" ",a.nif,""),e.xp6(5),e.Oqu(a.naturezaJuridica),e.xp6(5),e.Oqu(a.actividadesEconomica),e.xp6(5),e.Oqu(e.xi3(27,8,a.dataAbertura,"dd/MM/y")),e.xp6(6),e.Oqu(a.telefone),e.xp6(5),e.Oqu(a.email),e.xp6(5),e.Oqu(a.endereco)}}function _(r,t){1&r&&(e.TgZ(0,"div")(1,"div",32)(2,"mat-form-field",33)(3,"mat-label"),e._uU(4,"Nome da Empresa "),e.qZA(),e._UZ(5,"input",34),e.qZA(),e.TgZ(6,"mat-form-field",35)(7,"mat-label"),e._uU(8,"N\xfamero de identifica\xe7\xe3o"),e.qZA(),e._UZ(9,"input",36),e.qZA()(),e.TgZ(10,"div",32)(11,"mat-form-field",33)(12,"mat-label"),e._uU(13,"Tipo de Natureza"),e.qZA(),e._UZ(14,"input",37),e.qZA(),e.TgZ(15,"mat-form-field",35)(16,"mat-label"),e._uU(17,"Actividades"),e.qZA(),e._UZ(18,"input",38),e.qZA()(),e.TgZ(19,"div",32)(20,"mat-form-field",33)(21,"mat-label"),e._uU(22,"Data de abertura"),e.qZA(),e._UZ(23,"input",39),e.qZA(),e.TgZ(24,"mat-form-field",35)(25,"mat-label"),e._uU(26,"Telefone"),e.qZA(),e._UZ(27,"input",40),e.qZA()(),e.TgZ(28,"div",32)(29,"mat-form-field",33)(30,"mat-label"),e._uU(31,"E-email"),e.qZA(),e._UZ(32,"input",41),e.qZA(),e.TgZ(33,"mat-form-field",35)(34,"mat-label"),e._uU(35,"Endere\xe7o"),e.qZA(),e._UZ(36,"input",42),e.qZA()()()),2&r&&(e.xp6(5),e.Q6J("placeholder","Informe  de natureza"),e.xp6(4),e.Q6J("placeholder","Informe n\xfamero de identifica\xe7\xe3o"),e.xp6(5),e.Q6J("placeholder","Informe  de natureza"),e.xp6(4),e.Q6J("placeholder","Informe as actividades"),e.xp6(5),e.Q6J("placeholder","Informe  a data de abertura"),e.xp6(4),e.Q6J("placeholder","Informe o telefone"),e.xp6(5),e.Q6J("placeholder","Informe  de natureza"),e.xp6(4),e.Q6J("placeholder","Informe o Endereco"))}function ee(r,t){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"button",44),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.updateEmpresa(i.formulario.value))}),e._uU(3," Salvar "),e.qZA()(),e.BQk()}if(2&r){const a=e.oxw(2);e.xp6(2),e.Q6J("disabled",!a.formulario.valid)}}function te(r,t){if(1&r&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"a",5),e._uU(6,"Configura\xe7\xf5es"),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"mat-icon",7),e.TgZ(9,"span",8),e._uU(10,"Empresa"),e.qZA()()(),e.TgZ(11,"div",9)(12,"h2",10),e._uU(13," Empresa "),e.qZA()()(),e.TgZ(14,"div",11)(15,"ul",12),e.YNc(16,W,4,2,"button",13),e.YNc(17,K,4,2,"ng-template",null,14,e.W1O),e.qZA()()(),e.YNc(19,k,2,7,"fuse-alert",15),e.TgZ(20,"div",16)(21,"div",17)(22,"form",18)(23,"div",19)(24,"div",20)(25,"div",21),e.YNc(26,V,43,11,"table",22),e.YNc(27,_,37,8,"ng-template",null,23,e.W1O),e.qZA()()()(),e.YNc(29,ee,4,1,"ng-container",24),e.qZA()()()),2&r){const a=e.MAs(18),s=e.MAs(28),i=e.oxw();e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("ngIf",!i.showForm)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.showAlert),e.xp6(3),e.Q6J("formGroup",i.formulario),e.xp6(4),e.Q6J("ngIf",!i.showForm)("ngIfElse",s),e.xp6(3),e.Q6J("ngIf",i.showForm)}}class c{constructor(t,a,s,i,Z,oe,re){this._empresaService=t,this.fb=a,this._fuseConfirmationService=s,this._fuseAlertService=i,this.dialog=Z,this._changeDetectorRef=oe,this._fuseMediaWatcherService=re,this.flashMessage=null,this.isLoading=!1,this.tagsEditMode=!1,this.showForm=!1,this.showAlert=!1,this.alert={type:"success",message:""}}ngOnInit(){this.today_date=(new Date).toLocaleDateString("en-CA"),this.getEmpresa(),this._changeDetectorRef.markForCheck()}getEmpresa(){this.empresa$=this._empresaService.getOneEmpresa(),this._empresaService.getOneEmpresa().subscribe(t=>{this.prepareForm(t)})}prepareForm(t){this.formulario=this.fb.group({id:t.id,nome:new n.NI(t.nome,[n.kI.required]),nif:new n.NI(t.nif,[n.kI.required]),naturezaJuridica:new n.NI(t.naturezaJuridica,[n.kI.required]),actividadesEconomica:new n.NI(t.actividadesEconomica,[n.kI.required]),telefone:new n.NI(t.telefone,[n.kI.required]),email:new n.NI(t.email,[n.kI.required]),endereco:new n.NI(t.endereco,[n.kI.required]),dataAbertura:new n.NI(t.dataAbertura,[n.kI.required])})}updateEmpresa(t){this._empresaService.updateEmpresa(t,t.id).subscribe({error:a=>{this.alert={type:"error",message:`${a}`},this._fuseAlertService.show("alertBoxEmpresa"),this.showAlert=!0,this._changeDetectorRef.markForCheck()},complete:()=>{this.alert={type:"success",message:`Empresa <b>${t.nome}</b> actualizado com successo!`},this._fuseAlertService.show("alertBoxEmpresa"),this.getEmpresa(),this.showAlert=!0,this.showForm=!1,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEmpresa")},15e3),this._changeDetectorRef.markForCheck()}})}}c.\u0275fac=function(t){return new(t||c)(e.Y36(m),e.Y36(n.qu),e.Y36(P.R),e.Y36(C.jm),e.Y36(U.uw),e.Y36(e.sBO),e.Y36(H.T))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-empresa"]],decls:2,vars:3,consts:[["class","sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden border-b dark:bg-transparent",4,"ngIf"],[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","border-b","dark:bg-transparent"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","px-6","py-1","pt-3","sm:py-3","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["class","ml-auto mb-1 border-rad-5","mat-flat-button","",3,"color","click",4,"ngIf","ngIfElse"],["buttonClose",""],["class","mx-8 mt-4",3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:overflow-y-auto","mx-8","mt-4"],["enctype","multipart/form-data",3,"formGroup"],["id","myTabContent",1,"tab-content","mat-elevation-z1"],["id","dados-tab-pane","role","tabpanel","aria-labelledby","home-tab","tabindex","0",1,"tab-pane","fade","show","active"],[1,"bg-white","py-8","px-8"],["class","table table-bordered table-empresa",4,"ngIf","ngIfElse"],["userForm1",""],[4,"ngIf"],["mat-flat-button","",1,"ml-auto","mb-1","border-rad-5",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"mx-8","mt-4",3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[1,"table","table-bordered","table-empresa"],[1,""],[1,"flex"],[1,"flex-auto","mr-1"],["matInput","","maxlength","250","formControlName","nome",3,"placeholder"],[1,"flex-auto"],["matInput","","maxlength","50","formControlName","nif",3,"placeholder"],["matInput","","formControlName","naturezaJuridica",3,"placeholder"],["matInput","","maxlength","250","formControlName","actividadesEconomica",3,"placeholder"],["type","date","matInput","","formControlName","dataAbertura",3,"placeholder"],["matInput","","formControlName","telefone",3,"placeholder"],["matInput","","maxlength","50","formControlName","email",3,"placeholder"],["matInput","","maxlength","250","formControlName","endereco",3,"placeholder"],[1,"flex","justify-end"],["mat-flat-button","","color","primary",1,"ml-auto","mt-2","mb-1","border-rad-5",3,"disabled","click"]],template:function(t,a){1&t&&(e.YNc(0,te,30,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,a.empresa$))},dependencies:[A.lW,u.KE,u.hX,T.Hw,b.Nt,x.O5,n._Y,n.Fj,n.JJ,n.JL,n.nD,n.sg,n.u,X.W,x.Ov,x.uU],styles:[".navigation button{min-width:1rem!important;width:1rem!important;height:2rem!important;min-height:2rem!important}.navigation button .mat-icon{min-height:10px!important;min-width:10px!important;height:16px;width:16px}:host{overflow-y:scroll!important}th{font-size:13px;--bs-text-opacity: 1 !important;color:#6c757d!important}td{font-size:14px;--bs-text-opacity: 1 !important;color:#6c757d!important}.table{border-color:#dee2e6!important}.table-empresa th{width:60%;text-align:start}\n"],encapsulation:2,data:{animation:G.L},changeDetection:0});class l{constructor(t){this._empresaService=t}resolve(t,a){return this._empresaService.getOneEmpresa()}}l.\u0275fac=function(t){return new(t||l)(e.LFG(m))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"});const ae=[{path:"",component:c,resolve:{Empresa:l}}];class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[J.Bz.forChild(ae),A.ot,w.p9,u.lN,T.Ps,b.c,O.Tx,D.TU,Q.Cv,q.si,z.JX,I.LD,S.rP,L.AV,j.SJ,B.Fk,R.m,$.vV,U.Is,C.fC,Y.FA,M.T5,f.To,f.To,f.To,I.LD]})}}]);