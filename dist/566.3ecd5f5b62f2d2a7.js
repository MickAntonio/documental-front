"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[566],{1566:(R,f,s)=>{s.r(f),s.d(f,{ProjectModule:()=>Z});var l=s(9299),d=s(4859),p=s(811),m=s(4850),u=s(7392),x=s(8255),r=s(3162),U=s(3238),L=s(3267),w=s(6308),Q=s(7155),k=s(3848),S=s(5707),F=s(6205),J=s(4466),M=s(5861),N=s(7579),C=s(2722),q=s(8739),j=s(9969),P=s(529),c=s(4006),t=s(4650),_=s(5412),I=s(9602),E=s(9549),G=s(284);class y{constructor(o,e){this.dialogRef=o,this.fb=e,this.titulo="Peri\xf3do de visualiza\xe7\xe3o",this.subSitulo="Alterar peri\xf3do de m\xe9tricas do dashboard"}ngOnInit(){this.periodoSearchForm=this.fb.group({dtInitial:new c.NI(null,[c.kI.required]),dtEnd:new c.NI(null,[c.kI.required])})}onNoClick(){this.dialogRef.close()}}y.\u0275fac=function(o){return new(o||y)(t.Y36(_.so),t.Y36(c.qu))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-form-dialog-periodo"]],decls:38,vars:13,consts:[[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"mb-4","border-t"],[3,"formGroup"],[1,"flex","flex-col","sm:flex-row","flex-auto","items-center","sm:items-start","p-4","pb-2","sm:pb-4"],[1,"flex","flex-col","w-full"],[1,"flex-auto","w-[100%]"],[1,"flex"],[1,"w-[100%]","px-2"],["formControlName","dtInitial","matInput","",3,"placeholder","matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","dtEnd",3,"placeholder","matDatepicker"],["picker2",""],[1,"border-t"],[1,"flex","items-center","justify-center","sm:justify-end","px-6","py-4","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",1,"ml-4","border-rad-5",3,"matDialogClose"],["mat-flat-button","","color","primary",1,"ml-4","border-rad-5",3,"disabled","matDialogClose"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0),t.ynx(1),t.TgZ(2,"div",1)(3,"div",2)(4,"p",3),t._uU(5),t.qZA(),t.TgZ(6,"p",4),t._uU(7),t.qZA()()(),t.BQk(),t.ynx(8),t.TgZ(9,"div",5)(10,"button",6),t._UZ(11,"mat-icon",7),t.qZA()(),t.BQk(),t._UZ(12,"div",8),t.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"mat-form-field",14),t._UZ(19,"input",15)(20,"mat-datepicker-toggle",16)(21,"mat-datepicker",null,17),t.qZA()(),t.TgZ(23,"div",13)(24,"mat-form-field",14),t._UZ(25,"input",18)(26,"mat-datepicker-toggle",16)(27,"mat-datepicker",null,19),t.qZA()()()()()(),t._UZ(29,"div",20),t.ynx(30),t.TgZ(31,"div",21),t.ynx(32),t.TgZ(33,"button",22),t._uU(34," Fechar "),t.qZA(),t.BQk(),t.ynx(35),t.TgZ(36,"button",23),t._uU(37," Visualizar "),t.qZA(),t.BQk(),t.qZA(),t.BQk(),t.qZA()),2&o){const a=t.MAs(22),n=t.MAs(28);t.xp6(5),t.Oqu(e.titulo),t.xp6(2),t.hij(" ",e.subSitulo," "),t.xp6(3),t.Q6J("matDialogClose",void 0),t.xp6(3),t.Q6J("formGroup",e.periodoSearchForm),t.xp6(6),t.Q6J("placeholder","Data inicial")("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(5),t.Q6J("placeholder","Data final")("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Q6J("matDialogClose","cancelled"),t.xp6(3),t.Q6J("disabled",!e.periodoSearchForm.valid)("matDialogClose",e.periodoSearchForm.value)}},dependencies:[d.lW,d.RK,u.Hw,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.ZT,I.Mq,I.hl,I.nW,E.KE,E.R9,G.Nt],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel{width:32rem}}.fuse-confirmation-dialog-panel .mat-dialog-container{padding:0!important}.fuse-confirmation-dialog-panel .mat-dialog-container .mat-success{background-color:green;color:#fff}.mat-dialog-container{border-radius:5px!important}\n"],encapsulation:2});var $=s(5439),Y=s.n($),z=s(1135),O=s(8505),B=s(2340);class h{constructor(o){this._httpClient=o,this._data=new z.X(null),this._dataDashboard=new z.X(null)}get data$(){return this._data.asObservable()}getData(){return this._httpClient.get("api/dashboards/project").pipe((0,O.b)(o=>{this._data.next(o)}))}get dataDashboard$(){return this._dataDashboard.asObservable()}getDataDashboard(){return this._httpClient.get(B.N.URL_ROOT_API+"/dashboard").pipe((0,O.b)(o=>{this._dataDashboard.next(o)}))}getDataDashboardDataRange(o){return this._httpClient.get(B.N.URL_ROOT_API+"/dashboard",{params:o}).pipe((0,O.b)(e=>{this._dataDashboard.next(e)}))}}h.\u0275fac=function(o){return new(o||h)(t.LFG(P.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var W=s(4693),H=s(7756),T=s(6895);function K(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div",19),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.AsE("Bem vindo de volta, ",null==e.userProfile?null:e.userProfile.firstName," ",null==e.userProfile?null:e.userProfile.lastName,"!")}}function X(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",74)(1,"td",75),t._uU(2),t.qZA(),t.TgZ(3,"td",72),t._uU(4," Tipo: "),t.TgZ(5,"span"),t._uU(6),t.qZA(),t._UZ(7,"br"),t._uU(8," Classifica\xe7\xe3o: "),t.TgZ(9,"span",76),t._uU(10),t.qZA(),t._UZ(11,"br"),t._uU(12," Data: "),t.TgZ(13,"span",76),t._uU(14),t.ALo(15,"date"),t.qZA(),t._UZ(16,"br"),t.qZA(),t.TgZ(17,"td",72),t._uU(18," Remitente: "),t.TgZ(19,"span",76),t._uU(20),t.qZA(),t._UZ(21,"br"),t._uU(22," Destinat\xe1rio: "),t.TgZ(23,"span",76),t._uU(24),t.qZA(),t._UZ(25,"br"),t.qZA(),t.TgZ(26,"td",77)(27,"button",78),t.NdJ("click",function(){const g=t.CHM(e).$implicit,D=t.oxw(3);return t.KtG(D.showRegisto(g.id))}),t._UZ(28,"mat-icon",79),t.qZA()()()}if(2&i){const e=o.$implicit,a=t.oxw(3);t.xp6(2),t.Oqu(null==e.documento?null:e.documento.numeroDocumento),t.xp6(3),t.Gre("font-semibold ",a.getTipoRegistoColor(e.registoTipo),""),t.xp6(1),t.Oqu(e.registoTipo),t.xp6(4),t.Oqu(null==e.tipo?null:e.tipo.nome),t.xp6(4),t.Oqu(t.xi3(15,10,e.created_at,"dd/MM/y HH:mm:ss")),t.xp6(6),t.hij(" ",null!==(null==e||null==e.registo_remetente?null:e.registo_remetente.entidadeId)?null==e||null==e.registo_remetente||null==e.registo_remetente.entidade?null:e.registo_remetente.entidade.nome:null!==(null==e||null==e.registo_remetente?null:e.registo_remetente.utilizadorId)?null==e||null==e.registo_remetente?null:e.registo_remetente.utilizador.name:a.showRemententeGroupName(null==e||null==e.registo_remetente?null:e.registo_remetente.grupoId)," "),t.xp6(4),t.Oqu(a.showDestinatariosString(null==e?null:e.registo_destinatario)),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:chevron-right")}}function V(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"table",69)(2,"tr",70)(3,"td",71),t._uU(4,"Nr."),t.qZA(),t.TgZ(5,"td",72),t._uU(6,"Informa\xe7\xe3o do Documento"),t.qZA(),t.TgZ(7,"td",72),t._uU(8,"Intervenientes"),t.qZA(),t._UZ(9,"td",72),t.qZA(),t.YNc(10,X,29,13,"tr",73),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",null==e.dataDasboard?null:e.dataDasboard.data.ultimosDocumentosRecebidos)}}function tt(i,o){1&i&&(t.TgZ(0,"div",80),t._UZ(1,"mat-icon",81),t.TgZ(2,"div",82),t._uU(3," N\xe3o h\xe1 Documentos Scaneados! "),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:clipboard-list"))}const et=function(i){return{"pointer-events-none":i}},ot=function(){return[5]};function at(i,o){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23),t._uU(4,"Documentos por Classifica\xe7\xe3o"),t.qZA()(),t.TgZ(5,"div",24)(6,"div",25)(7,"div",26),t._uU(8,"Tipos de documentos"),t.qZA(),t.TgZ(9,"div",25),t._UZ(10,"apx-chart",27),t.qZA()(),t.TgZ(11,"div",28)(12,"div",26),t._uU(13,"Documentos"),t.qZA(),t.TgZ(14,"div",29)(15,"div",30)(16,"div",31),t._uU(17),t.qZA(),t.TgZ(18,"div",32),t._uU(19,"Por Classificar"),t.qZA()(),t.TgZ(20,"div",33)(21,"div",31),t._uU(22),t.qZA(),t.TgZ(23,"div",32),t._uU(24,"Total Classificados"),t.qZA()(),t.TgZ(25,"div",34)(26,"div",35),t._uU(27),t.qZA(),t.TgZ(28,"div",36),t._uU(29,"Hoje"),t.qZA()(),t.TgZ(30,"div",37)(31,"div",35),t._uU(32),t.qZA(),t.TgZ(33,"div",36),t._uU(34,"Por Ler"),t.qZA()(),t.TgZ(35,"div",34)(36,"div",35),t._uU(37),t.qZA(),t.TgZ(38,"div",36),t._uU(39,"Por Responder"),t.qZA()(),t.TgZ(40,"div",38)(41,"div",35),t._uU(42),t.qZA(),t.TgZ(43,"div",36),t._uU(44,"Fora do Prazo"),t.qZA()()()()()(),t.TgZ(45,"div",39)(46,"div",22)(47,"div",23),t._uU(48,"Tipo de Registo"),t.qZA()(),t.TgZ(49,"div",40),t._UZ(50,"apx-chart",41),t.qZA(),t.TgZ(51,"div",42)(52,"div",43)(53,"div",44),t._uU(54),t.qZA(),t.TgZ(55,"div",45),t._uU(56,"Entradas"),t.qZA()(),t.TgZ(57,"div",43)(58,"div",44),t._uU(59),t.qZA(),t.TgZ(60,"div",45),t._uU(61,"Saidas"),t.qZA()(),t.TgZ(62,"div",43)(63,"div",44),t._uU(64),t.qZA(),t.TgZ(65,"div",45),t._uU(66,"Internos"),t.qZA()()()(),t.TgZ(67,"div",46)(68,"div",23),t._uU(69,"Ultimos Documentos Recebidos"),t.qZA(),t.TgZ(70,"div",47),t.YNc(71,V,11,1,"ng-container",48),t.YNc(72,tt,4,1,"ng-template",null,49,t.W1O),t.qZA(),t.TgZ(74,"div",50)(75,"div",51),t._UZ(76,"mat-paginator",52),t.qZA()()(),t.TgZ(77,"div",53)(78,"div",54)(79,"div",23),t._uU(80,"Utilizadores"),t.qZA()(),t.TgZ(81,"div",55)(82,"div",56),t._uU(83),t.qZA(),t.TgZ(84,"div",57),t._uU(85,"Cadastrados"),t.qZA(),t.TgZ(86,"div",58)(87,"div",59),t._uU(88,"Utilizadores Activos:"),t.qZA(),t.TgZ(89,"div",60),t._uU(90),t.qZA()()()(),t.TgZ(91,"div",53)(92,"div",61)(93,"div",23),t._uU(94,"Entidades"),t.qZA()(),t.TgZ(95,"div",55)(96,"div",62),t._uU(97),t.qZA(),t.TgZ(98,"div",63),t._uU(99,"Cadastrados"),t.qZA(),t.TgZ(100,"div",58)(101,"div",59),t._uU(102,"Entidades Activas:"),t.qZA(),t.TgZ(103,"div",60),t._uU(104),t.qZA()()()(),t.TgZ(105,"div",53)(106,"div",61)(107,"div",23),t._uU(108,"Tipos de Documentos"),t.qZA()(),t.TgZ(109,"div",55)(110,"div",64),t._uU(111),t.qZA(),t.TgZ(112,"div",65),t._uU(113,"Cadastrados"),t.qZA(),t.TgZ(114,"div",58)(115,"div",59),t._uU(116,"Modelos de Documentos:"),t.qZA(),t.TgZ(117,"div",60),t._uU(118),t.qZA()()()(),t.TgZ(119,"div",53)(120,"div",61)(121,"div",23),t._uU(122,"Encaminhamentos"),t.qZA()(),t.TgZ(123,"div",55)(124,"div",66),t._uU(125),t.qZA(),t.TgZ(126,"div",67),t._uU(127,"Total"),t.qZA(),t.TgZ(128,"div",58)(129,"div",59),t._uU(130,"Internos:"),t.qZA(),t.TgZ(131,"div",60),t._uU(132),t.qZA(),t.TgZ(133,"div",68),t._uU(134,"Externos:"),t.qZA(),t.TgZ(135,"div",60),t._uU(136),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(10),t.Q6J("chart",e.chartGithubIssues.chart)("colors",e.chartGithubIssues.colors)("dataLabels",e.chartGithubIssues.dataLabels)("grid",e.chartGithubIssues.grid)("labels",e.chartGithubIssues.labels)("legend",e.chartGithubIssues.legend)("plotOptions",e.chartGithubIssues.plotOptions)("series",e.chartGithubIssues.series)("states",e.chartGithubIssues.states)("stroke",e.chartGithubIssues.stroke)("tooltip",e.chartGithubIssues.tooltip)("xaxis",e.chartGithubIssues.xaxis)("yaxis",e.chartGithubIssues.yaxis),t.xp6(7),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosPorClassificar," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosTotalClassificados," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosHoje," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosPorLer," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosResponder," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tiposDocumentos.overview.documentosForaPrazo," "),t.xp6(8),t.Q6J("chart",e.chartTaskDistribution.chart)("labels",e.chartTaskDistribution.labels)("legend",e.chartTaskDistribution.legend)("plotOptions",e.chartTaskDistribution.plotOptions)("series",e.chartTaskDistribution.series)("states",e.chartTaskDistribution.states)("stroke",e.chartTaskDistribution.stroke)("theme",e.chartTaskDistribution.theme)("tooltip",e.chartTaskDistribution.tooltip)("yaxis",e.chartTaskDistribution.yaxis),t.xp6(4),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tipoRegisto.overview.entrada," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tipoRegisto.overview.saida," "),t.xp6(5),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.tipoRegisto.overview.interno," "),t.xp6(7),t.Q6J("ngIf",!0),t.xp6(5),t.Q6J("ngClass",t.VKq(48,et,e.isLoading))("length",5)("pageIndex",0)("pageSize",0)("pageSizeOptions",t.DdM(50,ot))("showFirstLastButtons",!0),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.utilizadores.cadastrados),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.utilizadores.cadastrados),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.tiposEntidades.cadastrados),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.tiposEntidades.activos),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.tipos.cadastrados),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.tipos.activos),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.encaminhamentos.total),t.xp6(7),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.encaminhamentos.interno),t.xp6(4),t.Oqu(null==e.dataDasboard?null:e.dataDasboard.data.encaminhamentos.externo)}}function st(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div",103)(2,"div",7),t._UZ(3,"div",104),t.TgZ(4,"div",105),t._uU(5),t.qZA()(),t.TgZ(6,"div",106),t._uU(7),t.qZA(),t.TgZ(8,"div",107),t._uU(9),t.ALo(10,"number"),t.qZA()(),t.BQk()),2&i){const e=o.$implicit,a=o.index,n=t.oxw(2);t.xp6(3),t.Udp("background-color",n.chartAge.colors[a]),t.xp6(2),t.Oqu(n.dataDasboard.data.espacoDisco.labels[a]),t.xp6(2),t.Oqu(n.bytesToString(e)),t.xp6(2),t.hij("",t.xi3(10,5,n.spacePorcentage(a),".2-2"),"%")}}function it(i,o){if(1&i&&(t.TgZ(0,"div",83)(1,"div",84)(2,"div",23),t._uU(3,"Estado do Disco"),t.qZA(),t.TgZ(4,"div",85),t._UZ(5,"apx-chart",86),t.qZA(),t.TgZ(6,"div",87)(7,"div",88),t.YNc(8,st,11,8,"ng-container",89),t.qZA()()(),t.TgZ(9,"div",90)(10,"div",91)(11,"div",92)(12,"div",61)(13,"div",23),t._uU(14,"Quantidade de Ficheiros"),t.qZA()(),t.TgZ(15,"div",93)(16,"div",28)(17,"div",94),t._uU(18),t.qZA(),t.TgZ(19,"div",7)(20,"div",95),t._uU(21," Total de ficheiros existentes "),t.qZA()()()()(),t.TgZ(22,"div",28)(23,"mat-icon",96),t._uU(24,"file_copy"),t.qZA()()(),t.TgZ(25,"div",91)(26,"div",92)(27,"div",61)(28,"div",23),t._uU(29,"Armazenamento Utilizado"),t.qZA()(),t.TgZ(30,"div",93)(31,"div",28)(32,"div",97),t._uU(33),t.qZA(),t.TgZ(34,"div",7)(35,"div",95),t._uU(36," Total de espa\xe7o ocupado por ficheiros "),t.qZA()()()()(),t.TgZ(37,"div",28),t._UZ(38,"mat-icon",98),t.qZA()(),t.TgZ(39,"div",91)(40,"div",92)(41,"div",61)(42,"div",23),t._uU(43,"Downloads Realizados"),t.qZA()(),t.TgZ(44,"div",93)(45,"div",28)(46,"div",99),t._uU(47," 0 GB "),t.qZA(),t.TgZ(48,"div",7)(49,"div",95),t._uU(50," Total de "),t.TgZ(51,"span",100),t._uU(52,"0"),t.qZA(),t._uU(53," arquivos baixados "),t.qZA()()()()(),t.TgZ(54,"div",28),t._UZ(55,"mat-icon",101),t.qZA()()(),t.TgZ(56,"div",102)(57,"div",22)(58,"div",23),t._uU(59,"Armazenamento por Tipo de Documento"),t.qZA()(),t.TgZ(60,"div",25)(61,"div",25),t._UZ(62,"apx-chart",27),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("chart",e.chartAge.chart)("colors",e.chartAge.colors)("labels",e.chartAge.labels)("plotOptions",e.chartAge.plotOptions)("series",e.chartAge.series)("states",e.chartAge.states)("tooltip",e.chartAge.tooltip),t.xp6(3),t.Q6J("ngForOf",e.dataDasboard.data.espacoDisco.series),t.xp6(10),t.hij(" ",null==e.dataDasboard?null:e.dataDasboard.data.totalFicheiros," "),t.xp6(15),t.hij(" ",e.bytesToString(null==e.dataDasboard?null:e.dataDasboard.data.espacoDisco.series[1])," "),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:cloud-upload"),t.xp6(17),t.Q6J("svgIcon","heroicons_solid:download"),t.xp6(7),t.Q6J("chart",e.chartGithubIssues2.chart)("colors",e.chartGithubIssues2.colors)("dataLabels",e.chartGithubIssues2.dataLabels)("grid",e.chartGithubIssues2.grid)("labels",e.chartGithubIssues2.labels)("legend",e.chartGithubIssues2.legend)("plotOptions",e.chartGithubIssues2.plotOptions)("series",e.chartGithubIssues2.series)("states",e.chartGithubIssues2.states)("stroke",e.chartGithubIssues2.stroke)("tooltip",e.chartGithubIssues2.tooltip)("xaxis",e.chartGithubIssues2.xaxis)("yaxis",e.chartGithubIssues2.yaxis)}}class A{constructor(o,e,a,n,g,D){this._projectService=o,this._usersService=e,this._router=a,this.dialog=n,this._changeDetectorRef=g,this._KeycloakService=D,this.chartGithubIssues={},this.chartGithubIssues2={},this.chartTaskDistribution={},this.chartBudgetDistribution={},this.chartWeeklyExpenses={},this.chartMonthlyExpenses={},this.chartYearlyExpenses={},this.selectedProject="ACME Corp. Backend App",this.dtInitial=Y()().subtract(6,"months").format("DD-MM-YYYY"),this.dtEnd=Y()().format("DD-MM-YYYY"),this._unsubscribeAll=new N.x,this.isLoggedIn=!1,this.userProfile=null,this.units=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],this.loadUserInfo()}ngOnInit(){this._projectService.dataDashboard$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(o=>{this.dataDasboard=o}),this._projectService.data$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(o=>{this.data=o,this._prepareChartData()}),this._usersService.groups$.subscribe(o=>{this.groupsList=o}),window.Apex={chart:{events:{mounted:(o,e)=>{this._fixSvgFill(o.el)},updated:(o,e)=>{this._fixSvgFill(o.el)}}}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(o,e){return e.id||o}_fixSvgFill(o){const e=this._router.url;Array.from(o.querySelectorAll("*[fill]")).filter(a=>-1!==a.getAttribute("fill").indexOf("url(")).forEach(a=>{const n=a.getAttribute("fill");a.setAttribute("fill",`url(${e}${n.slice(n.indexOf("#"))}`)})}_prepareChartData(){this.chartGithubIssues={chart:{fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",toolbar:{show:!1},zoom:{enabled:!1}},colors:["#64748B","#94A3B8"],dataLabels:{enabled:!0,enabledOnSeries:[0],background:{borderWidth:0}},grid:{borderColor:"var(--fuse-border)"},labels:this.dataDasboard?.data?.tiposDocumentos.labels,legend:{show:!1},plotOptions:{bar:{columnWidth:"50%"}},series:this.dataDasboard?.data.tiposDocumentos.series,states:{hover:{filter:{type:"darken",value:.75}}},stroke:{width:[3,0]},tooltip:{followCursor:!0,theme:"dark"},xaxis:{axisBorder:{show:!1},axisTicks:{color:"var(--fuse-border)"},labels:{style:{colors:"var(--fuse-text-secondary)"}},tooltip:{enabled:!1}},yaxis:{labels:{offsetX:-16,style:{colors:"var(--fuse-text-secondary)"}}}},this.chartGithubIssues2={chart:{fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",toolbar:{show:!1},zoom:{enabled:!1}},colors:["#64748B","#94A3B8"],dataLabels:{enabled:!0,enabledOnSeries:[0],background:{borderWidth:0}},grid:{borderColor:"var(--fuse-border)"},labels:this.dataDasboard?.data?.tiposDocumentosEspaco.labels,legend:{show:!1},plotOptions:{bar:{columnWidth:"50%"}},series:this.dataDasboard?.data?.tiposDocumentosEspaco.series,states:{hover:{filter:{type:"darken",value:.75}}},stroke:{width:[3,0]},tooltip:{followCursor:!0,theme:"dark"},xaxis:{axisBorder:{show:!1},axisTicks:{color:"var(--fuse-border)"},labels:{style:{colors:"var(--fuse-text-secondary)"}},tooltip:{enabled:!1}},yaxis:{labels:{offsetX:-16,style:{colors:"var(--fuse-text-secondary)"}}}},this.chartTaskDistribution={chart:{fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"polarArea",toolbar:{show:!1},zoom:{enabled:!1}},labels:this.dataDasboard?.data.tipoRegisto.labels,legend:{position:"bottom"},plotOptions:{polarArea:{spokes:{connectorColors:"var(--fuse-border)"},rings:{strokeColor:"var(--fuse-border)"}}},series:this.dataDasboard?.data.tipoRegisto.series,states:{hover:{filter:{type:"darken",value:.75}}},stroke:{width:2},theme:{monochrome:{enabled:!0,color:"#93C5FD",shadeIntensity:.75,shadeTo:"dark"}},tooltip:{followCursor:!0,theme:"dark"},yaxis:{labels:{style:{colors:"var(--fuse-text-secondary)"}}}},this.chartBudgetDistribution={chart:{fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"radar",sparkline:{enabled:!0}},colors:["#818CF8"],dataLabels:{enabled:!0,formatter:o=>`${o}%`,textAnchor:"start",style:{fontSize:"13px",fontWeight:500},background:{borderWidth:0,padding:4},offsetY:-15},markers:{strokeColors:"#818CF8",strokeWidth:4},plotOptions:{radar:{polygons:{strokeColors:"var(--fuse-border)",connectorColors:"var(--fuse-border)"}}},series:this.data.budgetDistribution.series,stroke:{width:2},tooltip:{theme:"dark",y:{formatter:o=>`${o}%`}},xaxis:{labels:{show:!0,style:{fontSize:"12px",fontWeight:"500"}},categories:this.data.budgetDistribution.categories},yaxis:{max:o=>parseInt((o+10).toFixed(0),10),tickAmount:7}},this.chartWeeklyExpenses={chart:{animations:{enabled:!1},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",sparkline:{enabled:!0}},colors:["#22D3EE"],series:this.data.weeklyExpenses.series,stroke:{curve:"smooth"},tooltip:{theme:"dark"},xaxis:{type:"category",categories:this.data.weeklyExpenses.labels},yaxis:{labels:{formatter:o=>`$${o}`}}},this.chartMonthlyExpenses={chart:{animations:{enabled:!1},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",sparkline:{enabled:!0}},colors:["#4ADE80"],series:this.data.monthlyExpenses.series,stroke:{curve:"smooth"},tooltip:{theme:"dark"},xaxis:{type:"category",categories:this.data.monthlyExpenses.labels},yaxis:{labels:{formatter:o=>`$${o}`}}},this.chartYearlyExpenses={chart:{animations:{enabled:!1},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",sparkline:{enabled:!0}},colors:["#FB7185"],series:this.data.yearlyExpenses.series,stroke:{curve:"smooth"},tooltip:{theme:"dark"},xaxis:{type:"category",categories:this.data.yearlyExpenses.labels},yaxis:{labels:{formatter:o=>`$${o}`}}},this.chartAge={chart:{animations:{speed:400,animateGradually:{enabled:!1}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"donut",sparkline:{enabled:!0}},colors:["rgb(34, 197, 94)","#db605e"],labels:this.dataDasboard?.data.espacoDisco.labels,plotOptions:{pie:{customScale:.9,expandOnClick:!1,donut:{size:"70%"}}},series:this.dataDasboard?.data.espacoDisco.series,states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{enabled:!0,fillSeriesColor:!1,theme:"dark",custom:({seriesIndex:o,w:e})=>`<div class="flex items-center h-8 min-h-8 max-h-8 px-3">\n                                                    <div class="w-3 h-3 rounded-full" style="background-color: ${e.config.colors[o]};"></div>\n                                                    <div class="ml-2 text-md leading-none">${e.config.labels[o]}::</div>\n                                                    <div class="ml-2 text-md font-bold leading-none">${this.bytesToString(e.config.series[o])}</div>\n                                                </div>`}}}bytesToString(o){let e=0,a=parseInt(o,10)||0;for(;a>=1024&&++e;)a/=1024;return a.toFixed(a<10&&e>0?1:0)+" "+this.units[e]}spacePorcentage(o){var e=this.dataDasboard?.data.espacoDisco.series[0]+this.dataDasboard?.data.espacoDisco.series[1],a=0;return 0==o?a=this.dataDasboard?.data.espacoDisco.series[0]/e*100:1==o&&(a=this.dataDasboard?.data.espacoDisco.series[1]/e*100),a}showRemententeGroupName(o){return this.groupsList.filter(e=>e.id==o).map(e=>e.name).toString()}showDestinatariosString(o){var e=o.filter(a=>a.tipo==j.H.ENTIDADE).map(a=>a.entidade.nome).toString();return e+=o.filter(a=>a.tipo==j.H.UTILIZADOR).map(a=>(""!=e?", ":"")+a.utilizador.name).toString(),e+=o.filter(a=>a.tipo==j.H.GRUPO).map(a=>(""!=e?", ":"")+this.showRemententeGroupName(a.grupoId)).toString()}getTipoRegistoColor(o){return"ENTRADA"==o?"text-green-800":"SAIDA"==o?"text-amber-400":"text-indigo-800"}showRegisto(o){this._router.navigate(["registo/entradas/"+o])}openPeriodoDialog(){this.dialog.open(y,{width:"500px",height:"340px",panelClass:"fuse-confirmation-dialog-panel"}).afterClosed().subscribe(e=>{if(e&&"cancelled"!=e){const a=e.dtInitial,n=e.dtEnd;let g=new P.LE;g=g.append("dtInitial",a.format("YYYY-MM-DD")),g=g.append("dtEnd",n.format("YYYY-MM-DD")),this.dtInitial=a.format("DD-MM-YYYY"),this.dtEnd=n.format("DD-MM-YYYY"),this._projectService.getDataDashboardDataRange(g).subscribe(D=>{this._changeDetectorRef.markForCheck()}),this._projectService.dataDashboard$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(D=>{this.dataDasboard=D,this._prepareChartData()})}})}loadUserInfo(){var o=this;return(0,M.Z)(function*(){o.isLoggedIn=yield o._KeycloakService.isLoggedIn(),o.isLoggedIn&&(o.userProfile=yield o._KeycloakService.loadUserProfile()),console.log(),o._changeDetectorRef.markForCheck()})()}}A.\u0275fac=function(o){return new(o||A)(t.Y36(h),t.Y36(W.f),t.Y36(l.F0),t.Y36(_.uw),t.Y36(t.sBO),t.Y36(H.MZ))},A.\u0275cmp=t.Xpm({type:A,selectors:[["project"]],viewQuery:function(o,e){if(1&o&&(t.Gf(q.NW,5),t.Gf(w.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(e._paginator=a.first),t.iGM(a=t.CRH())&&(e._sort=a.first)}},decls:23,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-12"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[4,"transloco"],[1,"flex","items-center"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-1.5","leading-6","truncate","text-secondary"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",1,"fuse-mat-button-rounded",3,"color","click"],[1,"ml-2"],[1,"flex-auto","border-t","-mt-px","pt-1","sm:pt-2"],[1,"w-full","max-w-screen-xl","mx-auto"],["mat-stretch-tabs","false",1,"sm:px-2",3,"animationDuration"],["label","Documentos e Processos"],["matTabContent",""],["label","Armazenamento"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","w-full","min-w-0"],[1,"sm:col-span-2","md:col-span-4","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","items-start","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"grid","grid-cols-1","lg:grid-cols-2","grid-flow-row","gap-6","w-full","mt-8","sm:mt-4"],[1,"flex","flex-col","flex-auto"],[1,"font-medium","text-secondary"],[1,"flex-auto","w-full","h-80",3,"chart","colors","dataLabels","grid","labels","legend","plotOptions","series","states","stroke","tooltip","xaxis","yaxis"],[1,"flex","flex-col"],[1,"flex-auto","grid","grid-cols-4","gap-4","mt-6"],[1,"col-span-2","flex","flex-col","items-center","justify-center","py-8","px-1","rounded-2xl","bg-indigo-50","text-indigo-800","dark:bg-white","dark:bg-opacity-5","dark:text-indigo-400"],[1,"text-5xl","sm:text-7xl","font-semibold","leading-none","tracking-tight"],[1,"mt-1","text-sm","sm:text-lg","font-medium"],[1,"col-span-2","flex","flex-col","items-center","justify-center","py-8","px-1","rounded-2xl","bg-green-50","text-green-800","dark:bg-white","dark:bg-opacity-5","dark:text-green-500"],[1,"col-span-2","sm:col-span-1","flex","flex-col","items-center","justify-center","py-8","px-1","rounded-2xl","bg-gray-100","text-secondary","dark:bg-white","dark:bg-opacity-5"],[1,"text-5xl","font-semibold","leading-none","tracking-tight"],[1,"mt-1","text-sm","font-medium","text-center"],[1,"col-span-2","sm:col-span-1","flex","flex-col","items-center","justify-center","py-8","px-1","rounded-2xl","bg-amber-50","text-secondary","dark:bg-white","dark:bg-opacity-5"],[1,"col-span-2","sm:col-span-1","flex","flex-col","items-center","justify-center","py-8","px-1","rounded-2xl","bg-red-100","text-secondary","dark:bg-white","dark:bg-opacity-5"],[1,"sm:col-span-2","md:col-span-4","lg:col-span-2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","flex-auto","mt-6"],[1,"flex-auto","w-full","h-80",3,"chart","labels","legend","plotOptions","series","states","stroke","theme","tooltip","yaxis"],[1,"grid","grid-cols-3","border-t","divide-x","-m-6","mt-4","bg-gray-50","dark:bg-transparent"],[1,"flex","flex-col","items-center","justify-center","p-6","sm:p-8"],[1,"text-5xl","font-semibold","leading-none","tracking-tighter"],[1,"mt-1","text-center","text-secondary"],[1,"sm:col-span-2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],[4,"ngIf"],["noDocumentos",""],[1,"grid","grid-cols-1","border-t","divide-x","-m-6","mt-4","bg-gray-50","dark:bg-transparent"],[1,"p-5","sm:p-7"],[1,"bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","items-start","justify-center"],[1,"flex","flex-col","items-center","mt-2"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-blue-600"],[1,"text-lg","font-medium","text-blue-600","dark:text-blue-500"],[1,"flex","items-baseline","justify-center","w-full","mt-5","text-secondary"],[1,"text-md","font-medium","truncate"],[1,"ml-1.5","text-lg","font-semibold"],[1,"flex","items-start","justify-between"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-red-500"],[1,"text-lg","font-medium","text-red-600","dark:text-red-500"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-amber-500"],[1,"text-lg","font-medium","text-amber-600","dark:text-amber-500"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-green-500"],[1,"text-lg","font-medium","text-green-600","dark:text-green-500"],[1,"text-md","font-medium","truncate","ml-2"],["matSort","",1,"w-full","bg-transparent"],[1,"sticky","top-0","h-14","text-black","shadow","dark:bg-opacity-5"],[1,"px-1","w-[25%]"],[1,"px-1"],["class","h-10 border-b text-secondary text-sm",4,"ngFor","ngForOf"],[1,"h-10","border-b","text-secondary","text-sm"],[1,"px-1","font-semibold","text-indigo-800"],[1,"font-semibold"],[1,"flex","justify-left","items-center","pt-2"],[3,"click"],[1,"rounded","pt-1",3,"svgIcon"],[1,"flex","flex-auto","flex-col","items-center","mt-30"],[1,"icon-size-24",3,"svgIcon"],[1,"text-2xl","font-semibold","tracking-tight","text-secondary"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-3","lg:col-span-4","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","flex-auto","mt-6","h-44"],[1,"flex","flex-auto","items-center","justify-center","w-full","h-full",3,"chart","colors","labels","plotOptions","series","states","tooltip"],[1,"mt-8"],[1,"-my-3","divide-y"],[4,"ngFor","ngForOf"],[1,"sm:col-span-3","lg:col-span-2","grid","grid-cols-1","gap-y-6"],[1,"sm:col-span-2","flex","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"sm:col-span-2","flex-col","flex-auto"],[1,"flex","items-center","mt-1"],[1,"text-3xl","font-semibold","tracking-tight","leading-tight","text-indigo-800"],[1,"font-medium","text-sm","text-secondary","leading-none","whitespace-nowrap"],[1,"text-indigo-800",2,"font-size","50px","height","80px","width","80px"],[1,"text-3xl","font-semibold","tracking-tight","leading-tight","text-yellow-500"],[1,"text-yellow-500",2,"font-size","50px","height","80px","width","80px",3,"svgIcon"],[1,"text-3xl","font-semibold","tracking-tight","leading-tight","text-green-500"],[1,"font-bold"],[1,"text-green-500",2,"font-size","50px","height","80px","width","80px",3,"svgIcon"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-3","py-3"],[1,"flex-0","w-2","h-2","rounded-full"],[1,"ml-3","truncate"],[1,"font-medium","text-right"],[1,"text-right","text-secondary"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.YNc(6,K,3,2,"ng-container",6),t.TgZ(7,"div",7),t._UZ(8,"mat-icon",8),t.TgZ(9,"div",9),t._uU(10,"Voc\xea tem 0 novas mensagens e 0 novas tarefas"),t.qZA()()()(),t.TgZ(11,"div",10)(12,"button",11),t.NdJ("click",function(){return e.openPeriodoDialog()}),t._UZ(13,"mat-icon",8),t.TgZ(14,"span",12),t._uU(15),t.qZA()()()()()(),t.TgZ(16,"div",13)(17,"div",14)(18,"mat-tab-group",15)(19,"mat-tab",16),t.YNc(20,at,137,51,"ng-template",17),t.qZA(),t.TgZ(21,"mat-tab",18),t.YNc(22,it,63,25,"ng-template",17),t.qZA()()()()()),2&o&&(t.xp6(8),t.Q6J("svgIcon","heroicons_solid:bell"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.AsE("Peri\xf3do => ",e.dtInitial," \xe1 ",e.dtEnd,""),t.xp6(3),t.Q6J("animationDuration","0"))},dependencies:[d.lW,u.Hw,w.YE,k.Vc,k.uX,k.SP,F.x,S.KI,T.mk,T.sg,T.O5,q.NW,T.JJ,T.uU],encapsulation:2,changeDetection:0});class v{constructor(o){this._projectService=o}resolve(o,e){return this._projectService.getData()}}v.\u0275fac=function(o){return new(o||v)(t.LFG(h))},v.\u0275prov=t.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"});class b{constructor(o){this._projectService=o}resolve(o,e){return this._projectService.getDataDashboard()}}b.\u0275fac=function(o){return new(o||b)(t.LFG(h))},b.\u0275prov=t.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"});var rt=s(2570);const nt=[{path:"",component:A,resolve:{data:v,dashboard:b,grupos:rt.zH}}];var lt=s(8277);class Z{}Z.\u0275fac=function(o){return new(o||Z)},Z.\u0275mod=t.oAB({type:Z}),Z.\u0275inj=t.cJS({imports:[l.Bz.forChild(nt),d.ot,p.vV,m.t,u.Ps,x.Tx,r.Cv,U.si,L.SJ,w.JX,Q.p0,k.Nh,F.X,S.y4,J.m,q.TU,_.Is,I.FA,lt.Yd,E.lN,G.c]})},2570:(R,f,s)=>{s.d(f,{RW:()=>u,oD:()=>p,zH:()=>m});var l=s(4650),d=s(4693);class p{constructor(r){this._UsersService=r}resolve(r,U){return this._UsersService.getUsers(this._UsersService.getUserDefaultParams)}}p.\u0275fac=function(r){return new(r||p)(l.LFG(d.f))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});class m{constructor(r){this._UsersService=r}resolve(r,U){return this._UsersService.getGroups()}}m.\u0275fac=function(r){return new(r||m)(l.LFG(d.f))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});class u{constructor(r){this._UsersService=r}resolve(r,U){return this._UsersService.getRoles()}}u.\u0275fac=function(r){return new(r||u)(l.LFG(d.f))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})},9969:(R,f,s)=>{s.d(f,{H:()=>l});var l=(()=>{return(d=l||(l={})).ENTIDADE="ENTIDADE",d.UTILIZADOR="UTILIZADOR",d.GRUPO="GRUPO",l;var d})()}}]);