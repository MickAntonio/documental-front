"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[91],{1091:(ae,A,r)=>{r.r(A),r.d(A,{EntradasModule:()=>B});var D=r(9299),y=r(1206),R=r(7957),Z=r(4859),U=r(6709),T=r(3238),c=r(9602),m=r(4850),p=r(9549),s=r(7392),h=r(284),f=r(9506),g=r(8255),u=r(3162),v=r(1948),C=r(4385),b=r(3267),$=r(266),E=r(79),xe=r(8739),Te=r(6308),W=r(7775),X=r(3231),L=r(2570),re=r(1087),se=r(516),le=r(7579),ce=r(2722),d=r(4006),de=r(8288),_=r(6895),e=r(4650),me=r(4880),K=r(9424),V=r(7490),ue=r(8214);function we(n,o){1&n&&(e.ynx(0),e._UZ(1,"div",19),e.BQk())}function De(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"li",10),e.YNc(2,we,2,0,"ng-container",11),e.TgZ(3,"div",12),e.ynx(4),e.TgZ(5,"div",13),e._UZ(6,"mat-icon",14),e.qZA(),e.BQk(),e.TgZ(7,"div",15),e.ynx(8),e.TgZ(9,"div",16)(10,"div",17)(11,"strong"),e._uU(12),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA(),e.TgZ(15,"span",18),e._uU(16),e.qZA()(),e.TgZ(17,"div")(18,"button"),e._UZ(19,"mat-icon",7),e.qZA()()(),e.BQk(),e.qZA()()(),e.BQk()),2&n){const t=o.$implicit,i=o.last;e.xp6(2),e.Q6J("ngIf",!i),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:document"),e.xp6(6),e.Oqu(t.nome),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.data),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:x")}}class S{constructor(o){this._drawerService=o,this.alert={type:"success",message:""}}ngOnInit(){}ngOnDestroy(){this._drawerService.close()}trackByFn(o,t){return t.id||o}closeDrawer(){this._drawerService.close()}}S.\u0275fac=function(o){return new(o||S)(e.Y36(K.z))},S.\u0275cmp=e.Xpm({type:S,selectors:[["file-history"]],inputs:{files:"files"},decls:13,vars:3,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","pt-10","sm:pt-10","overflow-y-auto"],[1,"flex","items-center","justify-between","-mt-3","-ml-4","p-2","sm:p-5"],[1,"flex","items-center","justify-center","pr-4","pl-3.5"],[1,"ml-2","font-semibold","text-lg"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"mt-6"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"relative","flex","py-7","hover:bg-hover","p-2","sm:p-5"],[4,"ngIf"],[1,"relative","flex","flex-auto"],[1,"flex","shrink-0","items-center","justify-center","w-10","h-10","mr-4","rounded-full","bg-gray-400"],[1,"icon-size-5","text-white",3,"svgIcon"],[1,"flex","flex-col","flex-auto","items-start"],[1,"w-full","flex","flex-row","justify-between","items-center","cursor-pointer"],[1,"flex","flex-col"],[1,"text-sm","text-primary"],[1,"absolute","top-7","left-7","sm:left-10","w-0.5","h-full","-ml-px","bg-gray-300","dark:bg-gray-600"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5,"Documentos Abertos"),e.qZA()(),e.TgZ(6,"div",5)(7,"a",6),e.NdJ("click",function(){return t.closeDrawer()}),e._UZ(8,"mat-icon",7),e.qZA()()(),e._UZ(9,"mat-divider",8),e.TgZ(10,"div")(11,"ol"),e.YNc(12,De,20,6,"ng-container",9),e.qZA()()()()),2&o&&(e.xp6(8),e.Q6J("svgIcon","heroicons_outline:chevron-left"),e.xp6(4),e.Q6J("ngForOf",t.files)("ngForTrackBy",t.trackByFn))},dependencies:[_.sg,_.O5,Z.o6,m.d,s.Hw],styles:[".ml-170{margin-left:170px}.mat-mdc-form-field-required-marker{color:rgb(220 38 38/var(--tw-text-opacity));margin-left:2px}\n"],encapsulation:2,changeDetection:0});var ee=r(5861),Ze=r(3106),J=r(5412),be=r(7243),Ae=r.n(be),Ce=r(188),Ie=r.n(Ce),F=r(2340),te=r(529),oe=r(1135),ye=r(8505);class O{constructor(o){this._httpClient=o,this._pagination=new oe.X(null),this._etiqueta=new oe.X(null),this._etiquetas=new oe.X(null)}get pagination$(){return this._pagination.asObservable()}get etiqueta$(){return this._etiqueta.asObservable()}get etiquetas$(){return this._etiquetas.asObservable()}set etiqueta$(o){o.subscribe(t=>{this._etiqueta.next(t)})}getEtiquetas(o){return this._httpClient.get(F.N.URL_ROOT_API+"/etiquetas/protocolos",{params:o}).pipe((0,ye.b)(t=>{this._pagination.next(t.pagination),this._etiquetas.next(t.data)}))}get getDocumentosDefaultParams(){let o=new te.LE;return o=o.append("sort","id"),o=o.append("order","desc"),o=o.append("page",0),o=o.append("size",10),o}auditSawEvent(o){return this._httpClient.post(F.N.URL_ROOT_API+"/entradas/audit",o)}saveEtiquetas(o){return this._httpClient.post(F.N.URL_ROOT_API+"/etiquetas/protocolos",o)}getProtocolo(o){return this._httpClient.get(F.N.URL_ROOT_API+"/etiquetas/protocolos/validar-protocolo/"+o)}deleteEtiqueta(o){return this._httpClient.delete(F.N.URL_ROOT_API+"/etiquetas/protocolos/"+o)}}O.\u0275fac=function(o){return new(o||O)(e.LFG(te.eN))},O.\u0275prov=e.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"});var Ee=r(1572);function Fe(n,o){1&n&&(e.TgZ(0,"div",26),e._UZ(1,"mat-spinner"),e.qZA())}class z{constructor(o,t,i,a){this.dialogRef=o,this.fb=t,this.data=i,this._etiquetasProtocoloService=a,this.alertMessage=new e.vpe,this.anexoPushEmitter=new e.vpe,this.alert={type:"success",message:""},this.updateForm=new d.cw({estadoId:new d.NI(0)}),this.loading=!0,this.ZebraBrowserPrintWrapper=r(188),this.printBarcode=function(){var l=(0,ee.Z)(function*(x){try{console.log("here");const w=new(Ie()),N=yield w.getDefaultPrinter();w.setPrinter(N);const Y=yield w.checkPrinterStatus();Y.isReadyToPrint?w.print(x):console.log("Error/s",Y.errors)}catch(w){throw new Error(w)}});return function(x){return l.apply(this,arguments)}}()}ngOnInit(){this.updateForm=this.fb.group({protocolo:this.data?.protocolo}),""==this.data?.protocolo?(this.hideProtocolo=!0,this.loading=!1):this.getProtocolo()}getProtocolo(){const o={next:t=>{this.showProtocoloBarcode(t,this.data?.protocolo)},error:t=>{console.log(t)}};this._etiquetasProtocoloService.getProtocolo(this.data?.protocolo).subscribe(o)}showProtocoloBarcode(o,t){null!=o?(this.protocolo=o,this.hideProtocolo=!1,this.protocoloNumero=t):this.hideProtocolo=!0,this.loading=!1;let i=t;Ae()("#barcode",i,{format:"code39",height:80,width:2,text:i,font:"helvetica",fontOptions:"bold",fontSize:16,marginTop:-10})}onNoClick(){this.dialogRef.close()}gerarProtocolo(){this.loading=!0,this.hideProtocolo=!1,this.formEtiqueta=this.fb.group({nome:new d.NI("SEDE"),quantidade:new d.NI(1),duplicacao:new d.NI(0),incluirData:new d.NI(!1)});const o={next:t=>{this.showProtocoloBarcode(t,t.codigos)},error:t=>{}};this._etiquetasProtocoloService.saveEtiquetas(this.formEtiqueta.value).subscribe(o)}imprimir(o){this.printBarcode(o)}downloadPdf(o){return F.N.URL_ROOT_API+"/etiquetas/protocolos/download/"+o}}z.\u0275fac=function(o){return new(o||z)(e.Y36(J.so),e.Y36(d.qu),e.Y36(J.WI),e.Y36(O))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-barcode-view-dialog"]],outputs:{alertMessage:"alertMessage",anexoPushEmitter:"anexoPushEmitter"},decls:50,vars:19,consts:[[1,"relative","overflow-auto"],[1,"relative","flex","flex-col"],[1,"flex","items-center","justify-center","sm:justify-start","px-6","pt-3","space-x-3","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"gt-xs:max-w-80","gt-xs:pr-12"],[1,"text-xl","leading-6","font-medium"],[1,"text-secondary","mb-6"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],["svgIcon","heroicons_outline:x",1,"text-secondary"],[1,"border-t"],["class","flex justify-center mt-15",4,"ngIf"],[3,"hidden"],[1,"px-6","pt-4","bg-card","shadow","rounded","overflow-hidden","justify-center",3,"hidden","formGroup"],[1,"flex","justify-center","mt-10"],[2,"color","black","font-weight","500"],[1,"flex","justify-center"],["mat-flat-button","",1,"scale-[.75]","mt-5",3,"color","click"],[1,"scale-[.75]",3,"svgIcon"],[1,"flex","justify-start","mb-2"],[2,"width","83%","color","black","border","1px solid #000","margin-left","30px","padding","2px 5px"],[2,"font-weight","bolder"],[1,"ml-10"],[1,"ml-13"],[1,"flex","justify-center","mt-0"],["id","barcode"],["mat-flat-button","",1,"scale-[.75]","mt-5",3,"href","color"],[1,"flex","justify-center","mt-15"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6,"C\xf3digo de Barra"),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Correspondente ao c\xf3diog informado "),e.qZA()()(),e.BQk(),e.ynx(9),e.TgZ(10,"div",6)(11,"button",7),e._UZ(12,"mat-icon",8),e.qZA()(),e.BQk(),e._UZ(13,"div",9),e.YNc(14,Fe,2,0,"div",10),e.TgZ(15,"div",11)(16,"form",12)(17,"div",13)(18,"div",14),e._uU(19,"N\xfamero de Protocolo n\xe3o Encontrado"),e.qZA()(),e.TgZ(20,"div",15)(21,"button",16),e.NdJ("click",function(){return t.gerarProtocolo()}),e._UZ(22,"mat-icon",17),e.TgZ(23,"span"),e._uU(24,"Gerar Novo Protocolo"),e.qZA()()()(),e.TgZ(25,"form",12)(26,"div",18)(27,"div",19)(28,"span",20),e._uU(29," KAILA"),e.qZA(),e.TgZ(30,"span",21),e._uU(31),e.qZA()()(),e.TgZ(32,"div",18)(33,"div",19)(34,"span",20),e._uU(35," DATA"),e.qZA(),e.TgZ(36,"span",22),e._uU(37),e.ALo(38,"date"),e.qZA()()(),e.TgZ(39,"div",23),e.O4$(),e._UZ(40,"svg",24),e.qZA(),e.kcU(),e.TgZ(41,"div",15)(42,"button",16),e.NdJ("click",function(){return t.imprimir(null==t.protocolo?null:t.protocolo.zpl)}),e._UZ(43,"mat-icon",17),e.TgZ(44,"span"),e._uU(45,"Imprimir"),e.qZA()(),e.TgZ(46,"a",25),e._UZ(47,"mat-icon",17),e.TgZ(48,"span"),e._uU(49,"Baixar PDF"),e.qZA()()()()()()()),2&o&&(e.xp6(11),e.Q6J("matDialogClose",t.protocoloNumero),e.xp6(3),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("hidden",1==t.loading),e.xp6(1),e.Q6J("hidden",!t.hideProtocolo)("formGroup",t.updateForm),e.xp6(5),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:printer"),e.xp6(3),e.Q6J("hidden",t.hideProtocolo)("formGroup",t.updateForm),e.xp6(6),e.hij(" ",null==t.protocolo?null:t.protocolo.nome,""),e.xp6(6),e.Oqu(e.xi3(38,16,null==t.protocolo?null:t.protocolo.created_at,"dd/MM/yyyy")),e.xp6(5),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:printer"),e.xp6(3),e.Q6J("href",t.downloadPdf(null==t.protocolo?null:t.protocolo.id),e.LSH)("color","accent"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:printer"))},dependencies:[_.O5,Z.zs,Z.lW,Z.RK,s.Hw,J.ZT,d._Y,d.JL,d.sg,Ee.Ou,_.uU],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]{width:32rem}}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.fuse-confirmation-dialog-panel[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important}.btn-file[_ngcontent-%COMP%]{width:48%}"]});var Ue=r(6189),Ne=r(6652),Re=r(5979),pe=r(4693),Se=r(7756),he=r(3745),fe=r(455),I=r(7084),Je=r(8361);function Oe(n,o){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.s9C("value",t.id),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nome," ")}}function Pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",33)(1,"mat-label"),e._uU(2,"N\xfamero Protocolo"),e.qZA(),e._UZ(3,"input",57),e.TgZ(4,"button",58),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.barcodeView())}),e._UZ(5,"mat-icon",59),e.qZA()()}2&n&&(e.xp6(3),e.Q6J("placeholder","Informe o protocolo"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:qrcode"))}function ke(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.username," ")}}function Qe(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function qe(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function Me(n,o){if(1&n&&(e.TgZ(0,"mat-option",56)(1,"div",60),e.YNc(2,ke,2,1,"span",61),e.YNc(3,Qe,2,1,"span",61),e.YNc(4,qe,2,1,"span",61),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngSwitch",i.selectRemetente),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function Be(n,o){1&n&&e.GkF(0)}function Ye(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.username," ")}}function Le(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ve(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function ze(n,o){if(1&n&&(e.TgZ(0,"mat-option",56)(1,"div",60),e.YNc(2,Ye,2,1,"span",61),e.YNc(3,Le,2,1,"span",61),e.YNc(4,Ve,2,1,"span",61),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngSwitch",i.selectDestinatario),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function He(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-select",62),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.changeSelectDestinatario(a))}),e.TgZ(1,"mat-option")(2,"ngx-mat-select-search",63),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filterDestinatarios(a))}),e._UZ(3,"mat-icon",11),e.TgZ(4,"span",12),e._uU(5,"Op\xe7\xe3o n\xe3o encontrada2"),e.qZA()()(),e.YNc(6,ze,5,5,"mat-option",13),e.qZA()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.searchDestinatarios)}}function je(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.username," ")}}function Ge(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function $e(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function Ke(n,o){if(1&n&&(e.TgZ(0,"mat-option",56)(1,"div",60),e.YNc(2,je,2,1,"span",61),e.YNc(3,Ge,2,1,"span",61),e.YNc(4,$e,2,1,"span",61),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngSwitch",i.selectDestinatario),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function We(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-select",64),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.changeSelectDestinatario(a))}),e.TgZ(1,"mat-option")(2,"ngx-mat-select-search",63),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filterDestinatarios(a))}),e._UZ(3,"mat-icon",11),e.TgZ(4,"span",12),e._uU(5,"Op\xe7\xe3o n\xe3o encontrada3"),e.qZA()()(),e.YNc(6,Ke,5,5,"mat-option",13),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("compareWith",t.compareFunctionObject),e.xp6(6),e.Q6J("ngForOf",t.searchDestinatarios)}}function Xe(n,o){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.s9C("value",t.template.id),e.Q6J("value",t.template.id),e.xp6(1),e.hij(" ",t.template.nome," ")}}function et(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2,"Modelo de Documento"),e.qZA(),e.TgZ(3,"mat-select",65)(4,"mat-option")(5,"ngx-mat-select-search",10),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filterTipoDocumentosTemplates(a))}),e._UZ(6,"mat-icon",11),e.TgZ(7,"span",12),e._uU(8,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(9,Xe,2,3,"mat-option",13),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.searchTipoDocumentosTemplates)}}function tt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"span",67),e._uU(6," Campos do Tipo de Documento "),e.qZA()()(),e.TgZ(7,"entrada-dynamic-form",68),e.NdJ("form",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.getDynamicFormData(a))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("options",t.dynamicForm)("valorAtributoDinamicos",null==t.registoDetail?null:t.registoDetail.valor_atributo_dinamicos)}}const P=function(n){return{"text-primary":n}},ot=function(n){return{"mt-10 ml-5":n}};class H{constructor(o,t,i,a,l,x,w,N,Y,ve){this._changeDetectorRef=o,this.dialog=t,this._route=i,this._formBuilder=a,this._tipoDocumentoService=l,this._estadoService=x,this._entidadeService=w,this._drawerService=N,this._userService=Y,this._keycloakService=ve,this.formulario=new e.vpe,this.alertMessage=new e.vpe,this.selectDestinatario=1,this.selectRemetente=1,this.alert={type:"success",message:""},this.anexos=new Array,this.anexosScanner=new Array,this.fileRequired=!1,this.registoTipo=this._route.snapshot.data.tipo,this.maxDate=new Date,"ENTRADA"==this.registoTipo?(this.fileRequired=!0,this.formTitulo="Nova Entrada"):"SAIDA"==this.registoTipo?this.formTitulo="Nova Sa\xedda":"INTERNO"==this.registoTipo&&(this.formTitulo="Documento Interno")}ngOnInit(){this.getEntidades(),this.getTipos(),this.getUser(),this.getUsers(),this.getGroups(),this.setupForm(),console.log("tipo"),console.log(this._route.snapshot.data.tipo)}ngAfterViewInit(){}setupForm(){if(this.entradaForm=this._formBuilder.group({id:new d.NI(this.registoDetail?.id),tipoId:new d.NI(this.registoDetail?.tipoId,[d.kI.required]),assunto:new d.NI(this.registoDetail?.assunto,[d.kI.required]),anexos:new d.NI(""),anexosScanner:new d.NI(""),data:new d.NI(this.registoDetail?.data),remetente:new d.NI("",[d.kI.required]),destinatario:new d.NI(""),confidencial:new d.NI(this.registoDetail?.confidencial),criadoPor:new d.NI(this.user?.username),username:new d.NI(this.user?.username),userId:new d.NI(this.user?.id),estado:new d.NI(this.registoDetail?.estado?.nome),registoTipo:new d.NI(this.registoTipo),valorAtributoDinamicos:new d.NI(null),registoRemetente:new d.NI([]),registoDestinatario:new d.NI([]),fileBase64:new d.NI(""),templateId:new d.NI(""),protocolo:new d.NI("")}),this.setRemitenteUser(),"UTILIZADOR"==this.registoDetail?.registo_remetente?.tipo?(this.selectRemetente=1,this.changeRemetente(this.selectRemetente),this.entradaForm.patchValue({remetente:this.registoDetail?.registo_remetente?.utilizadorId}),this.entradaForm.patchValue({registoRemetente:{tipo:"UTILIZADOR",utilizadorId:this.registoDetail?.registo_remetente?.utilizadorId}})):"GRUPO"==this.registoDetail?.registo_remetente?.tipo?(this.selectRemetente=2,this.changeRemetente(this.selectRemetente),this.entradaForm.patchValue({remetente:this.registoDetail?.registo_remetente?.grupoId}),this.entradaForm.patchValue({registoRemetente:{tipo:"GRUPO",grupoId:this.registoDetail?.registo_remetente?.grupoId}})):"ENTIDADE"==this.registoDetail?.registo_remetente?.tipo&&(this.selectRemetente=3,this.changeRemetente(this.selectRemetente),this.entradaForm.patchValue({remetente:this.registoDetail?.registo_remetente?.entidadeId}),this.entradaForm.patchValue({registoRemetente:{tipo:"ENTIDADE",entidadeId:this.registoDetail?.registo_remetente?.entidadeId}})),this.registoDetail?.id>0&&(this.fileRequired=!1,this.setDestinatariosSelect(this.registoDetail?.registo_destinatario),this.registoDetail.tipo.atributosDinamico)){let o=this.tipoDocumentos.find(t=>t.id==this.registoDetail.tipo.id);this.dynamicForm=o?.atributos_dinamicos,this.showStributosDinamicos=!0}this.anexosNames="",this.anexosNamesScanner=""}ngOnDestroy(){this._drawerService.close()}setDestinatariosSelect(o){var t=[];o.forEach(i=>{let a={};"UTILIZADOR"==i.tipo?(a={id:i.utilizadorId,tipo:"UTILIZADOR",utilizadorId:i.utilizadorId,grupoId:null,entidadeId:null},this.selectDestinatario=1):"GRUPO"==i.tipo?(a={id:i.grupoId,tipo:"GRUPO",utilizadorId:null,grupoId:i.grupoId,entidadeId:null},this.selectDestinatario=2):"ENTIDADE"==i.tipo&&(a={id:i.entidadeId,tipo:"ENTIDADE",utilizadorId:null,entidadeId:i.entidadeId},this.selectDestinatario=3),t.push(a)}),this.entradaForm.patchValue({registoDestinatario:t}),this.changeDestinatario(this.selectDestinatario),this.entradaForm.patchValue({destinatario:t})}compareFunctionObject(o,t){return o==t?.id}trackByFn(o,t){return t.id||o}changeDestinatario(o){switch(this.selectDestinatario=o,o){case 1:this.searchDestinatarios=this.users;break;case 2:this.searchDestinatarios=this.groups;break;case 3:this.searchDestinatarios=this.entidades}let t=[];t=this.entradaForm.get("registoDestinatario").value,t.map(i=>{let a={};if("UTILIZADOR"==i.tipo){switch(a=this.users.find(l=>l.id==i.utilizadorId),a.tipo="UTILIZADOR",o){case 1:a.username=a.username;break;case 2:a.name=a.username;break;case 3:a.nome=a.username}this.searchDestinatarios.unshift(a)}else if("GRUPO"==i.tipo){switch(a=this.groups.find(l=>l.id==i.grupoId),a.tipo="GRUPO",o){case 1:a.username=a.name;break;case 2:a.name=a.name;break;case 3:a.nome=a.name}this.searchDestinatarios.unshift(a)}else if("ENTIDADE"==i.tipo){switch(a=this.entidades.find(l=>l.id==i.entidadeId),a.tipo="ENTIDADE",o){case 1:a.username=a.nome;break;case 2:a.name=a.nome;break;case 3:a.nome=a.nome}this.searchDestinatarios.unshift(a)}}),this.searchDestinatarios=this.searchDestinatarios?.filter((i,a,l)=>a===l.findIndex(x=>x.id===i.id))}changeRemetente(o){switch(this.selectRemetente=o,o){case 1:this.searchRemetentes=this.users.filter((t,i,a)=>(null==t.tipo||"UTILIZADOR"==t.tipo)&&i===a.findIndex(l=>l.id===t.id));break;case 2:this.searchRemetentes=this.groups.filter((t,i,a)=>(null==t.tipo||"GRUPO"==t.tipo)&&i===a.findIndex(l=>l.id===t.id));break;case 3:this.searchRemetentes=this.entidades.filter((t,i,a)=>(null==t.tipo||"ENTIDADE"==t.tipo)&&i===a.findIndex(l=>l.id===t.id))}}filterTipo(o){let t=this.tipoDocumentos.find(i=>i.id==o);t.atributosDinamico?(this.dynamicForm=t?.atributos_dinamicos,this.showStributosDinamicos=!0):this.showStributosDinamicos=!1,this.tipoDocumentosTemplates=t.tipo_templates,this.searchTipoDocumentosTemplates=t.tipo_templates}filterTipoTemplate(o){this.tipoDocumentosTemplates.find(i=>i.id==o)}sendForm(){this.formulario.emit(this.entradaForm),null==this.registoDetail?.id&&this.setupForm()}getDynamicFormData(o){this.entradaForm.patchValue({valorAtributoDinamicos:o.value})}getTipos(){this._tipoDocumentoService.tipoDocumentos$.subscribe(o=>{this.tipoDocumentos=o,this.searchTipoDocumentos=this.tipoDocumentos})}getEntidades(){this._entidadeService.entidades$.subscribe(o=>{this.entidades=o})}getUsers(){this._userService.users$.subscribe(o=>{this.users=o,this.searchRemetentes=o,this.searchDestinatarios=o})}getGroups(){this._userService.groups$.subscribe(o=>{this.groups=o})}getUser(){var o=this;return(0,ee.Z)(function*(){o.user=yield o._keycloakService.loadUserProfile(),o.entradaForm.patchValue({criadoPor:o.user?.username,username:o.user?.username,userId:o.user?.id})})()}setRemitenteUser(){var o=this;return(0,ee.Z)(function*(){o.user=yield o._keycloakService.loadUserProfile(),o.selectRemetente=1,o.entradaForm.patchValue({remetente:o.user?.id}),o.entradaForm.patchValue({registoRemetente:{tipo:"UTILIZADOR",utilizadorId:o.user?.id}}),o.changeRemetente(o.selectRemetente)})()}filterTipoDocumentos(o){this.searchTipoDocumentos=this.tipoDocumentos.filter(t=>t.nome.includes(o.target.value))}filterTipoDocumentosTemplates(o){this.searchTipoDocumentosTemplates=this.tipoDocumentosTemplates.filter(t=>t.nome.includes(o.target.value))}filterRemetentes(o){switch(this.selectRemetente){case 1:this.searchRemetentes=this.users.filter(t=>t.username.includes(o.target.value));break;case 2:this.searchRemetentes=this.groups.filter(t=>t.name.includes(o.target.value));break;case 3:this.searchRemetentes=this.entidades.filter(t=>t.nome.includes(o.target.value))}}filterDestinatarios(o){switch(this.selectRemetente){case 1:this.searchDestinatarios=this.users.filter(t=>t.username.includes(o.target.value));break;case 2:this.searchDestinatarios=this.groups.filter(t=>t.name.includes(o.target.value));break;case 3:this.searchDestinatarios=this.entidades.filter(t=>t.nome.includes(o.target.value))}}changeSelectRemetente(o){let t={};switch(this.selectRemetente){case 1:t={tipo:"UTILIZADOR",utilizadorId:o.value};break;case 2:t={tipo:"GRUPO",grupoId:o.value};break;case 3:t={tipo:"ENTIDADE",entidadeId:o.value}}this.entradaForm.patchValue({registoRemetente:t})}changeSelectDestinatario(o){let t={},i=o?.value?.pop();switch(o?.value?.push(i),this.selectDestinatario){case 1:t={tipo:"UTILIZADOR",utilizadorId:i};break;case 2:t={tipo:"GRUPO",grupoId:i};break;case 3:t={tipo:"ENTIDADE",entidadeId:i}}let a=[],l=[];l=this.entradaForm.get("registoDestinatario").value,a=this.entradaForm.get("destinatario").value,a?.length>l?.length?(l.push(t),this.entradaForm.patchValue({registoDestinatario:l})):a?.length<l?.length&&(l.pop(),this.entradaForm.patchValue({registoDestinatario:l}))}triggerSelectFile(o){document.querySelector('ngx-mat-file-input[formcontrolname="fileBase64"] input[type="file"]').click()}handleFileSelect(o){const t=this.entradaForm.get("fileBase64").value;this.anexos=new Array,t.forEach((i,a)=>{if(i){const l=new FileReader;l.readAsDataURL(i),l.onload=()=>{const x=l.result,w=i.name,N=i.size,Y=w.split(".").pop();this.anexos.push({file:x,name:w.substring(0,i.name.lastIndexOf(".")),size:N,extension:"."+Y})},this.anexosNames=0==a?i.name:this.anexosNames+", "+i.name}}),console.log("anexosNames"),console.log(this.anexosNames),this.entradaForm.patchValue({anexos:this.anexos})}scannerOpenDialog(){this.dialog.open(Ze.i).updateSize("800px","500px").afterClosed().subscribe(t=>{null!=t&&(t.documentos.forEach((i,a)=>{this.anexosNamesScanner=0==a?i.nome:this.anexosNamesScanner+", "+i.nome,this.anexosScanner.push(i.id)}),console.log("anexosNames"),console.log(this.anexosScanner),this.entradaForm.patchValue({anexosScanner:this.anexosScanner}),this.fileRequired=!1,this._changeDetectorRef.markForCheck())})}barcodeView(){this.dialog.open(z,{data:{protocolo:this.entradaForm.get("protocolo").value}}).updateSize("400px","350px").afterClosed().subscribe(t=>{null!=t&&(this.entradaForm.get("protocolo").value!=t&&this.entradaForm.patchValue({protocolo:t}),this._changeDetectorRef.markForCheck())})}}H.\u0275fac=function(o){return new(o||H)(e.Y36(e.sBO),e.Y36(J.uw),e.Y36(D.gz),e.Y36(d.QS),e.Y36(Ue.D),e.Y36(Ne.Y),e.Y36(Re.b),e.Y36(K.z),e.Y36(pe.f),e.Y36(Se.MZ))},H.\u0275cmp=e.Xpm({type:H,selectors:[["entrada-form"]],inputs:{registoDetail:"registoDetail"},outputs:{formulario:"formulario",alertMessage:"alertMessage"},decls:118,vars:51,consts:[[1,"flex","flex-auto","overflow-scroll","bg-white"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"flex","flex-col","justify-center","pr-4","pl-3.5","gap-2"],[1,"ml-2","font-semibold","text-4xl"],[1,"ml-2","text-md"],[1,"mt-6","mb-8"],[1,"flex","gap-2"],[1,"flex-auto"],["formControlName","tipoId","required","",3,"selectionChange"],["placeholderLabel","Pesquisar a tipo de documento..",3,"input"],["svgIcon","heroicons_outline:x"],["ngxMatSelectNoEntriesFound",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","assunto","maxlength","250",3,"placeholder"],[1,"w-[50%]"],[1,"flex","flex-auto","flex-col"],[1,"text-lg","mb-2"],[2,"color","red"],[1,"flex","w-full","mb-1"],["type","button",1,"py-3","px-2","w-[100%]","flex","justify-between",2,"border-radius","4px!important","background-color","#f1f0f0","margin-top","-7px",3,"matMenuTriggerFor"],[1,"flex","justify-between"],[1,"mt-1"],[1,"scale-[.75]",3,"svgIcon"],["moreMenu","matMenu"],[1,"flex-auto","w-[25%]",2,"display","none"],["hidden","","formControlName","fileBase64","placeholder","Importar no PC","multiple","","accept","*",1,"file-size",3,"color","required","change"],["arquivo",""],["mat-menu-item","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col","items-start","justify-center"],[1,"text-lg"],[1,"text-sm"],[1,"flex","flex-auto","w-[25%]"],["matInput","","formControlName","data","placeholder","Data",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker",""],["class","flex flex-auto w-[25%]",4,"ngIf"],[1,"flex","gap-3"],[1,"flex","w-full","justify-between","mb-1"],[1,"w-[34%]","border","cursor-pointer","dest-first",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer",3,"ngClass","click"],[1,"w-[33%]","border","cursor-pointer","dest-last",3,"ngClass","click"],["required","","formControlName","remetente",3,"selectionChange"],["placeholderLabel","Pesquisar remetente...",3,"input"],[4,"ngIf","ngIfThen","ngIfElse"],["newDestinatarios",""],["updateDestinatarios",""],[1,"flex"],["class","flex-auto",4,"ngIf"],[1,"flex-auto",3,"ngClass"],["color","warn","formControlName","confidencial"],["class","mt-8",4,"ngIf"],[1,"flex","justify-end","mt-10"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[1,"ml-2","mr-1"],[3,"value"],["matInput","","maxlength","7","formControlName","protocolo",3,"placeholder"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"ngSwitch"],[4,"ngSwitchCase"],["multiple","","formControlName","destinatario",3,"selectionChange"],["placeholderLabel","Pesquisar destinat\xe1rio...",3,"input"],["multiple","","formControlName","destinatario",3,"compareWith","selectionChange"],["formControlName","templateId"],[1,"mt-8"],[1,"text-2xl"],[3,"options","valorAtributoDinamicos","form"]],template:function(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"span",5),e._uU(8),e.ALo(9,"lowercase"),e.qZA()()(),e._UZ(10,"mat-divider",6),e.TgZ(11,"div")(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"Tipo de Documento"),e.qZA(),e.TgZ(16,"mat-select",9),e.NdJ("selectionChange",function(l){return t.filterTipo(l.value)}),e.TgZ(17,"mat-option")(18,"ngx-mat-select-search",10),e.NdJ("input",function(l){return t.filterTipoDocumentos(l)}),e._UZ(19,"mat-icon",11),e.TgZ(20,"span",12),e._uU(21,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(22,Oe,2,3,"mat-option",13),e.qZA()(),e.TgZ(23,"mat-form-field",8)(24,"mat-label"),e._uU(25,"Assunto"),e.qZA(),e._UZ(26,"input",14),e.qZA()(),e._UZ(27,"div",7),e.TgZ(28,"div",7)(29,"div",15)(30,"div",16)(31,"span",17),e._uU(32,"Ficheiros "),e.TgZ(33,"span",18),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"div",19)(36,"button",20)(37,"div",21)(38,"mat-icon"),e._uU(39,"attach_file"),e.qZA(),e.TgZ(40,"span",22),e._uU(41),e.qZA()(),e._UZ(42,"mat-icon",23),e.qZA(),e.TgZ(43,"mat-menu",null,24)(45,"mat-form-field",25)(46,"mat-label"),e._uU(47,"Ficheiro(s)"),e.qZA(),e.TgZ(48,"ngx-mat-file-input",26,27),e.NdJ("change",function(l){return t.handleFileSelect(l)}),e.qZA()(),e.TgZ(50,"button",28),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(49);return e.KtG(t.triggerSelectFile(l))}),e._UZ(51,"mat-icon",29),e.TgZ(52,"div",30)(53,"span",31),e._uU(54,"Importar"),e.qZA(),e.TgZ(55,"span",32),e._uU(56,"ficheiros no computador"),e.qZA()()(),e.TgZ(57,"button",28),e.NdJ("click",function(){return t.scannerOpenDialog()}),e._UZ(58,"mat-icon",29),e.TgZ(59,"div",30)(60,"span",31),e._uU(61,"Scanner"),e.qZA(),e.TgZ(62,"span",32),e._uU(63,"ficheiros no scanner"),e.qZA()()()()()()(),e.TgZ(64,"mat-form-field",33)(65,"mat-label"),e._uU(66,"Data"),e.qZA(),e._UZ(67,"input",34)(68,"mat-datepicker-toggle",35)(69,"mat-datepicker",null,36),e.qZA(),e.YNc(71,Pe,6,2,"mat-form-field",37),e.qZA(),e.TgZ(72,"div",38)(73,"div",16)(74,"span",17),e._uU(75,"Remetente"),e.qZA(),e.TgZ(76,"div",39)(77,"a",40),e.NdJ("click",function(){return t.changeRemetente(1)}),e._uU(78,"Utilizadores"),e.qZA(),e.TgZ(79,"a",41),e.NdJ("click",function(){return t.changeRemetente(2)}),e._uU(80,"Grupos"),e.qZA(),e.TgZ(81,"a",42),e.NdJ("click",function(){return t.changeRemetente(3)}),e._uU(82,"Entidades"),e.qZA()(),e.TgZ(83,"mat-form-field",8)(84,"mat-select",43),e.NdJ("selectionChange",function(l){return t.changeSelectRemetente(l)}),e.TgZ(85,"mat-option")(86,"ngx-mat-select-search",44),e.NdJ("input",function(l){return t.filterRemetentes(l)}),e._UZ(87,"mat-icon",11),e.TgZ(88,"span",12),e._uU(89,"Op\xe7\xe3o n\xe3o encontrada"),e.qZA()()(),e.YNc(90,Me,5,5,"mat-option",13),e.qZA()()(),e.TgZ(91,"div",16)(92,"span",17),e._uU(93,"Destinat\xe1rio"),e.qZA(),e.TgZ(94,"div",39)(95,"a",40),e.NdJ("click",function(){return t.changeDestinatario(1)}),e._uU(96,"Utilizadores"),e.qZA(),e.TgZ(97,"a",41),e.NdJ("click",function(){return t.changeDestinatario(2)}),e._uU(98,"Grupos"),e.qZA(),e.TgZ(99,"a",42),e.NdJ("click",function(){return t.changeDestinatario(3)}),e._uU(100,"Entidades"),e.qZA()(),e.TgZ(101,"mat-form-field",8),e.YNc(102,Be,1,0,"ng-container",45),e.YNc(103,He,7,1,"ng-template",null,46,e.W1O),e.YNc(105,We,7,2,"ng-template",null,47,e.W1O),e.qZA()()(),e.TgZ(107,"div",48),e.YNc(108,et,10,1,"mat-form-field",49),e.TgZ(109,"div",50)(110,"mat-slide-toggle",51),e._uU(111,"Confidencial"),e.qZA()()()(),e.YNc(112,tt,8,2,"div",52),e.TgZ(113,"div",53)(114,"button",54),e.NdJ("click",function(){return t.sendForm()}),e._UZ(115,"mat-icon",29),e.TgZ(116,"span",55),e._uU(117,"Salvar Entrada"),e.qZA()()()()()}if(2&o){const i=e.MAs(44),a=e.MAs(70),l=e.MAs(104),x=e.MAs(106);e.xp6(1),e.Q6J("formGroup",t.entradaForm),e.xp6(4),e.Oqu(e.lcZ(6,33,t.formTitulo)),e.xp6(3),e.hij("Formul\xe1rio para adi\xe7\xe3o de um novo registo do tipo ",e.lcZ(9,35,t.registoTipo),""),e.xp6(14),e.Q6J("ngForOf",t.searchTipoDocumentos),e.xp6(4),e.Q6J("placeholder","Informe o assunto"),e.xp6(10),e.Q6J("matMenuTriggerFor",i),e.xp6(5),e.AsE("",t.anexosNames," ",t.anexosNamesScanner,""),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:chevron-down"),e.xp6(6),e.Q6J("color","accent")("required",t.fileRequired),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:desktop-computer"),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:printer"),e.xp6(9),e.Q6J("matDatepicker",a)("max",t.maxDate),e.xp6(1),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf","ENTRADA"==t.registoTipo),e.xp6(6),e.Q6J("ngClass",e.VKq(37,P,1==t.selectRemetente)),e.xp6(2),e.Q6J("ngClass",e.VKq(39,P,2==t.selectRemetente)),e.xp6(2),e.Q6J("ngClass",e.VKq(41,P,3==t.selectRemetente)),e.xp6(9),e.Q6J("ngForOf",t.searchRemetentes),e.xp6(5),e.Q6J("ngClass",e.VKq(43,P,1==t.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(45,P,2==t.selectDestinatario)),e.xp6(2),e.Q6J("ngClass",e.VKq(47,P,3==t.selectDestinatario)),e.xp6(3),e.Q6J("ngIf",!((null==t.registoDetail?null:t.registoDetail.id)>0))("ngIfThen",l)("ngIfElse",x),e.xp6(6),e.Q6J("ngIf","ENTRADA"!=t.registoTipo),e.xp6(1),e.Q6J("ngClass",e.VKq(49,ot,"ENTRADA"!=t.registoTipo)),e.xp6(3),e.Q6J("ngIf",t.showStributosDinamicos),e.xp6(2),e.Q6J("color","primary")("disabled",!t.entradaForm.valid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil-alt")}},dependencies:[T.ey,Z.lW,Z.RK,c.Mq,c.hl,c.nW,m.d,p.KE,p.hX,p.R9,s.Hw,h.Nt,g.VK,g.OP,g.p6,C.gD,he.v6,X.nu,X.C0,fe.Rr,I.pp,I.ib,I.yz,I.yK,_.mk,_.sg,_.O5,_.RF,_.n9,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.nD,d.sg,d.u,Je.H,_.i8,_.rS],styles:[".ml-170{margin-left:170px}.mat-mdc-form-field-required-marker{color:rgb(220 38 38/var(--tw-text-opacity));margin-left:2px}.mat-mdc-tab-body-content{padding-top:0!important;padding-bottom:0!important}.dest-first{border-radius:5px 0 0 5px!important;padding-left:4px}.dest-last{border-radius:0 5px 5px 0!important;padding-right:4px}.file-size,#ngx-mat-fileinput-0,#ngx-mat-fileinput-1,#ngx-mat-fileinput-2{width:100%!important}\n"],encapsulation:2,changeDetection:0});const nt=["matDrawer"];function it(n,o){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"mat-progress-bar",25),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function at(n,o){1&n&&e._UZ(0,"mat-icon",26),2&n&&e.Q6J("svgIcon","heroicons_solid:chevron-right")}function rt(n,o){if(1&n&&e._UZ(0,"div",30),2&n){const t=e.oxw(2);e.Q6J("innerHTML",t.alert.message,e.oJD)}}function st(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._uU(1),e.TgZ(2,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.viewRegisto())}),e.TgZ(3,"b"),e._uU(4,"Clique aqui para Visualizar"),e.qZA(),e._uU(5,"."),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.alert.message," ")}}function lt(n,o){if(1&n&&(e.TgZ(0,"fuse-alert",27),e.YNc(1,rt,1,1,"div",28),e.YNc(2,st,6,1,"div",29),e.qZA()),2&n){const t=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxEntradas")("type",t.alert.type)("@shake","error"===t.alert.type),e.xp6(1),e.Q6J("ngIf","success"!=t.alert.type),e.xp6(1),e.Q6J("ngIf","success"===t.alert.type)}}const ct=function(n){return{"border-r-0":n}},dt=function(n){return{"ml-0":n}};class k{constructor(o,t,i,a,l,x,w,N){this._changeDetectorRef=o,this._router=t,this._route=i,this._fuseMediaWatcherService=a,this._drawerService=l,this._entradaService=x,this._fuseAlertService=w,this.document=N,this.isLoading=!1,this.searchInputControl=new d.p4,this._unsubscribeAll=new le.x,this.showAlert=!1,this.alert={type:"success",message:""},this.files=[{nome:"DOC-20921-202301",tipo:"Contracto Fornecedor",data:"18/01/2023"},{nome:"DOC-20926-202305",tipo:"Impostos",data:"11/01/2023"},{nome:"DOC-20127-202302",tipo:"Pagamentos",data:"12/01/2023"}]}ngOnInit(){this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1200px)").pipe((0,ce.R)(this._unsubscribeAll)).subscribe(o=>{this.drawerMode=o.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this._route.snapshot.data.novo||this._entradaService.entradaDetail$.subscribe(o=>{this.registoDetail=o})}ngAfterViewInit(){this._drawerService.setDrawer(this.matDrawer)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}saveEntrada(o,t){t.scrollIntoView({behavior:"smooth"});let i=o.getRawValue();i?.id>0?(console.log("updateEntrada"),this.updateEntrada(i)):(console.log("createEntrada"),this.createEntrada(i))}createEntrada(o){(null!=o.dynamicData||null!=o.dynamicData)&&(o.dynamicData=o?.dynamicData?.getRawValue()),o.confidencial=o.confidencial?1:0;const t={next:i=>{this.registo=i,this.alert={type:"success",message:"Entrada cadastrada com sucesso. Documento n\xba: "+this.registo?.referencia},this.showAlert=!0,this._fuseAlertService.show("alertBoxEntradas"),this._changeDetectorRef.markForCheck(),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this.showAlert=!1,this._changeDetectorRef.markForCheck()},15e3)},error:i=>{this.alert={type:"error",message:`${i}`},this.showAlert=!0,this._fuseAlertService.show("alertBoxEntradas"),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this._changeDetectorRef.markForCheck()},500)}};this._entradaService.createEntrada(o).subscribe(t)}updateEntrada(o){(null!=o.dynamicData||null!=o.dynamicData)&&(o.dynamicData=o?.dynamicData?.getRawValue()),o.confidencial=o.confidencial?1:0;const t={next:i=>{this.registo=i,console.log(this.registo),this.alert={type:"success",message:"Entrada actualizada com sucesso. Documento n\xba: "+this.registo?.referencia},this.showAlert=!0,this._fuseAlertService.show("alertBoxEntradas"),this._changeDetectorRef.markForCheck(),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this.showAlert=!1,this._changeDetectorRef.markForCheck()},15e3)},error:i=>{this.alert={type:"error",message:`${i}`},this.showAlert=!0,this._fuseAlertService.show("alertBoxEntradas"),setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this._changeDetectorRef.markForCheck()},500)}};this._entradaService.updateEntrada(o.id,o).subscribe(t)}scroll(o){o.scrollIntoView({behavior:"smooth"})}showAlertEvent(o){this.alert=o,this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this._changeDetectorRef.markForCheck()},15e3)}openFileHistory(){this.matDrawer.open()}viewRegisto(){this._router.navigate(["registo/entradas",this.registo?.id])}}k.\u0275fac=function(o){return new(o||k)(e.Y36(e.sBO),e.Y36(D.F0),e.Y36(D.gz),e.Y36(me.T),e.Y36(K.z),e.Y36(V._),e.Y36(W.jm),e.Y36(_.K0))},k.\u0275cmp=e.Xpm({type:k,selectors:[["entrada-create"]],viewQuery:function(o,t){if(1&o&&e.Gf(nt,5),2&o){let i;e.iGM(i=e.CRH())&&(t.matDrawer=i.first)}},decls:28,vars:16,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-scroll"],["target",""],["id","dados2",1,"flex","flex-col","flex-auto","bg-white"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent"],[1,"w-full","bg-gray-50",2,"width","300px!important",3,"mode","opened","position","disableClose"],["matDrawer",""],[3,"files"],[1,"flex","flex-row","items-start"],[1,"h-full","border","border","border-r-2","bg-gray-50",3,"ngClass"],[1,"flex","font-medium","mt-8"],[3,"click"],["class","icon-size-8 text-secondary",3,"svgIcon",4,"ngIf"],[1,"mx-10","mb-10","w-full",3,"ngClass"],[1,"px-6","mt-2"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[3,"registoDetail","alertMessage","formulario"],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"icon-size-8","text-secondary",3,"svgIcon"],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"]],template:function(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"div",null,1),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,it,2,1,"div",4),e.TgZ(6,"div",5)(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Registo"),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"mat-icon",9),e.TgZ(13,"span",10),e._uU(14,"Entradas"),e.qZA()()()()(),e.TgZ(15,"mat-drawer-container",11)(16,"mat-drawer",12,13),e._UZ(18,"file-history",14),e.qZA(),e.TgZ(19,"mat-drawer-content",15)(20,"div",16)(21,"div",17)(22,"button",18),e.NdJ("click",function(){return t.openFileHistory()}),e.YNc(23,at,1,1,"mat-icon",19),e.qZA()()(),e.TgZ(24,"div",20)(25,"div",21),e.YNc(26,lt,3,8,"fuse-alert",22),e.qZA(),e.TgZ(27,"entrada-form",23),e.NdJ("alertMessage",function(l){return t.showAlertEvent(l)})("formulario",function(l){e.CHM(i);const x=e.MAs(2);return e.KtG(t.saveEntrada(l,x))}),e.qZA()()()()()()}if(2&o){const i=e.MAs(17);e.xp6(5),e.Q6J("ngIf",t.isLoading),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("mode",t.drawerMode)("opened",!1)("position","start")("disableClose",!0),e.xp6(2),e.Q6J("files",t.files),e.xp6(2),e.Q6J("ngClass",e.VKq(12,ct,i.opened)),e.xp6(3),e.Q6J("ngIf",!i.opened),e.xp6(1),e.Q6J("ngClass",e.VKq(14,dt,i.opened)),e.xp6(2),e.Q6J("ngIf",t.showAlert),e.xp6(1),e.Q6J("registoDetail",t.registoDetail)}},dependencies:[s.Hw,u.pW,b.jA,b.kh,b.LW,ue.W,_.mk,_.O5,S,H],styles:[".cursor-p:hover{cursor:pointer!important;color:#4f46e5}.padding-l-40{padding-left:40px!important}\n"],encapsulation:2,data:{animation:de.L},changeDetection:0});var mt=r(9957),ne=r(3848),ge=r(8171),_e=r(3930),ut=r(6527),pt=r(3612),ht=r(3004),ft=r(1598),gt=r(4645);const _t=["matDrawer"],vt=["matDrawerFileView"];function xt(n,o){1&n&&e.GkF(0)}function Tt(n,o){if(1&n&&e._UZ(0,"ngx-doc-viewer",45),2&n){const t=e.oxw(2);e.Q6J("url","https://homepages.inf.ed.ac.uk/neilb/TestWordDoc.doc")("viewer",t.viewerType)}}function wt(n,o){if(1&n&&e._UZ(0,"ngx-extended-pdf-viewer",46),2&n){const t=e.oxw(2);e.Q6J("src",t.anexoUrl)("showToolbar",!0)("showSidebarButton",!0)("showFindButton",!1)("showPagingButtons",!0)("showDrawEditor",!1)("showTextEditor",!1)("showZoomButtons",!0)("showPresentationModeButton",!1)("showOpenFileButton",!1)("showPrintButton",!0)("showDownloadButton",!0)("showSecondaryToolbarButton",!0)("showRotateButton",!0)("showHandToolButton",!1)("showScrollingButton",!1)("showSpreadButton",!1)("showPropertiesButton",!0)}}function Dt(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,xt,1,0,"ng-container",42),e.YNc(2,Tt,1,2,"ng-template",null,43,e.W1O),e.YNc(4,wt,1,18,"ng-template",null,44,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.MAs(5),a=e.oxw();e.xp6(1),e.Q6J("ngIf","pdf"!=a.viewerType)("ngIfThen",t)("ngIfElse",i)}}function Zt(n,o){1&n&&(e.TgZ(0,"div",47),e._UZ(1,"mat-progress-bar",48),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function bt(n,o){if(1&n&&(e.TgZ(0,"fuse-alert",49),e._UZ(1,"div",50),e.qZA()),2&n){const t=e.oxw();e.Q6J("appearance","soft")("dismissible",!0)("dismissed",!0)("name","alertBoxEntradas")("type",t.alert.type)("@shake","error"===t.alert.type),e.xp6(1),e.Q6J("innerHTML",t.alert.message,e.oJD)}}function At(n,o){1&n&&e._UZ(0,"mat-icon",51),2&n&&e.Q6J("svgIcon","heroicons_solid:chevron-right")}const Ct=function(n){return{"border-r-0":n}},It=function(n){return{"ml-0":n}};class j{constructor(o,t,i,a,l,x,w){this._changeDetectorRef=o,this.dialog=t,this._fuseMediaWatcherService=i,this._drawerService=a,this._fuseAlertService=l,this._entradasService=x,this._usersService=w,this.isLoading=!1,this.searchInputControl=new d.p4,this._unsubscribeAll=new le.x,this.showAlert=!1,this.viewerType="pdf",this.anexoTipo="A",this.selectedIndex=0,this.alert={type:"success",message:""},this.files=[{nome:"DOC-20921-202301",tipo:"Contracto Fornecedor",data:"18/01/2023"},{nome:"DOC-20926-202305",tipo:"Impostos",data:"11/01/2023"},{nome:"DOC-20127-202302",tipo:"Pagamentos",data:"12/01/2023"}]}ngOnInit(){this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1200px)").pipe((0,ce.R)(this._unsubscribeAll)).subscribe(o=>{this.drawerMode=o.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this._entradasService.entradaDetail$.subscribe(o=>{this.registoDetail=o}),this._usersService.groups$.subscribe(o=>{this.groupsList=o})}ngAfterViewInit(){this._drawerService.setDrawer(this.matDrawer)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}showAlertEvent(o){this.alert=o,this.showAlert=!0,setTimeout(()=>{this._fuseAlertService.dismiss("alertBoxEntradas"),this._changeDetectorRef.markForCheck()},15e3)}openFileHistory(){this.matDrawer.open()}showFileView(o,t){this.anexo=o,"H"==t?(this.anexoUrl=F.N.URL_ROOT_API+"/anexos/historico/view/"+o.id,this.anexoTipo="H"):(this.anexoUrl=F.N.URL_ROOT_API+"/anexos/view/"+o.id,this.anexoTipo="A"),this.viewerType=".ppt"==o.extensao||".pptx"==o.extensao||".doc"==o.extensao||".docx"==o.extensao||".xls"==o.extensao||".xlsx"==o.extensao?"office":".pdf"==o.extensao?"pdf":"google",this.isOpened=!0,this._drawerService.setDrawer(this.matDrawerFileView),this._drawerService.open()}closeDrawer(){this.isOpened=!1,this._drawerService.close()}anexoFullPage(){this.isOpened=!1,this._drawerService.close(),this.dialog.open(mt.O,{data:{anexo:this.anexo,tipo:this.anexoTipo}}).updateSize("1000px","700px")}documentRefresh(o){this.registoDetail=o}circulacaoPendente(o){this.selectedIndex=o}}j.\u0275fac=function(o){return new(o||j)(e.Y36(e.sBO),e.Y36(J.uw),e.Y36(me.T),e.Y36(K.z),e.Y36(W.jm),e.Y36(V._),e.Y36(pe.f))},j.\u0275cmp=e.Xpm({type:j,selectors:[["entrada-detail"]],viewQuery:function(o,t){if(1&o&&(e.Gf(_t,5),e.Gf(vt,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.matDrawer=i.first),e.iGM(i=e.CRH())&&(t.matDrawerFileView=i.first)}},decls:59,vars:34,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-scroll"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent"],[1,"w-full","dark:bg-gray-900",2,"width","560px!important",3,"mode","opened","position","disableClose"],["matDrawerFileView",""],[1,"flex","items-center","justify-end","mt-4","mx-4","mb-2"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[4,"ngIf"],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto","bg-white"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[3,"appearance","dismissible","dismissed","name","type",4,"ngIf"],[1,"w-full","bg-gray-50","dark:bg-gray-900",2,"width","300px!important",3,"mode","opened","position","disableClose"],["matDrawer",""],[3,"files"],[1,"flex","flex-row","items-start"],[1,"h-full","border","border","border-r-2","bg-gray-50",3,"ngClass"],[1,"flex","font-medium","mt-8"],[3,"click"],["class","icon-size-8 text-secondary",3,"svgIcon",4,"ngIf"],[1,"mb-10","w-full",3,"ngClass"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Documento",1,"p-0","tabs"],[1,"mx-4"],[3,"registoDetail","groupsList","circulacaoPendenteEmmit","documentRefreshEmmit"],[1,"mb-1"],["expanded","true"],[1,"text-2xl"],[3,"anexos","isOpened","registo","documentRefreshEmmit","showFileView"],[3,"anexos","isOpened","registo","showFileViewHistorico"],["label","Circula\xe7\xf5es"],[3,"registo","groupsList"],["label","Auditoria"],[3,"registoId"],[4,"ngIf","ngIfThen","ngIfElse"],["docViewer",""],["pdfViewer",""],[2,"width","100%","height","86vh",3,"url","viewer"],[3,"src","showToolbar","showSidebarButton","showFindButton","showPagingButtons","showDrawEditor","showTextEditor","showZoomButtons","showPresentationModeButton","showOpenFileButton","showPrintButton","showDownloadButton","showSecondaryToolbarButton","showRotateButton","showHandToolButton","showScrollingButton","showSpreadButton","showPropertiesButton"],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[3,"appearance","dismissible","dismissed","name","type"],[3,"innerHTML"],[1,"icon-size-8","text-secondary",3,"svgIcon"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"div",4)(5,"div",5)(6,"a",6),e.NdJ("click",function(){return t.anexoFullPage()}),e.TgZ(7,"mat-icon"),e._uU(8,"open_in_new"),e.qZA()(),e.TgZ(9,"a",6),e.NdJ("click",function(){return t.closeDrawer()}),e._UZ(10,"mat-icon",7),e.qZA()()(),e.YNc(11,Dt,6,3,"div",8),e.qZA(),e.TgZ(12,"mat-drawer-content",9)(13,"div",10)(14,"div",11),e.YNc(15,Zt,2,1,"div",12),e.TgZ(16,"div",13)(17,"div",14)(18,"div")(19,"a",15),e._uU(20,"Registo"),e.qZA()(),e.TgZ(21,"div",16),e._UZ(22,"mat-icon",17),e.TgZ(23,"span",18),e._uU(24),e.qZA()()()()(),e.YNc(25,bt,2,7,"fuse-alert",19),e.TgZ(26,"mat-drawer-container",1)(27,"mat-drawer",20,21),e._UZ(29,"file-history",22),e.qZA(),e.TgZ(30,"mat-drawer-content",23)(31,"div",24)(32,"div",25)(33,"button",26),e.NdJ("click",function(){return t.openFileHistory()}),e.YNc(34,At,1,1,"mat-icon",27),e.qZA()()(),e.TgZ(35,"div",28)(36,"div")(37,"mat-tab-group",29),e.NdJ("selectedIndexChange",function(a){return t.circulacaoPendente(a)}),e.TgZ(38,"mat-tab",30)(39,"div",31)(40,"entrada-document-detail",32),e.NdJ("circulacaoPendenteEmmit",function(a){return t.circulacaoPendente(a)})("documentRefreshEmmit",function(a){return t.documentRefresh(a)}),e.qZA(),e.TgZ(41,"div",33)(42,"mat-accordion")(43,"mat-expansion-panel",34)(44,"mat-expansion-panel-header")(45,"mat-panel-title")(46,"span",35),e._uU(47," Anexos "),e.qZA()()(),e.TgZ(48,"entrada-anexo",36),e.NdJ("documentRefreshEmmit",function(a){return t.documentRefresh(a)})("showFileView",function(a){return t.showFileView(a)}),e.qZA()(),e.TgZ(49,"mat-expansion-panel")(50,"mat-expansion-panel-header")(51,"mat-panel-title")(52,"span",35),e._uU(53," Anexos Historico "),e.qZA()()(),e.TgZ(54,"app-anexo-historico",37),e.NdJ("showFileViewHistorico",function(a){return t.showFileView(a,"H")}),e.qZA()()()()()(),e.TgZ(55,"mat-tab",38),e._UZ(56,"app-circulacoes",39),e.qZA(),e.TgZ(57,"mat-tab",40),e._UZ(58,"document-auditoria",41),e.qZA()()()()()()()()()()),2&o){const i=e.MAs(28);e.xp6(2),e.Q6J("mode",t.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(1),e.Q6J("ngIf",t.isOpened),e.xp6(4),e.Q6J("ngIf",t.isLoading),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu(t.registoDetail.registoTipo),e.xp6(1),e.Q6J("ngIf",t.showAlert),e.xp6(2),e.Q6J("mode",t.drawerMode)("opened",!1)("position","start")("disableClose",!0),e.xp6(2),e.Q6J("files",t.files),e.xp6(2),e.Q6J("ngClass",e.VKq(30,Ct,i.opened)),e.xp6(3),e.Q6J("ngIf",!i.opened),e.xp6(1),e.Q6J("ngClass",e.VKq(32,It,i.opened)),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(3),e.Q6J("registoDetail",t.registoDetail)("groupsList",t.groupsList),e.xp6(8),e.Q6J("anexos",t.registoDetail.anexos)("isOpened",t.isOpened)("registo",t.registoDetail),e.xp6(6),e.Q6J("anexos",t.registoDetail.anexos_historico)("isOpened",t.isOpened)("registo",t.registoDetail),e.xp6(2),e.Q6J("registo",t.registoDetail)("groupsList",t.groupsList),e.xp6(2),e.Q6J("registoId",t.registoDetail.id)}},dependencies:[Z.o6,s.Hw,u.pW,b.jA,b.kh,b.LW,ue.W,ne.uX,ne.SP,I.pp,I.ib,I.yz,I.yK,ge.zr,_e.S3,_.mk,_.O5,ut.U,S,pt.W,ht.I,ft._,gt.z],styles:[".cursor-p:hover{cursor:pointer!important;color:#4f46e5}.padding-l-40{padding-left:40px!important}.mat-mdc-tab-body-content{padding:0!important}mat-tab-header{background-color:rgb(248 250 252/var(--tw-bg-opacity))!important}\n"],encapsulation:2,data:{animation:de.L},changeDetection:0});var ie=r(7489),yt=r(2500);class G{constructor(o){this._entradaService=o}resolve(){return this._entradaService.getEntradas(this._entradaService.getEntradaDefaultParams)}}G.\u0275fac=function(o){return new(o||G)(e.LFG(V._))},G.\u0275prov=e.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"});class Q{constructor(o){this._entradaService=o}resolve(o,t){return this._entradaService.getEntradaDetails((0,ie.toInteger)(o.paramMap.get("id")))}}Q.\u0275fac=function(o){return new(o||Q)(e.LFG(V._))},Q.\u0275prov=e.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"});class q{constructor(o){this._entradaService=o}resolve(o,t){return this._entradaService.getEntradaDetailsRefresh((0,ie.toInteger)(o.paramMap.get("id")))}}q.\u0275fac=function(o){return new(o||q)(e.LFG(V._))},q.\u0275prov=e.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"});class M{constructor(o){this._auditoriaService=o}resolve(o,t){let i=new te.LE;return i=i.append("registoId",(0,ie.toInteger)(o.paramMap.get("id"))),i=i.append("page",0),i=i.append("size",8),this._auditoriaService.getAuditorias(i)}}M.\u0275fac=function(o){return new(o||M)(e.LFG(yt.I))},M.\u0275prov=e.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"});const Et=[{path:"",component:k,data:{novo:!0},resolve:{documentosTipos:re.G,entidades:se.S,users:L.oD,groups:L.zH}},{path:":id",component:j,resolve:{entradaDetail:Q,groups:L.zH,auditoria:M}},{path:"edit/:id",component:k,data:{novo:!1},resolve:{entradaDetail:q,documentosTipos:re.G,entidades:se.S,users:L.oD,groups:L.zH}}];var Ft=r(7494),Ut=r(8046),Nt=r(6562),Rt=r(3817);class B{}B.\u0275fac=function(o){return new(o||B)},B.\u0275mod=e.oAB({type:B}),B.\u0275inj=e.cJS({imports:[D.Bz.forChild(Et),y._t,R.Bb,Z.ot,U.p9,c.FA,m.t,p.lN,s.Ps,h.c,f.En,g.Tx,u.Cv,v.Fk,T.si,C.LD,b.SJ,$.AV,xe.TU,Te.JX,E.V,he.S1,W.fC,X.Co,ne.Nh,fe.rP,c.FA,I.To,Ft.Yi,ge.cX,_e.g3,J.Is,_.ez,d.u5,d.UX,Ut.y,Nt.k,Rt.AuditoriaModule]})},4803:(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.API_URL=void 0,A.API_URL="http://localhost:9100/"},188:function(ae,A,r){var D=this&&this.__awaiter||function(U,T,c,m){return new(c||(c=Promise))(function(s,h){function f(v){try{u(m.next(v))}catch(C){h(C)}}function g(v){try{u(m.throw(v))}catch(C){h(C)}}function u(v){v.done?s(v.value):function p(s){return s instanceof c?s:new c(function(h){h(s)})}(v.value).then(f,g)}u((m=m.apply(U,T||[])).next())})},y=this&&this.__generator||function(U,T){var m,p,s,h,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return h={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function f(u){return function(v){return function g(u){if(m)throw new TypeError("Generator is already executing.");for(;c;)try{if(m=1,p&&(s=2&u[0]?p.return:u[0]?p.throw||((s=p.return)&&s.call(p),0):p.next)&&!(s=s.call(p,u[1])).done)return s;switch(p=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,p=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(s=(s=c.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){c=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){c.label=u[1];break}if(6===u[0]&&c.label<s[1]){c.label=s[1],s=u;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(u);break}s[2]&&c.ops.pop(),c.trys.pop();continue}u=T.call(U,c)}catch(v){u=[6,v],p=0}finally{m=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,v])}}};Object.defineProperty(A,"__esModule",{value:!0});var R=r(4803);A.default=function U(){var T=this;this.device={},this.getAvailablePrinters=function(){return D(T,void 0,void 0,function(){var c,m,s,h;return y(this,function(f){switch(f.label){case 0:c={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},m=R.API_URL+"available",f.label=1;case 1:return f.trys.push([1,4,,5]),[4,fetch(m,c)];case 2:return[4,f.sent().json()];case 3:return(s=f.sent())&&void 0!==s&&s.printer&&void 0!==s.printer&&s.printer.length>0?[2,s.printer]:[2,new Error("No printers available")];case 4:throw h=f.sent(),new Error(h);case 5:return[2]}})})},this.getDefaultPrinter=function(){return D(T,void 0,void 0,function(){var c,m,s,h,f,g,u,v,C,b,$;return y(this,function(E){switch(E.label){case 0:c={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},m=R.API_URL+"default",E.label=1;case 1:return E.trys.push([1,4,,5]),[4,fetch(m,c)];case 2:return[4,E.sent().text()];case 3:if((s=E.sent())&&void 0!==s&&"object"!=typeof s&&7===s.split("\n\t").length)return h=s.split("\n\t"),f=this.cleanUpString(h[1]),g=this.cleanUpString(h[2]),u=this.cleanUpString(h[3]),v=this.cleanUpString(h[4]),C=this.cleanUpString(h[5]),b=this.cleanUpString(h[6]),[2,{connection:u,deviceType:g,manufacturer:b,name:f,provider:C,uid:v,version:0}];throw new Error("There's no default printer");case 4:throw $=E.sent(),new Error($);case 5:return[2]}})})},this.setPrinter=function(c){T.device=c},this.getPrinter=function(){return T.device},this.cleanUpString=function(c){return c.split(":")[1].trim()},this.checkPrinterStatus=function(){return D(T,void 0,void 0,function(){var c,m,p,s,h,f,g;return y(this,function(u){switch(u.label){case 0:return[4,this.write("~HQES")];case 1:return u.sent(),[4,this.read()];case 2:switch(c=u.sent(),m=[],s=c.charAt(70),h=c.charAt(88),f=c.charAt(87),g=c.charAt(84),p="0"===s,h){case"1":m.push("Paper out");break;case"2":m.push("Ribbon Out");break;case"4":m.push("Media Door Open");break;case"8":m.push("Cutter Fault")}switch(f){case"1":m.push("Printhead Overheating");break;case"2":m.push("Motor Overheating");break;case"4":m.push("Printhead Fault");break;case"8":m.push("Incorrect Printhead")}return"1"===g&&m.push("Printer Paused"),!p&&0===m.length&&m.push("Error: Unknown Error"),[2,{isReadyToPrint:p,errors:m.join()}]}})})},this.write=function(c){return D(T,void 0,void 0,function(){var m,s,h;return y(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),m=R.API_URL+"write",s={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({device:this.device,data:c})},[4,fetch(m,s)];case 1:return f.sent(),[3,3];case 2:throw h=f.sent(),new Error(h);case 3:return[2]}})})},this.read=function(){return D(T,void 0,void 0,function(){var c,p,f;return y(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),c=R.API_URL+"read",p={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({device:this.device})},[4,fetch(c,p)];case 1:return[4,g.sent().text()];case 2:return[2,g.sent()];case 3:throw f=g.sent(),new Error(f);case 4:return[2]}})})},this.print=function(c){return D(T,void 0,void 0,function(){var m;return y(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this.write(c)];case 1:return p.sent(),[3,3];case 2:throw m=p.sent(),new Error(m);case 3:return[2]}})})}}}}]);